/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React;var n=e.n(t);const o=window.ReactDOM;var i=e.n(o),r=function(e){return e.IDLE="IDLE",e.LOADING="LOADING",e.SUCCESS="SUCCESS",e.ERROR="ERROR",e}({});function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={primaryColor:"blue-600",secondaryColor:"gray-700",backgroundColor:"white",textColor:"gray-900",fontFamily:"font-sans",previewScale:1},d=[{name:"Default Blue",options:u},{name:"Modern Teal",options:l(l({},u),{},{primaryColor:"teal-600",secondaryColor:"slate-700",textColor:"slate-900"})},{name:"Classic Gray",options:l(l({},u),{},{primaryColor:"gray-800",secondaryColor:"gray-600",textColor:"black",fontFamily:"font-serif"})},{name:"Creative Purple",options:l(l({},u),{},{primaryColor:"purple-600",secondaryColor:"pink-500",backgroundColor:"gray-50",textColor:"gray-800"})}],p={personalInfo:{name:"Alex Johnson",title:"Senior Software Engineer",phone:"(555) 123-4567",email:"alex.johnson@email.com",linkedin:"linkedin.com/in/alexjohnson",github:"github.com/alexj",portfolio:"alexjohnson.dev",address:"123 Tech Avenue, Silicon Valley, CA",portraitUrl:"",showPortrait:!1,showPhone:!0,showEmail:!0,showLinkedin:!0,showGithub:!0,showPortfolio:!0,showAddress:!1},summary:"Highly motivated and results-oriented Senior Software Engineer with 8+ years of experience in developing scalable web applications. Proficient in full-stack development with a strong focus on frontend technologies. Seeking to leverage expertise in a challenging new role.",experience:[{id:crypto.randomUUID(),jobTitle:"Senior Software Engineer",company:"Tech Solutions Inc.",location:"San Francisco, CA",startDate:"Jan 2020",endDate:"Present",responsibilities:["Led the development of a new customer portal, improving user satisfaction by 25%.","Mentored junior engineers, fostering a collaborative and productive team environment.","Architected and implemented microservices, enhancing system scalability and performance."]},{id:crypto.randomUUID(),jobTitle:"Software Engineer",company:"Innovatech Ltd.",location:"Austin, TX",startDate:"Jun 2016",endDate:"Dec 2019",responsibilities:["Developed and maintained features for a SaaS product using React and Node.js.","Contributed to a 15% reduction in bug reports through rigorous testing and code reviews.","Collaborated with cross-functional teams to deliver high-quality software solutions."]}],education:[{id:crypto.randomUUID(),degree:"M.S. in Computer Science",institution:"Stanford University",location:"Stanford, CA",graduationDate:"May 2016",details:["GPA: 3.9/4.0","Thesis on Distributed Systems"]},{id:crypto.randomUUID(),degree:"B.S. in Software Engineering",institution:"University of Texas at Austin",location:"Austin, TX",graduationDate:"May 2014",details:["Graduated with Honors"]}],skills:[{id:crypto.randomUUID(),category:"Programming Languages",skills:["JavaScript (ES6+)","TypeScript","Python","Java"]},{id:crypto.randomUUID(),category:"Frameworks/Libraries",skills:["React","Next.js","Node.js","Express.js","Spring Boot"]},{id:crypto.randomUUID(),category:"Tools & Platforms",skills:["Git","Docker","Kubernetes","AWS","Jenkins"]}]},m=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))},f=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12.56 0c1.153 0 2.243.096 3.242.26m3.242-.26M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))},h=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))},g=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125V5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.15-.15.337-.273.53-.365m0 0a4.878 4.878 0 0 1 7.426 0l.928.928a4.878 4.878 0 0 1 0 7.426l-.928.928a4.878 4.878 0 0 1-7.426 0l-.928-.928a4.878 4.878 0 0 1 0-7.426Z"}))},y=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))},v=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672Zm-7.518-.267A8.25 8.25 0 1 1 20.25 10.5M8.288 14.212A5.25 5.25 0 1 1 17.25 10.5"}))},b=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))},_=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))},C=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.15 10.15 0 0 1 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639A10.154 10.154 0 0 1 12 19.5c-1.897 0-3.7-.467-5.283-1.25M12 15V9.75M15 12a3 3 0 0 1-6 0m3 0a3 3 0 0 0-3 3m0 0H6.75M17.25 12H18m-3.75 3.75H15M11.25 3.75H12M4.5 12.75H6M12 21V19.5"}))},E=function(e){var t=e.className;return n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-5 h-5"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.04l-.821 1.316Z"}),n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))},w=function(e){var t=e.title,o=e.primaryColor;return n().createElement("h2",{className:"text-xl font-bold border-b-2 border-".concat(o," mb-2 pb-1 text-").concat(o)},t.toUpperCase())},T=function(e,t){if(!e)return"";try{var n=e.trim();n.startsWith("http://")||n.startsWith("https://")||(n="https://"+n);var o=new URL(n);if("linkedin"===t){var i=o.pathname.split("/").filter((function(e){return e.length>0}));return i.length>1&&("in"===i[0]||"pub"===i[0])?i[1]:o.hostname.replace("www.","")}if("github"===t){var r=o.pathname.split("/").filter((function(e){return e.length>0}));return r.length>0?r[0]:o.hostname.replace("www.","")}if("portfolio"===t)return o.hostname.replace("www.","")}catch(n){var s=e.replace(/^(https?:\/\/)?(www\.)?/i,"").split("/")[0];if("linkedin"===t&&(e.includes("linkedin.com/in/")||e.includes("linkedin.com/pub/"))){var a=e.split("/"),l=a.indexOf("in"),c=a.indexOf("pub");if(-1!==l&&a[l+1])return a[l+1];if(-1!==c&&a[c+1])return a[c+1]}if("github"===t&&e.includes("github.com/")){var u=e.split("/"),d=u.indexOf("github.com");if(-1!==d&&u[d+1])return u[d+1]}return s||("linkedin"===t?"LinkedIn":"github"===t?"GitHub":"Portfolio")}return e},O=function(e){var t=e.info,o=e.theme,i=t.showPhone||t.showEmail||t.showLinkedin||t.showGithub||t.showPortfolio,r=t.showPortrait&&t.portraitUrl,s=[t.showPhone&&t.phone&&n().createElement("span",{key:"phone"},t.phone),t.showEmail&&t.email&&n().createElement("a",{key:"email",href:"mailto:".concat(t.email),className:"hover:text-".concat(o.primaryColor)},t.email),t.showLinkedin&&t.linkedin&&n().createElement("a",{key:"linkedin",href:t.linkedin.startsWith("http")?t.linkedin:"https://".concat(t.linkedin),target:"_blank",rel:"noopener noreferrer",className:"hover:text-".concat(o.primaryColor)},T(t.linkedin,"linkedin")),t.showGithub&&t.github&&n().createElement("a",{key:"github",href:t.github.startsWith("http")?t.github:"https://".concat(t.github),target:"_blank",rel:"noopener noreferrer",className:"hover:text-".concat(o.primaryColor)},T(t.github,"github")),t.showPortfolio&&t.portfolio&&n().createElement("a",{key:"portfolio",href:t.portfolio.startsWith("http")?t.portfolio:"https://".concat(t.portfolio),target:"_blank",rel:"noopener noreferrer",className:"hover:text-".concat(o.primaryColor)},T(t.portfolio,"portfolio"))].filter(Boolean);return n().createElement("div",{className:"mb-6 ".concat(r?"flex flex-row items-start gap-4":"text-center")},r&&n().createElement("div",{className:"flex-shrink-0"},n().createElement("img",{src:t.portraitUrl,alt:"".concat(t.name,"'s portrait"),className:"w-24 h-24 object-cover rounded-md border border-gray-300 shadow-sm"})),n().createElement("div",{className:"".concat(r?"flex-grow text-left":"text-center")},n().createElement("h1",{className:"text-3xl font-bold text-".concat(o.primaryColor)},t.name),n().createElement("p",{className:"text-lg text-".concat(o.secondaryColor)},t.title),i&&n().createElement("div",{className:"mt-2 text-xs text-".concat(o.textColor," ").concat(r?"flex flex-col items-start gap-y-0.5":"flex flex-row flex-wrap justify-center items-center")},r?s.map((function(e){return n().createElement("span",{key:e.key,className:"flex items-center"},e)})):s.map((function(e,t){return n().createElement(n().Fragment,{key:e.key||t},e,t<s.length-1&&n().createElement("span",{className:"mx-1.5 text-gray-400"},"|"))}))),t.showAddress&&t.address&&n().createElement("p",{className:"text-xs text-gray-500 mt-1 ".concat(r?"":"text-center")},t.address)))},S=function(e){var t=e.summary,o=e.theme;return n().createElement("div",{className:"mb-4"},n().createElement(w,{title:"Summary",primaryColor:o.primaryColor}),n().createElement("p",{className:"text-sm text-".concat(o.textColor," leading-relaxed")},t))},x=function(e){var t=e.exp,o=e.theme;return n().createElement("div",{className:"mb-3"},n().createElement("h3",{className:"text-md font-semibold text-".concat(o.textColor)},t.jobTitle),n().createElement("div",{className:"flex justify-between items-center"},n().createElement("p",{className:"text-sm font-medium text-".concat(o.secondaryColor)},t.company),n().createElement("p",{className:"text-xs text-gray-500"},t.location)),n().createElement("p",{className:"text-xs text-gray-500 mb-1"},t.startDate," - ",t.endDate),n().createElement("ul",{className:"list-disc list-inside ml-4 text-sm text-".concat(o.textColor," space-y-0.5")},t.responsibilities.map((function(e,t){return n().createElement("li",{key:t},e)}))))},A=function(e){var t=e.edu,o=e.theme;return n().createElement("div",{className:"mb-3"},n().createElement("h3",{className:"text-md font-semibold text-".concat(o.textColor)},t.degree),n().createElement("div",{className:"flex justify-between items-center"},n().createElement("p",{className:"text-sm font-medium text-".concat(o.secondaryColor)},t.institution),n().createElement("p",{className:"text-xs text-gray-500"},t.location)),n().createElement("p",{className:"text-xs text-gray-500 mb-1"},t.graduationDate),t.details&&t.details.length>0&&n().createElement("ul",{className:"list-disc list-inside ml-4 text-sm text-".concat(o.textColor," space-y-0.5")},t.details.map((function(e,t){return n().createElement("li",{key:t},e)}))))},I=function(e){var t=e.skillItem,o=e.theme;return n().createElement("div",{className:"mb-2"},n().createElement("h4",{className:"text-sm font-semibold text-".concat(o.secondaryColor)},t.category,":"),n().createElement("p",{className:"text-sm text-".concat(o.textColor)},t.skills.join(", ")))};const N=function(e){var t=e.cvData,o=e.theme,i=o.previewScale||1;return o.backgroundColor.includes("-"),n().createElement("div",{className:"p-6 shadow-lg overflow-y-auto bg-".concat(o.backgroundColor," ").concat(o.fontFamily),style:{transform:"scale(".concat(i,")"),transformOrigin:"top left",transition:"transform 0.2s ease-out"},"aria-label":"CV Preview Area"},n().createElement("div",{id:"cv-content-formatted",className:"mx-auto ".concat(o.textColor," bg-").concat(o.backgroundColor," [&>:last-child]:mb-0"),style:{width:"210mm",minHeight:"297mm",padding:"1in"}},n().createElement(O,{info:t.personalInfo,theme:o}),t.summary&&n().createElement(S,{summary:t.summary,theme:o}),t.experience.length>0&&n().createElement("div",{className:"mb-4"},n().createElement(w,{title:"Experience",primaryColor:o.primaryColor}),t.experience.map((function(e){return n().createElement(x,{key:e.id,exp:e,theme:o})}))),t.education.length>0&&n().createElement("div",{className:"mb-4"},n().createElement(w,{title:"Education",primaryColor:o.primaryColor}),t.education.map((function(e){return n().createElement(A,{key:e.id,edu:e,theme:o})}))),t.skills.length>0&&n().createElement("div",{className:"mb-4"},n().createElement(w,{title:"Skills",primaryColor:o.primaryColor}),t.skills.map((function(e){return n().createElement(I,{key:e.id,skillItem:e,theme:o})})))))},k=function(e){var t=e.currentTheme,o=e.onThemeChange,i=e.onThemeOptionChange,r="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",s="block text-sm font-medium text-gray-700 mb-1";return n().createElement("div",{className:"p-4 space-y-6 bg-white rounded-lg shadow"},n().createElement("div",null,n().createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},"Predefined Themes"),n().createElement("div",{className:"grid grid-cols-2 gap-2"},d.map((function(e){return n().createElement("button",{key:e.name,onClick:function(){return o(e.options)},className:"p-2 rounded-md text-sm border-2 ".concat(t.primaryColor===e.options.primaryColor&&t.fontFamily===e.options.fontFamily?"border-".concat(e.options.primaryColor," ring-2 ring-").concat(e.options.primaryColor," bg-").concat(e.options.primaryColor," bg-opacity-10"):"border-gray-300 hover:border-gray-400")},n().createElement("span",{style:{color:e.options.primaryColor.includes("-")?void 0:e.options.primaryColor},className:"font-semibold text-".concat(e.options.primaryColor)},e.name))})))),n().createElement("div",null,n().createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-3"},"Customize Theme"),n().createElement("div",{className:"space-y-4"},n().createElement("div",null,n().createElement("label",{htmlFor:"primaryColor",className:s},"Primary Color (e.g., blue-600)"),n().createElement("div",{className:"flex gap-2"},n().createElement("select",{value:t.primaryColor.split("-")[0],onChange:function(e){return i("primaryColor","".concat(e.target.value,"-").concat(t.primaryColor.split("-")[1]||"600"))},className:r+" w-2/3"},["slate","gray","zinc","neutral","stone","red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose"].map((function(e){return n().createElement("option",{key:e,value:e},e)}))),n().createElement("select",{value:t.primaryColor.split("-")[1]||"600",onChange:function(e){return i("primaryColor","".concat(t.primaryColor.split("-")[0],"-").concat(e.target.value))},className:r+" w-1/3"},["100","200","300","400","500","600","700","800","900"].map((function(e){return n().createElement("option",{key:e,value:e},e)}))))),n().createElement("div",null,n().createElement("label",{htmlFor:"fontFamily",className:s},"Font Family"),n().createElement("select",{id:"fontFamily",value:t.fontFamily,onChange:function(e){return i("fontFamily",e.target.value)},className:r},[{name:"Sans Serif",value:"font-sans"},{name:"Serif",value:"font-serif"},{name:"Monospace",value:"font-mono"}].map((function(e){return n().createElement("option",{key:e.value,value:e.value},e.name)})))),n().createElement("div",null,n().createElement("label",{htmlFor:"previewScale",className:s},"Preview Zoom (",Math.round(100*(t.previewScale||1)),"%)"),n().createElement("input",{type:"range",id:"previewScale",min:"0.5",max:"1.5",step:"0.05",value:t.previewScale||1,onChange:function(e){return i("previewScale",parseFloat(e.target.value))},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})))))},P=function(e){var t=e.size,o=void 0===t?"w-8 h-8":t,i=e.message;return n().createElement("div",{className:"flex flex-col items-center justify-center"},n().createElement("div",{className:"animate-spin rounded-full ".concat(o," border-t-2 border-b-2 border-blue-500")}),i&&n().createElement("p",{className:"mt-2 text-sm text-gray-600"},i))},D=function(e){var t=e.message,o=e.onClear;return t?n().createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},n().createElement("strong",{className:"font-bold"},"Error: "),n().createElement("span",{className:"block sm:inline"},t),o&&n().createElement("button",{onClick:o,className:"absolute top-0 bottom-0 right-0 px-4 py-3","aria-label":"Clear error"},n().createElement("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n().createElement("title",null,"Close"),n().createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})))):null};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function M(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var q=function(e){var t=e.label,o=e.value,i=e.name,r=e.onChange,s=e.showValue,a=e.onToggleShow,l=e.type,c=void 0===l?"text":l,u=e.required,d=void 0!==u&&u,p=e.isToggleable,m=void 0===p||p;return n().createElement("div",{className:"mb-3"},n().createElement("div",{className:"flex justify-between items-center mb-1"},n().createElement("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700"},t),m&&a&&n().createElement("button",{onClick:function(){if(a&&m){var e="show".concat(i.charAt(0).toUpperCase()+i.slice(1));a(e,!s)}},className:"text-xs text-gray-500 hover:text-gray-700 flex items-center","aria-label":s?"Hide ".concat(t):"Show ".concat(t)},s?n().createElement(C,{className:"w-4 h-4 mr-1"}):n().createElement(_,{className:"w-4 h-4 mr-1"}),s?"Hide":"Show")),n().createElement("input",{type:c,id:i,name:i,value:o,onChange:r,required:d,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",disabled:m&&!s}))},J=function(e){var t=e.label,o=e.value,i=e.name,r=e.onChange,s=e.type,a=void 0===s?"text":s,l=e.required,c=void 0!==l&&l;return n().createElement("div",{className:"mb-3"},n().createElement("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1"},t),n().createElement("input",{type:a,id:i,name:i,value:o,onChange:r,required:c,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"}))},B=function(e){var t=e.label,o=e.value,i=e.name,r=e.onChange,s=e.rows,a=void 0===s?3:s,l=e.required,c=void 0!==l&&l,u=e.placeholder;return n().createElement("div",{className:"mb-3"},n().createElement("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1"},t),n().createElement("textarea",{id:i,name:i,value:o,onChange:r,rows:a,required:c,placeholder:u,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"}))};const H=function(e){var o=e.cvData,i=e.onCVDataChange,s=e.onAutofillRequest,a=e.onTailorCvRequest,l=e.geminiStatus,c=e.geminiError,u=e.clearGeminiError,d=e.jobDescriptionForTailoring,p=e.onJobDescriptionChange,g=e.activeGeminiAction,y=e.setActiveGeminiAction,v=e.applyDetailedExperienceUpdates,b=e.onApplyDetailedExperienceUpdatesChange,w=F((0,t.useState)({}),2),T=w[0],O=w[1],S=F((0,t.useState)(""),2),x=S[0],A=S[1],I=F((0,t.useState)(!1),2),N=I[0],k=I[1],R=function(e){var t=e.target,n=t.name,r=t.value,s="checkbox"===t.type?e.target.checked:r;i(U(U({},o),{},{personalInfo:U(U({},o.personalInfo),{},L({},n,s))}))},j=function(e,t){i(U(U({},o),{},{personalInfo:U(U({},o.personalInfo),{},L({},e,t))}))},G=function(e,t){O((function(n){return U(U({},n),{},L({},e,t))}))},V=function(e,t,n,i,r){var a,l=null!==(a=null!=r?r:T[e])&&void 0!==a?a:"";if(l||"new_experience_entry"===n||"initial_cv_from_title"===n||"skill_suggestions"===n)s(t,l,U(U({},i),{},{generationType:n}));else{var c="summary"===t.section?o.summary:"";s(t,c,U(U({},i),{},{generationType:n}))}y(e)},H=function(){if(!x.trim())return u(),void alert("Please enter a job title or keywords for the new experience.");var e="new_experience_entry_".concat(o.experience.length);y(e),s({section:"experience",action:"add_new_gemini"},x,{generationType:"new_experience_entry",existingCV:o}),A("")},Z=function(e,t,s){var a=o[t];return n().createElement("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},n().createElement("div",{className:"flex justify-between items-center mb-3"},n().createElement("h3",{className:"text-lg font-semibold text-gray-800"},e)),"experience"===t&&n().createElement("div",{className:"mb-4 p-3 border border-dashed border-blue-400 rounded-md bg-blue-50"},n().createElement("label",{htmlFor:"newExperiencePrompt",className:"block text-sm font-medium text-gray-700 mb-1"},"New Experience Entry with Gemini"),n().createElement("input",{id:"newExperiencePrompt",type:"text",placeholder:"Job title or keywords for new Gemini entry...",value:x,onChange:function(e){return A(e.target.value)},className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm mb-2"}),n().createElement("button",{onClick:H,disabled:l===r.LOADING&&g==="new_experience_entry_".concat(o.experience.length),className:"w-full bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-md text-sm flex items-center justify-center gap-1 disabled:opacity-60"},l===r.LOADING&&g==="new_experience_entry_".concat(o.experience.length)?n().createElement(P,{size:"w-4 h-4"}):n().createElement(h,{className:"w-4 h-4"}),"Generate New Experience")),n().createElement("button",{onClick:function(){return e=t,r=crypto.randomUUID(),n="experience"===e?{id:r,jobTitle:"",company:"",location:"",startDate:"",endDate:"",responsibilities:[""]}:"education"===e?{id:r,degree:"",institution:"",location:"",graduationDate:"",details:[""]}:{id:r,category:"",skills:[""]},void i(U(U({},o),{},L({},e,[].concat(M(o[e]),[n]))));var e,n,r},className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded-md text-xs flex items-center justify-center gap-1 mb-3"},n().createElement(m,{className:"w-4 h-4"})," Add Empty ","Work Experience"===e?"Experience":"Skills"===e?"Skill Category":e," Entry Manually"),a.map((function(a,c){return n().createElement("div",{key:a.id,className:"mb-4 p-3 border border-gray-200 rounded-md relative bg-gray-50"},n().createElement("button",{onClick:function(){return function(e,t){var n=o[e].filter((function(e,n){return n!==t}));i(U(U({},o),{},L({},e,n)))}(t,c)},className:"absolute top-2 right-2 text-red-500 hover:text-red-700 p-1 rounded-full bg-white bg-opacity-50 hover:bg-opacity-100 transition-colors","aria-label":"Delete this ".concat(e," entry")},n().createElement(f,{className:"w-4 h-4"})),s.map((function(e){var s="".concat(t,"-").concat(c,"-").concat(String(e.key));if(e.listKey){var u=a[e.listKey];return n().createElement("div",{key:String(e.key),className:"mb-3"},n().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e.label),u.map((function(r,s){return n().createElement("div",{key:s,className:"flex items-center gap-2 mb-1"},n().createElement("input",{type:"text",value:r,onChange:function(n){return r=t,a=c,l=e.listKey,u=s,d=n.target.value,p=o[r].map((function(e,t){if(t===a){var n=e[l].map((function(e,t){return t===u?d:e}));return U(U({},e),{},L({},l,n))}return e})),void i(U(U({},o),{},L({},r,p)));var r,a,l,u,d,p},className:"w-full p-1.5 border border-gray-300 rounded-md shadow-sm text-sm"}),n().createElement("button",{onClick:function(){return n=t,r=c,a=e.listKey,l=s,u=o[n].map((function(e,t){if(t===r){var n=e[a].filter((function(e,t){return t!==l}));return U(U({},e),{},L({},a,n))}return e})),void i(U(U({},o),{},L({},n,u)));var n,r,a,l,u},className:"text-red-500 hover:text-red-600","aria-label":"Remove ".concat(e.listLabel||"item")},n().createElement(f,{className:"w-4 h-4"})))})),n().createElement("button",{onClick:function(){return n=t,r=c,s=e.listKey,a=o[n].map((function(e,t){return t===r?U(U({},e),{},L({},s,[].concat(M(e[s]),[""]))):e})),void i(U(U({},o),{},L({},n,a)));var n,r,s,a},className:"text-blue-500 hover:text-blue-600 text-xs flex items-center gap-1 mt-1"},n().createElement(m,{className:"w-3 h-3"})," Add ",e.listLabel||"Item"),e.genType&&n().createElement("div",{className:"mt-2 p-2 border-t border-gray-200"},n().createElement("input",{type:"text",placeholder:"Keywords for Gemini to generate ".concat(e.label,"..."),value:T[s]||"",onChange:function(e){return G(s,e.target.value)},className:"w-full p-1.5 border border-gray-300 rounded-md shadow-sm text-xs mb-1"}),n().createElement("button",{onClick:function(){var n={};e.genContextKeys&&(n=e.genContextKeys.reduce((function(e,t){return U(U({},e),{},L({},t,a[t]))}),{})),"skills"===t&&"skills"===e.key&&a.category&&(n.skillCategory=a.category),V(s,{section:"".concat(t,".").concat(c,".").concat(String(e.listKey)),index:c,field:String(e.listKey),action:"update_list"},e.genType,n)},disabled:l===r.LOADING&&g===s,className:"bg-purple-500 hover:bg-purple-600 text-white px-2 py-1 rounded-md text-xs flex items-center gap-1 w-full justify-center"},l===r.LOADING&&g===s?n().createElement(P,{size:"w-3 h-3"}):n().createElement(h,{className:"w-3 h-3"}),"Generate ",e.label," with AI")))}return n().createElement(J,{key:String(e.key),label:e.label,name:String(e.key),value:a[e.key],onChange:function(n){return function(e,t,n,r){var s=o[e].map((function(e,o){return o===t?U(U({},e),{},L({},n,r)):e}));i(U(U({},o),{},L({},e,s)))}(t,c,e.key,n.target.value)},type:e.type||"text"})})))})))};return n().createElement("div",{className:"p-4 space-y-6 bg-slate-50 rounded-lg shadow-inner max-h-full overflow-y-auto"},c&&n().createElement(D,{message:c,onClear:u}),n().createElement("div",{className:"p-4 border border-blue-300 rounded-lg bg-blue-50 shadow-sm"},n().createElement("h3",{className:"text-lg font-semibold text-blue-800 mb-3"},"Tailor CV to Job Description"),n().createElement(B,{label:"Paste Job Description Here",name:"jobDescriptionForTailoring",value:d,onChange:function(e){return p(e.target.value)},rows:6,placeholder:"Paste the full job description to help Gemini tailor your CV..."}),n().createElement("div",{className:"mt-3 mb-3"},n().createElement("label",{htmlFor:"applyDetailedExperienceUpdatesToggle",className:"flex items-center text-sm text-gray-700 cursor-pointer"},n().createElement("input",{type:"checkbox",id:"applyDetailedExperienceUpdatesToggle",checked:v,onChange:function(e){return b(e.target.checked)},className:"mr-2 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),"Allow AI to update existing job titles and suggest new experience entries for alignment.")),n().createElement("button",{onClick:function(){if(!d.trim())return u(),void alert("Please paste a job description first.");y("tailor_cv"),a(d,o,v)},disabled:l===r.LOADING&&"tailor_cv"===g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-md text-sm flex items-center justify-center gap-1 mt-2 disabled:opacity-60"},l===r.LOADING&&"tailor_cv"===g?n().createElement(P,{size:"w-4 h-4"}):n().createElement(h,{className:"w-4 h-4"}),"Tailor CV with Gemini")),n().createElement("div",{className:"p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},n().createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-3"},"Personal Information"),n().createElement(J,{label:"Full Name",name:"name",value:o.personalInfo.name,onChange:R,required:!0}),n().createElement(J,{label:"Title (e.g., Software Engineer)",name:"title",value:o.personalInfo.title,onChange:R}),n().createElement(q,{label:"Phone",name:"phone",value:o.personalInfo.phone||"",onChange:R,type:"tel",showValue:o.personalInfo.showPhone,onToggleShow:j}),n().createElement(q,{label:"Email",name:"email",value:o.personalInfo.email||"",onChange:R,type:"email",showValue:o.personalInfo.showEmail,onToggleShow:j}),n().createElement(q,{label:"LinkedIn Profile URL",name:"linkedin",value:o.personalInfo.linkedin||"",onChange:R,showValue:o.personalInfo.showLinkedin,onToggleShow:j}),n().createElement(q,{label:"GitHub Profile URL",name:"github",value:o.personalInfo.github||"",onChange:R,showValue:o.personalInfo.showGithub,onToggleShow:j}),n().createElement(q,{label:"Portfolio URL",name:"portfolio",value:o.personalInfo.portfolio||"",onChange:R,showValue:o.personalInfo.showPortfolio,onToggleShow:j}),n().createElement(q,{label:"Address",name:"address",value:o.personalInfo.address||"",onChange:R,showValue:o.personalInfo.showAddress,onToggleShow:j}),n().createElement("div",{className:"mt-4 pt-4 border-t"},n().createElement("div",{className:"flex justify-between items-center mb-1"},n().createElement("label",{className:"block text-sm font-medium text-gray-700 flex items-center"},n().createElement(E,{className:"w-4 h-4 mr-2 text-gray-500"}),"Portrait Image"),n().createElement("button",{onClick:function(){return j("showPortrait",!o.personalInfo.showPortrait)},className:"text-xs text-gray-500 hover:text-gray-700 flex items-center"},o.personalInfo.showPortrait?n().createElement(C,{className:"w-4 h-4 mr-1"}):n().createElement(_,{className:"w-4 h-4 mr-1"}),o.personalInfo.showPortrait?"Hide":"Show"," Portrait")),o.personalInfo.showPortrait&&n().createElement(n().Fragment,null,n().createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){var r=new FileReader;r.onloadend=function(){i(U(U({},o),{},{personalInfo:U(U({},o.personalInfo),{},{portraitUrl:r.result})}))},r.readAsDataURL(n)}},className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mb-2","aria-label":"Upload portrait image"}),o.personalInfo.portraitUrl&&n().createElement("div",{className:"mt-2 text-center"},n().createElement("img",{src:o.personalInfo.portraitUrl,alt:"Portrait Preview",className:"w-24 h-24 object-cover rounded-md inline-block border shadow-sm"}),n().createElement("button",{onClick:function(){i(U(U({},o),{},{personalInfo:U(U({},o.personalInfo),{},{portraitUrl:"",showPortrait:!o.personalInfo.showPortrait&&o.personalInfo.showPortrait})}))},className:"mt-1 text-xs text-red-500 hover:text-red-700"},"Remove Portrait")))),n().createElement("div",{className:"mt-4 pt-4 border-t flex items-center"},n().createElement("button",{onClick:function(){k(!0),setTimeout((function(){k(!1)}),2500)},className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md text-sm transition-colors"},"Save Personal Info"),N&&n().createElement("span",{className:"ml-3 text-sm text-green-700 italic"},"Personal info saved!"))),n().createElement("div",{className:"p-4 border border-gray-200 rounded-lg bg-white shadow-sm"},n().createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-3"},"Professional Summary"),n().createElement(B,{label:"Summary",name:"summary",value:o.summary,onChange:function(e){i(U(U({},o),{},{summary:e.target.value}))},rows:4}),n().createElement("div",{className:"mt-2"},n().createElement("input",{type:"text",placeholder:"Keywords for Gemini (e.g., 'dynamic leader, 10 yrs exp')",value:T.summary||"",onChange:function(e){return G("summary",e.target.value)},className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm mb-1"}),n().createElement("button",{onClick:function(){return V("summary",{section:"summary"},"summary",{existingCV:o})},disabled:l===r.LOADING&&"summary"===g,className:"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1.5 rounded-md text-sm flex items-center gap-1"},l===r.LOADING&&"summary"===g?n().createElement(P,{size:"w-4 h-4"}):n().createElement(h,{className:"w-4 h-4"}),"Generate with Gemini"))),Z("Work Experience","experience",[{key:"jobTitle",label:"Job Title"},{key:"company",label:"Company"},{key:"location",label:"Location"},{key:"startDate",label:"Start Date (e.g., Jan 2020)"},{key:"endDate",label:"End Date (e.g., Present or Dec 2022)"},{key:"responsibilities",label:"Responsibilities",listKey:"responsibilities",listLabel:"Responsibility",genType:"experience_responsibilities",genContextKeys:["jobTitle","company"]}]),Z("Education","education",[{key:"degree",label:"Degree (e.g., B.S. in Computer Science)"},{key:"institution",label:"Institution Name"},{key:"location",label:"Location"},{key:"graduationDate",label:"Graduation Date (e.g., May 2020)"},{key:"details",label:"Details (e.g., GPA, Honors, Relevant Coursework)",listKey:"details",listLabel:"Detail",genType:"education_details",genContextKeys:["degree","institution"]}]),Z("Skills","skills",[{key:"category",label:"Skill Category (e.g., Programming Languages)"},{key:"skills",label:"Skills",listKey:"skills",listLabel:"Skill",genType:"skill_suggestions",genContextKeys:["category"]}]))};var Z,K;!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),o={};for(const e of n)o[e]=t[e];return e.objectValues(o)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Z||(Z={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(K||(K={}));const Y=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$=e=>{switch(typeof e){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return Number.isNaN(e)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(e)?Y.array:null===e?Y.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Y.promise:"undefined"!=typeof Map&&e instanceof Map?Y.map:"undefined"!=typeof Set&&e instanceof Set?Y.set:"undefined"!=typeof Date&&e instanceof Date?Y.date:Y.object;default:return Y.unknown}},W=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class z extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},o=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(o);else if("invalid_return_type"===i.code)o(i.returnTypeError);else if("invalid_arguments"===i.code)o(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,o=0;for(;o<i.path.length;){const n=i.path[o];o===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],o++}}};return o(this),n}static assert(e){if(!(e instanceof z))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}z.create=e=>new z(e);const X=(e,t)=>{let n;switch(e.code){case W.invalid_type:n=e.received===Y.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case W.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Z.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:n=`Unrecognized key(s) in object: ${Z.joinValues(e.keys,", ")}`;break;case W.invalid_union:n="Invalid input";break;case W.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Z.joinValues(e.options)}`;break;case W.invalid_enum_value:n=`Invalid enum value. Expected ${Z.joinValues(e.options)}, received '${e.received}'`;break;case W.invalid_arguments:n="Invalid function arguments";break;case W.invalid_return_type:n="Invalid function return type";break;case W.invalid_date:n="Invalid date";break;case W.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Z.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case W.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case W.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case W.custom:n="Invalid input";break;case W.invalid_intersection_types:n="Intersection results could not be merged";break;case W.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case W.not_finite:n="Number must be finite";break;default:n=t.defaultError,Z.assertNever(e)}return{message:n}};let Q=X;function ee(e,t){const n=Q,o=(e=>{const{data:t,path:n,errorMaps:o,issueData:i}=e,r=[...n,...i.path||[]],s={...i,path:r};if(void 0!==i.message)return{...i,path:r,message:i.message};let a="";const l=o.filter((e=>!!e)).slice().reverse();for(const e of l)a=e(s,{data:t,defaultError:a}).message;return{...i,path:r,message:a}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===X?void 0:X].filter((e=>!!e))});e.common.issues.push(o)}class te{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if("aborted"===o.status)return ne;"dirty"===o.status&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,o=await e.value;n.push({key:t,value:o})}return te.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:t,value:i}=o;if("aborted"===t.status)return ne;if("aborted"===i.status)return ne;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!o.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const ne=Object.freeze({status:"aborted"}),oe=e=>({status:"dirty",value:e}),ie=e=>({status:"valid",value:e}),re=e=>"aborted"===e.status,se=e=>"dirty"===e.status,ae=e=>"valid"===e.status,le=e=>"undefined"!=typeof Promise&&e instanceof Promise;var ce;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(ce||(ce={}));class ue{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const de=(e,t)=>{if(ae(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new z(e.common.issues);return this._error=t,this._error}}};function pe(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:o,description:i}=e;if(t&&(n||o))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{const{message:r}=e;return"invalid_enum_value"===t.code?{message:r??i.defaultError}:void 0===i.data?{message:r??o??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:r??n??i.defaultError}},description:i}}class me{get description(){return this._def.description}_getType(e){return $(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new te,ctx:{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(le(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},o=this._parseSync({data:e,path:n.path,parent:n});return de(n,o)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return ae(n)?{value:n.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then((e=>ae(e)?{value:e.value}:{issues:t.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},o=this._parse({data:e,path:n.path,parent:n}),i=await(le(o)?o:Promise.resolve(o));return de(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,o)=>{const i=e(t),r=()=>o.addIssue({code:W.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(r(),!1))):!!i||(r(),!1)}))}refinement(e,t){return this._refinement(((n,o)=>!!e(n)||(o.addIssue("function"==typeof t?t(n,o):t),!1)))}_refinement(e){return new ut({schema:this,typeName:bt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return dt.create(this,this._def)}nullable(){return pt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ye.create(this)}promise(){return ct.create(this,this._def)}or(e){return ze.create([this,e],this._def)}and(e){return Qe.create(this,e,this._def)}transform(e){return new ut({...pe(this._def),schema:this,typeName:bt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new mt({...pe(this._def),innerType:this,defaultValue:t,typeName:bt.ZodDefault})}brand(){return new gt({typeName:bt.ZodBranded,type:this,...pe(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ft({...pe(this._def),innerType:this,catchValue:t,typeName:bt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return yt.create(this,e)}readonly(){return vt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fe=/^c[^\s-]{8,}$/i,he=/^[0-9a-z]+$/,ge=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ye=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ve=/^[a-z0-9_-]{21}$/i,be=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ce=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ee;const we=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Te=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Oe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Se=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ae=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ie="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ne=new RegExp(`^${Ie}$`);function ke(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Pe(e){let t=`${Ie}T${ke(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function De(e,t){if(!be.test(e))return!1;try{const[n]=e.split("."),o=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(o));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==i?.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function Re(e,t){return!("v4"!==t&&t||!Te.test(e))||!("v6"!==t&&t||!Se.test(e))}class Me extends me{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Y.string){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.string,received:t.parsedType}),ne}const t=new te;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),ee(n,{code:W.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),ee(n,{code:W.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const o=e.data.length>r.value,i=e.data.length<r.value;(o||i)&&(n=this._getOrReturnCtx(e,n),o?ee(n,{code:W.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):i&&ee(n,{code:W.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)Ce.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"email",code:W.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Ee||(Ee=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ee.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"emoji",code:W.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)ye.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"uuid",code:W.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)ve.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"nanoid",code:W.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)fe.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"cuid",code:W.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)he.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"cuid2",code:W.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)ge.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"ulid",code:W.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),ee(n,{validation:"url",code:W.invalid_string,message:r.message}),t.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"regex",code:W.invalid_string,message:r.message}),t.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):"datetime"===r.kind?Pe(r).test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:"datetime",message:r.message}),t.dirty()):"date"===r.kind?Ne.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:"date",message:r.message}),t.dirty()):"time"===r.kind?new RegExp(`^${ke(r)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:W.invalid_string,validation:"time",message:r.message}),t.dirty()):"duration"===r.kind?_e.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"duration",code:W.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?(o=e.data,("v4"!==(i=r.version)&&i||!we.test(o))&&("v6"!==i&&i||!Oe.test(o))&&(n=this._getOrReturnCtx(e,n),ee(n,{validation:"ip",code:W.invalid_string,message:r.message}),t.dirty())):"jwt"===r.kind?De(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"jwt",code:W.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?Re(e.data,r.version)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"cidr",code:W.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?xe.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"base64",code:W.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?Ae.test(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{validation:"base64url",code:W.invalid_string,message:r.message}),t.dirty()):Z.assertNever(r);var o,i;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:W.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new Me({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ce.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new Me({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Me({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Me({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function je(e,t){const n=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,i=n>o?n:o;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}Me.create=e=>new Me({checks:[],typeName:bt.ZodString,coerce:e?.coerce??!1,...pe(e)});class Ue extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Y.number){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.number,received:t.parsedType}),ne}let t;const n=new te;for(const o of this._def.checks)"int"===o.kind?Z.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ee(t,{code:W.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):"multipleOf"===o.kind?0!==je(e.data,o.value)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):"finite"===o.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ee(t,{code:W.not_finite,message:o.message}),n.dirty()):Z.assertNever(o);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,o){return new Ue({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(o)}]})}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Z.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ue.create=e=>new Ue({checks:[],typeName:bt.ZodNumber,coerce:e?.coerce||!1,...pe(e)});class Le extends me{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Y.bigint)return this._getInvalidInput(e);let t;const n=new te;for(const o of this._def.checks)"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):"multipleOf"===o.kind?e.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ee(t,{code:W.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):Z.assertNever(o);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.bigint,received:t.parsedType}),ne}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,n,o){return new Le({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ce.toString(o)}]})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Le.create=e=>new Le({checks:[],typeName:bt.ZodBigInt,coerce:e?.coerce??!1,...pe(e)});class Fe extends me{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==Y.boolean){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.boolean,received:t.parsedType}),ne}return ie(e.data)}}Fe.create=e=>new Fe({typeName:bt.ZodBoolean,coerce:e?.coerce||!1,...pe(e)});class Ge extends me{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Y.date){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.date,received:t.parsedType}),ne}if(Number.isNaN(e.data.getTime()))return ee(this._getOrReturnCtx(e),{code:W.invalid_date}),ne;const t=new te;let n;for(const o of this._def.checks)"min"===o.kind?e.data.getTime()<o.value&&(n=this._getOrReturnCtx(e,n),ee(n,{code:W.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),t.dirty()):"max"===o.kind?e.data.getTime()>o.value&&(n=this._getOrReturnCtx(e,n),ee(n,{code:W.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),t.dirty()):Z.assertNever(o);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ge({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ge.create=e=>new Ge({checks:[],coerce:e?.coerce||!1,typeName:bt.ZodDate,...pe(e)});class Ve extends me{_parse(e){if(this._getType(e)!==Y.symbol){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.symbol,received:t.parsedType}),ne}return ie(e.data)}}Ve.create=e=>new Ve({typeName:bt.ZodSymbol,...pe(e)});class qe extends me{_parse(e){if(this._getType(e)!==Y.undefined){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.undefined,received:t.parsedType}),ne}return ie(e.data)}}qe.create=e=>new qe({typeName:bt.ZodUndefined,...pe(e)});class Je extends me{_parse(e){if(this._getType(e)!==Y.null){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.null,received:t.parsedType}),ne}return ie(e.data)}}Je.create=e=>new Je({typeName:bt.ZodNull,...pe(e)});class Be extends me{constructor(){super(...arguments),this._any=!0}_parse(e){return ie(e.data)}}Be.create=e=>new Be({typeName:bt.ZodAny,...pe(e)});class He extends me{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ie(e.data)}}He.create=e=>new He({typeName:bt.ZodUnknown,...pe(e)});class Ze extends me{_parse(e){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.never,received:t.parsedType}),ne}}Ze.create=e=>new Ze({typeName:bt.ZodNever,...pe(e)});class Ke extends me{_parse(e){if(this._getType(e)!==Y.undefined){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.void,received:t.parsedType}),ne}return ie(e.data)}}Ke.create=e=>new Ke({typeName:bt.ZodVoid,...pe(e)});class Ye extends me{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==Y.array)return ee(t,{code:W.invalid_type,expected:Y.array,received:t.parsedType}),ne;if(null!==o.exactLength){const e=t.data.length>o.exactLength.value,i=t.data.length<o.exactLength.value;(e||i)&&(ee(t,{code:e?W.too_big:W.too_small,minimum:i?o.exactLength.value:void 0,maximum:e?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(null!==o.minLength&&t.data.length<o.minLength.value&&(ee(t,{code:W.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),null!==o.maxLength&&t.data.length>o.maxLength.value&&(ee(t,{code:W.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>o.type._parseAsync(new ue(t,e,t.path,n))))).then((e=>te.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>o.type._parseSync(new ue(t,e,t.path,n))));return te.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ye({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new Ye({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new Ye({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}function $e(e){if(e instanceof We){const t={};for(const n in e.shape){const o=e.shape[n];t[n]=dt.create($e(o))}return new We({...e._def,shape:()=>t})}return e instanceof Ye?new Ye({...e._def,type:$e(e.element)}):e instanceof dt?dt.create($e(e.unwrap())):e instanceof pt?pt.create($e(e.unwrap())):e instanceof et?et.create(e.items.map((e=>$e(e)))):e}Ye.create=(e,t)=>new Ye({type:e,minLength:null,maxLength:null,exactLength:null,typeName:bt.ZodArray,...pe(t)});class We extends me{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Z.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Y.object){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.object,received:t.parsedType}),ne}const{status:t,ctx:n}=this._processInputParams(e),{shape:o,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof Ze&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||r.push(e);const s=[];for(const e of i){const t=o[e],i=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new ue(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Ze){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&(ee(n,{code:W.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const o=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new ue(n,o,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,o=await t.value;e.push({key:n,value:o,alwaysSet:t.alwaysSet})}return e})).then((e=>te.mergeObjectSync(t,e))):te.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new We({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{const o=this._def.errorMap?.(t,n).message??n.defaultError;return"unrecognized_keys"===t.code?{message:ce.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:bt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const t={};for(const n of Z.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new We({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Z.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new We({...this._def,shape:()=>t})}deepPartial(){return $e(this)}partial(e){const t={};for(const n of Z.objectKeys(this.shape)){const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()}return new We({...this._def,shape:()=>t})}required(e){const t={};for(const n of Z.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof dt;)e=e._def.innerType;t[n]=e}return new We({...this._def,shape:()=>t})}keyof(){return st(Z.objectKeys(this.shape))}}We.create=(e,t)=>new We({shape:()=>e,unknownKeys:"strip",catchall:Ze.create(),typeName:bt.ZodObject,...pe(t)}),We.strictCreate=(e,t)=>new We({shape:()=>e,unknownKeys:"strict",catchall:Ze.create(),typeName:bt.ZodObject,...pe(t)}),We.lazycreate=(e,t)=>new We({shape:e,unknownKeys:"strip",catchall:Ze.create(),typeName:bt.ZodObject,...pe(t)});class ze extends me{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new z(e.ctx.common.issues)));return ee(t,{code:W.invalid_union,unionErrors:n}),ne}));{let e;const o=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&o.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=o.map((e=>new z(e)));return ee(t,{code:W.invalid_union,unionErrors:i}),ne}}get options(){return this._def.options}}function Xe(e,t){const n=$(e),o=$(t);if(e===t)return{valid:!0,data:e};if(n===Y.object&&o===Y.object){const n=Z.objectKeys(t),o=Z.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of o){const o=Xe(e[n],t[n]);if(!o.valid)return{valid:!1};i[n]=o.data}return{valid:!0,data:i}}if(n===Y.array&&o===Y.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let o=0;o<e.length;o++){const i=Xe(e[o],t[o]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===Y.date&&o===Y.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}ze.create=(e,t)=>new ze({options:e,typeName:bt.ZodUnion,...pe(t)});class Qe extends me{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(e,o)=>{if(re(e)||re(o))return ne;const i=Xe(e.value,o.value);return i.valid?((se(e)||se(o))&&t.dirty(),{status:t.value,value:i.data}):(ee(n,{code:W.invalid_intersection_types}),ne)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>o(e,t))):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Qe.create=(e,t,n)=>new Qe({left:e,right:t,typeName:bt.ZodIntersection,...pe(n)});class et extends me{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.array)return ee(n,{code:W.invalid_type,expected:Y.array,received:n.parsedType}),ne;if(n.data.length<this._def.items.length)return ee(n,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...n.data].map(((e,t)=>{const o=this._def.items[t]||this._def.rest;return o?o._parse(new ue(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(o).then((e=>te.mergeArray(t,e))):te.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new et({...this._def,rest:e})}}et.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new et({items:e,typeName:bt.ZodTuple,rest:null,...pe(t)})};class tt extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.object)return ee(n,{code:W.invalid_type,expected:Y.object,received:n.parsedType}),ne;const o=[],i=this._def.keyType,r=this._def.valueType;for(const e in n.data)o.push({key:i._parse(new ue(n,e,n.path,e)),value:r._parse(new ue(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?te.mergeObjectAsync(t,o):te.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return new tt(t instanceof me?{keyType:e,valueType:t,typeName:bt.ZodRecord,...pe(n)}:{keyType:Me.create(),valueType:e,typeName:bt.ZodRecord,...pe(t)})}}class nt extends me{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.map)return ee(n,{code:W.invalid_type,expected:Y.map,received:n.parsedType}),ne;const o=this._def.keyType,i=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:o._parse(new ue(n,e,n.path,[r,"key"])),value:i._parse(new ue(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const o=await n.key,i=await n.value;if("aborted"===o.status||"aborted"===i.status)return ne;"dirty"!==o.status&&"dirty"!==i.status||t.dirty(),e.set(o.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const o=n.key,i=n.value;if("aborted"===o.status||"aborted"===i.status)return ne;"dirty"!==o.status&&"dirty"!==i.status||t.dirty(),e.set(o.value,i.value)}return{status:t.value,value:e}}}}nt.create=(e,t,n)=>new nt({valueType:t,keyType:e,typeName:bt.ZodMap,...pe(n)});class ot extends me{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Y.set)return ee(n,{code:W.invalid_type,expected:Y.set,received:n.parsedType}),ne;const o=this._def;null!==o.minSize&&n.data.size<o.minSize.value&&(ee(n,{code:W.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),null!==o.maxSize&&n.data.size>o.maxSize.value&&(ee(n,{code:W.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const i=this._def.valueType;function r(e){const n=new Set;for(const o of e){if("aborted"===o.status)return ne;"dirty"===o.status&&t.dirty(),n.add(o.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>i._parse(new ue(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>r(e))):r(s)}min(e,t){return new ot({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new ot({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ot.create=(e,t)=>new ot({valueType:e,minSize:null,maxSize:null,typeName:bt.ZodSet,...pe(t)});class it extends me{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}it.create=(e,t)=>new it({getter:e,typeName:bt.ZodLazy,...pe(t)});class rt extends me{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ee(t,{received:t.data,code:W.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}function st(e,t){return new at({values:e,typeName:bt.ZodEnum,...pe(t)})}rt.create=(e,t)=>new rt({value:e,typeName:bt.ZodLiteral,...pe(t)});class at extends me{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ee(t,{expected:Z.joinValues(n),received:t.parsedType,code:W.invalid_type}),ne}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ee(t,{received:t.data,code:W.invalid_enum_value,options:n}),ne}return ie(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return at.create(e,{...this._def,...t})}exclude(e,t=this._def){return at.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}at.create=st;class lt extends me{_parse(e){const t=Z.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Y.string&&n.parsedType!==Y.number){const e=Z.objectValues(t);return ee(n,{expected:Z.joinValues(e),received:n.parsedType,code:W.invalid_type}),ne}if(this._cache||(this._cache=new Set(Z.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=Z.objectValues(t);return ee(n,{received:n.data,code:W.invalid_enum_value,options:e}),ne}return ie(e.data)}get enum(){return this._def.values}}lt.create=(e,t)=>new lt({values:e,typeName:bt.ZodNativeEnum,...pe(t)});class ct extends me{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.promise&&!1===t.common.async)return ee(t,{code:W.invalid_type,expected:Y.promise,received:t.parsedType}),ne;const n=t.parsedType===Y.promise?t.data:Promise.resolve(t.data);return ie(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ct.create=(e,t)=>new ct({type:e,typeName:bt.ZodPromise,...pe(t)});class ut extends me{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,i={addIssue:e=>{ee(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===o.type){const e=o.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ne;const o=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===o.status?ne:"dirty"===o.status||"dirty"===t.value?oe(o.value):o}));{if("aborted"===t.value)return ne;const o=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===o.status?ne:"dirty"===o.status||"dirty"===t.value?oe(o.value):o}}if("refinement"===o.type){const e=e=>{const t=o.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===o.status?ne:("dirty"===o.status&&t.dirty(),e(o.value),{status:t.value,value:o.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ne:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===o.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ae(e))return ne;const r=o.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>ae(e)?Promise.resolve(o.transform(e.value,i)).then((e=>({status:t.value,value:e}))):ne))}Z.assertNever(o)}}ut.create=(e,t,n)=>new ut({schema:e,typeName:bt.ZodEffects,effect:t,...pe(n)}),ut.createWithPreprocess=(e,t,n)=>new ut({schema:t,effect:{type:"preprocess",transform:e},typeName:bt.ZodEffects,...pe(n)});class dt extends me{_parse(e){return this._getType(e)===Y.undefined?ie(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dt.create=(e,t)=>new dt({innerType:e,typeName:bt.ZodOptional,...pe(t)});class pt extends me{_parse(e){return this._getType(e)===Y.null?ie(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pt.create=(e,t)=>new pt({innerType:e,typeName:bt.ZodNullable,...pe(t)});class mt extends me{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Y.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}mt.create=(e,t)=>new mt({innerType:e,typeName:bt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...pe(t)});class ft extends me{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return le(o)?o.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new z(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===o.status?o.value:this._def.catchValue({get error(){return new z(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ft.create=(e,t)=>new ft({innerType:e,typeName:bt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...pe(t)});class ht extends me{_parse(e){if(this._getType(e)!==Y.nan){const t=this._getOrReturnCtx(e);return ee(t,{code:W.invalid_type,expected:Y.nan,received:t.parsedType}),ne}return{status:"valid",value:e.data}}}ht.create=e=>new ht({typeName:bt.ZodNaN,...pe(e)}),Symbol("zod_brand");class gt extends me{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class yt extends me{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ne:"dirty"===e.status?(t.dirty(),oe(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ne:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new yt({in:e,out:t,typeName:bt.ZodPipeline})}}class vt extends me{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ae(e)&&(e.value=Object.freeze(e.value)),e);return le(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}var bt;vt.create=(e,t)=>new vt({innerType:e,typeName:bt.ZodReadonly,...pe(t)}),We.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(bt||(bt={}));const _t=Me.create,Ct=Ue.create,Et=(ht.create,Le.create,Fe.create),wt=(Ge.create,Ve.create,qe.create,Je.create,Be.create,He.create),Tt=(Ze.create,Ke.create,Ye.create),Ot=We.create,St=(We.strictCreate,ze.create),xt=(Qe.create,et.create,tt.create),At=(nt.create,ot.create,it.create),It=(rt.create,at.create),Nt=(lt.create,ct.create,ut.create,dt.create,pt.create,ut.createWithPreprocess,yt.create,e=>Me.create({...e,coerce:!0}));class kt{}function Pt(e,t){return e.replace(/\{([^}]+)\}/g,((e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)}))}function Dt(e,t,n){for(let o=0;o<t.length-1;o++){const i=t[o];if(i.endsWith("[]")){const r=i.slice(0,-2);if(!(r in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${i}`);e[r]=Array.from({length:n.length},(()=>({})))}if(Array.isArray(e[r])){const i=e[r];if(Array.isArray(n))for(let e=0;e<i.length;e++)Dt(i[e],t.slice(o+1),n[e]);else for(const e of i)Dt(e,t.slice(o+1),n)}return}if(i.endsWith("[0]")){const r=i.slice(0,-3);return r in e||(e[r]=[{}]),void Dt(e[r][0],t.slice(o+1),n)}e[i]&&"object"==typeof e[i]||(e[i]={}),e=e[i]}const o=t[t.length-1],i=e[o];if(void 0!==i){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===i)return;if("object"!=typeof i||"object"!=typeof n||null===i||null===n)throw new Error(`Cannot set value for an existing key. Key: ${o}`);Object.assign(i,n)}else e[o]=n}function Rt(e,t){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!=typeof e||null===e)return;const o=t[n];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const o=e[i];if(!Array.isArray(o))return;return o.map((e=>Rt(e,t.slice(n+1))))}return}e=e[o]}return e}catch(e){if(e instanceof TypeError)return;throw e}}var Mt,jt,Ut,Lt,Ft,Gt,Vt,qt,Jt,Bt,Ht,Zt,Kt,Yt,$t,Wt,zt,Xt,Qt,en,tn,nn,on,rn,sn,an,ln,cn,un,dn,pn,mn,fn,hn,gn,yn,vn,bn,_n;!function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"}(Mt||(Mt={})),function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"}(jt||(jt={})),function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"}(Ut||(Ut={})),function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(Lt||(Lt={})),function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"}(Ft||(Ft={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"}(Gt||(Gt={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(Vt||(Vt={})),function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"}(qt||(qt={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"}(Jt||(Jt={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(Bt||(Bt={})),function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"}(Ht||(Ht={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT"}(Zt||(Zt={})),function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"}(Kt||(Kt={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"}(Yt||(Yt={})),function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"}($t||($t={})),function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"}(Wt||(Wt={})),function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"}(zt||(zt={})),function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"}(Xt||(Xt={})),function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"}(Qt||(Qt={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(en||(en={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(tn||(tn={})),function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"}(nn||(nn={})),function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(on||(on={})),function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"}(rn||(rn={})),function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi"}(sn||(sn={})),function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"}(an||(an={})),function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"}(ln||(ln={})),function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"}(cn||(cn={})),function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"}(un||(un={})),function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"}(dn||(dn={})),function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"}(pn||(pn={})),function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"}(mn||(mn={})),function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"}(fn||(fn={})),function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"}(hn||(hn={})),function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"}(gn||(gn={})),function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"}(yn||(yn={})),function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"}(vn||(vn={})),function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"}(bn||(bn={})),function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"}(_n||(_n={}));class Cn{get text(){var e,t,n,o,i,r,s,a;if(0===(null===(o=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let l="",c=!1;const u=[];for(const e of null!==(a=null===(s=null===(r=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[t,n]of Object.entries(e))"text"===t||"thought"===t||null===n&&void 0===n||u.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;c=!0,l+=e.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?l:void 0}get data(){var e,t,n,o,i,r,s,a;if(0===(null===(o=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let l="";const c=[];for(const e of null!==(a=null===(s=null===(r=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content)||void 0===s?void 0:s.parts)&&void 0!==a?a:[]){for(const[t,n]of Object.entries(e))"inlineData"===t||null===n&&void 0===n||c.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(l+=atob(e.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}get functionCalls(){var e,t,n,o,i,r,s,a;if(0===(null===(o=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const l=null===(a=null===(s=null===(r=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.functionCall)).map((e=>e.functionCall)).filter((e=>void 0!==e));return 0!==(null==l?void 0:l.length)?l:void 0}get executableCode(){var e,t,n,o,i,r,s,a,l;if(0===(null===(o=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=null===(a=null===(s=null===(r=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.executableCode)).map((e=>e.executableCode)).filter((e=>void 0!==e));return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.code:void 0}get codeExecutionResult(){var e,t,n,o,i,r,s,a,l;if(0===(null===(o=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===o?void 0:o.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=null===(a=null===(s=null===(r=null===(i=this.candidates)||void 0===i?void 0:i[0])||void 0===r?void 0:r.content)||void 0===s?void 0:s.parts)||void 0===a?void 0:a.filter((e=>e.codeExecutionResult)).map((e=>e.codeExecutionResult)).filter((e=>void 0!==e));return 0!==(null==c?void 0:c.length)?null===(l=null==c?void 0:c[0])||void 0===l?void 0:l.output:void 0}}class En{}class wn{}class Tn{}class On{}class Sn{}class xn{}class An{}class In{}class Nn{}class kn{}class Pn{}class Dn{}class Rn{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Mn{}class jn{}class Un{get text(){var e,t,n;let o="",i=!1;const r=[];for(const s of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(s))"text"!==e&&"thought"!==e&&null!==t&&r.push(e);if("string"==typeof s.text){if("boolean"==typeof s.thought&&s.thought)continue;i=!0,o+=s.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,t,n;let o="";const i=[];for(const r of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(r))"inlineData"!==e&&null!==t&&i.push(e);r.inlineData&&"string"==typeof r.inlineData.data&&(o+=atob(r.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Ln{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function Fn(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Gn(e,t){const n=Fn(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Vn(e,t){return Array.isArray(t)?t.map((e=>qn(0,e))):[qn(0,t)]}function qn(e,t){if("object"==typeof t&&null!==t)return t;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof t)}function Jn(e,t){if(null==t)throw new Error("PartUnion is required");if("object"==typeof t)return t;if("string"==typeof t)return{text:t};throw new Error("Unsupported part type: "+typeof t)}function Bn(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map((e=>Jn(0,e))):[Jn(0,t)]}function Hn(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function Zn(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function Kn(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function Yn(e,t){if(null==t)throw new Error("ContentUnion is required");return Hn(t)?t:{role:"user",parts:Bn(0,t)}}function $n(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap((e=>{const t=Yn(0,e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]}));if(e.isVertexAI()){const e=Yn(0,t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map((e=>Yn(0,e))):[Yn(0,t)]}function Wn(e,t){if(null==t||Array.isArray(t)&&0===t.length)throw new Error("contents are required");if(!Array.isArray(t)){if(Zn(t)||Kn(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yn(0,t)]}const n=[],o=[],i=Hn(t[0]);for(const e of t){const t=Hn(e);if(t!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(t)n.push(e);else{if(Zn(e)||Kn(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(e)}}return i||n.push({role:"user",parts:Bn(0,o)}),n}const zn=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Xn=It(["string","number","integer","object","array","boolean","null"]),Qn=St([Xn,Tt(Xn)]);function eo(e){const t={},n=["items"],o=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=e.anyOf;null!=r&&2==r.length&&("null"===r[0].type?(t.nullable=!0,e=r[1]):"null"===r[1].type&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter((e=>"null"!==e));if(1===n.length)t.type=Object.values(Ut).includes(n[0].toUpperCase())?n[0].toUpperCase():Ut.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(Ut).includes(e.toUpperCase())?e.toUpperCase():Ut.TYPE_UNSPECIFIED})}}(e.type,t);for(const[r,s]of Object.entries(e))if(null!=s)if("type"==r){if("null"===s)throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;t.type=Object.values(Ut).includes(s.toUpperCase())?s.toUpperCase():Ut.TYPE_UNSPECIFIED}else if(n.includes(r))t[r]=eo(s);else if(o.includes(r)){const e=[];for(const n of s)"null"!=n.type?e.push(eo(n)):t.nullable=!0;t[r]=e}else if(i.includes(r)){const e={};for(const[t,n]of Object.entries(s))e[t]=eo(n);t[r]=e}else{if("additionalProperties"===r)continue;t[r]=s}return t}function to(e,t){return Object.keys(t).includes("$schema")?(delete t.$schema,eo(function(e=!0){const t=At((()=>{const n=Ot({type:Qn.optional(),format:_t().optional(),title:_t().optional(),description:_t().optional(),default:wt().optional(),items:t.optional(),minItems:Nt().optional(),maxItems:Nt().optional(),enum:Tt(wt()).optional(),properties:xt(_t(),t).optional(),required:Tt(_t()).optional(),minProperties:Nt().optional(),maxProperties:Nt().optional(),propertyOrdering:Tt(_t()).optional(),minimum:Ct().optional(),maximum:Ct().optional(),minLength:Nt().optional(),maxLength:Nt().optional(),pattern:_t().optional(),anyOf:Tt(t).optional(),additionalProperties:Et().optional()});return e?n.strict():n}));return t}().parse(t))):eo(t)}function no(e,t){if("object"==typeof t)return t;if("string"==typeof t)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error("Unsupported speechConfig type: "+typeof t)}function oo(e,t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function io(e,t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=to(0,e.parameters)),e.response&&(e.response=to(0,e.response));return t}function ro(e,t){if(null==t)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const n=[];for(const e of t)n.push(e);return n}function so(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,o=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===o;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}(e,t,"cachedContents")}function ao(e,t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function lo(e,t){if("string"!=typeof t)throw new Error("fromImageBytes must be a string");return t}function co(e,t){var n;let o;var i;if(null!=(i=t)&&"object"==typeof i&&"name"in i&&(o=t.name),!(function(e){return null!=e&&"object"==typeof e&&"uri"in e}(t)&&(o=t.uri,void 0===o)||function(e){return null!=e&&"object"==typeof e&&"video"in e}(t)&&(o=null===(n=t.video)||void 0===n?void 0:n.uri,void 0===o))){if("string"==typeof t&&(o=t),void 0===o)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const e=o.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${o}`);o=e[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function uo(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function po(e,t){for(const e of["models","tunedModels","publisherModels"])if(null!==(n=t)&&"object"==typeof n&&e in n)return t[e];var n;return[]}function mo(e,t={}){const n=e,o={name:n.name,description:n.description,parameters:eo(go(n.inputSchema))};return t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function fo(e){const t=[];for(const n of e)t.push(go(n));return t}function ho(e){const t={};for(const[n,o]of Object.entries(e)){const e=o;t[n]=go(e)}return t}function go(e){const t=new Set(["items"]),n=new Set(["anyOf"]),o=new Set(["properties"]),i={};for(const[r,s]of Object.entries(e))if(t.has(r))i[r]=go(s);else if(n.has(r))i[r]=fo(s);else if(o.has(r))i[r]=ho(s);else if("type"===r){const e=s.toUpperCase();i[r]=Object.values(Ut).includes(e)?e:Ut.TYPE_UNSPECIFIED}else zn.has(r)&&(i[r]=s);return i}function yo(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}function vo(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["behavior"]);null!=o&&Dt(n,["behavior"],o);const i=Rt(t,["description"]);null!=i&&Dt(n,["description"],i);const r=Rt(t,["name"]);null!=r&&Dt(n,["name"],r);const s=Rt(t,["parameters"]);null!=s&&Dt(n,["parameters"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],a),n}(0,e)))),Dt(n,["functionDeclarations"],e)}if(void 0!==Rt(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=Rt(t,["googleSearch"]);null!=i&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,i));const r=Rt(t,["googleSearchRetrieval"]);if(null!=r&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,r)),void 0!==Rt(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Rt(t,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const s=Rt(t,["codeExecution"]);return null!=s&&Dt(n,["codeExecution"],s),n}function bo(e,t){const n={},o=Rt(t,["functionCallingConfig"]);null!=o&&Dt(n,["functionCallingConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["allowedFunctionNames"]);return null!=i&&Dt(n,["allowedFunctionNames"],i),n}(0,o));const i=Rt(t,["retrievalConfig"]);return null!=i&&Dt(n,["retrievalConfig"],function(e,t){const n={},o=Rt(t,["latLng"]);null!=o&&Dt(n,["latLng"],function(e,t){const n={},o=Rt(t,["latitude"]);null!=o&&Dt(n,["latitude"],o);const i=Rt(t,["longitude"]);return null!=i&&Dt(n,["longitude"],i),n}(0,o));const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,i)),n}function _o(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["data"]);null!=i&&Dt(n,["data"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["fileUri"]);null!=i&&Dt(n,["fileUri"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}function Co(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={};if(void 0!==Rt(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const o=Rt(t,["description"]);null!=o&&Dt(n,["description"],o);const i=Rt(t,["name"]);null!=i&&Dt(n,["name"],i);const r=Rt(t,["parameters"]);null!=r&&Dt(n,["parameters"],r);const s=Rt(t,["response"]);return null!=s&&Dt(n,["response"],s),n}(0,e)))),Dt(n,["functionDeclarations"],e)}const i=Rt(t,["retrieval"]);null!=i&&Dt(n,["retrieval"],i);const r=Rt(t,["googleSearch"]);null!=r&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,r));const s=Rt(t,["googleSearchRetrieval"]);null!=s&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,s)),null!=Rt(t,["enterpriseWebSearch"])&&Dt(n,["enterpriseWebSearch"],{});const a=Rt(t,["googleMaps"]);null!=a&&Dt(n,["googleMaps"],function(e,t){const n={},o=Rt(t,["authConfig"]);return null!=o&&Dt(n,["authConfig"],function(e,t){const n={},o=Rt(t,["apiKeyConfig"]);null!=o&&Dt(n,["apiKeyConfig"],function(e,t){const n={},o=Rt(t,["apiKeyString"]);return null!=o&&Dt(n,["apiKeyString"],o),n}(0,o));const i=Rt(t,["authType"]);null!=i&&Dt(n,["authType"],i);const r=Rt(t,["googleServiceAccountConfig"]);null!=r&&Dt(n,["googleServiceAccountConfig"],r);const s=Rt(t,["httpBasicAuthConfig"]);null!=s&&Dt(n,["httpBasicAuthConfig"],s);const a=Rt(t,["oauthConfig"]);null!=a&&Dt(n,["oauthConfig"],a);const l=Rt(t,["oidcConfig"]);return null!=l&&Dt(n,["oidcConfig"],l),n}(0,o)),n}(0,a)),null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const l=Rt(t,["codeExecution"]);return null!=l&&Dt(n,["codeExecution"],l),n}function Eo(e,t){const n={},o=Rt(t,["functionCallingConfig"]);null!=o&&Dt(n,["functionCallingConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["allowedFunctionNames"]);return null!=i&&Dt(n,["allowedFunctionNames"],i),n}(0,o));const i=Rt(t,["retrievalConfig"]);return null!=i&&Dt(n,["retrievalConfig"],function(e,t){const n={},o=Rt(t,["latLng"]);null!=o&&Dt(n,["latLng"],function(e,t){const n={},o=Rt(t,["latitude"]);null!=o&&Dt(n,["latitude"],o);const i=Rt(t,["longitude"]);return null!=i&&Dt(n,["longitude"],i),n}(0,o));const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,i)),n}function wo(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["model"]);null!=r&&Dt(n,["model"],r);const s=Rt(t,["createTime"]);null!=s&&Dt(n,["createTime"],s);const a=Rt(t,["updateTime"]);null!=a&&Dt(n,["updateTime"],a);const l=Rt(t,["expireTime"]);null!=l&&Dt(n,["expireTime"],l);const c=Rt(t,["usageMetadata"]);return null!=c&&Dt(n,["usageMetadata"],c),n}function To(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["model"]);null!=r&&Dt(n,["model"],r);const s=Rt(t,["createTime"]);null!=s&&Dt(n,["createTime"],s);const a=Rt(t,["updateTime"]);null!=a&&Dt(n,["updateTime"],a);const l=Rt(t,["expireTime"]);null!=l&&Dt(n,["expireTime"],l);const c=Rt(t,["usageMetadata"]);return null!=c&&Dt(n,["usageMetadata"],c),n}var Oo;!function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents"}(Oo||(Oo={}));class So{constructor(e,t,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,o)}init(e,t,n){var o,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let r={config:{}};r=n?"object"==typeof n?Object.assign({},n):n:{config:{}},r.config&&(r.config.pageToken=t.nextPageToken),this.paramsInternal=r,this.pageInternalSize=null!==(i=null===(o=r.config)||void 0===o?void 0:o.pageSize)&&void 0!==i?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}class xo extends kt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new So(Oo.PAGED_ITEM_CACHED_CONTENTS,(e=>this.listInternal(e)),await this.listInternal(e),e)}async create(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["model"],Gn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["ttl"]);void 0!==n&&null!=o&&Dt(n,["ttl"],o);const i=Rt(t,["expireTime"]);void 0!==n&&null!=i&&Dt(n,["expireTime"],i);const r=Rt(t,["displayName"]);void 0!==n&&null!=r&&Dt(n,["displayName"],r);const s=Rt(t,["contents"]);if(void 0!==n&&null!=s){let e=Wn(0,s);Array.isArray(e)&&(e=e.map((e=>_o(0,e)))),Dt(n,["contents"],e)}const a=Rt(t,["systemInstruction"]);void 0!==n&&null!=a&&Dt(n,["systemInstruction"],_o(0,Yn(0,a)));const l=Rt(t,["tools"]);if(void 0!==n&&null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>Co(0,e)))),Dt(n,["tools"],e)}const c=Rt(t,["toolConfig"]);void 0!==n&&null!=c&&Dt(n,["toolConfig"],Eo(0,c));const u=Rt(t,["kmsKeyName"]);return void 0!==n&&null!=u&&Dt(n,["encryption_spec","kmsKeyName"],u),{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>To(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["model"],Gn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["ttl"]);void 0!==n&&null!=o&&Dt(n,["ttl"],o);const i=Rt(t,["expireTime"]);void 0!==n&&null!=i&&Dt(n,["expireTime"],i);const r=Rt(t,["displayName"]);void 0!==n&&null!=r&&Dt(n,["displayName"],r);const s=Rt(t,["contents"]);if(void 0!==n&&null!=s){let e=Wn(0,s);Array.isArray(e)&&(e=e.map((e=>yo(0,e)))),Dt(n,["contents"],e)}const a=Rt(t,["systemInstruction"]);void 0!==n&&null!=a&&Dt(n,["systemInstruction"],yo(0,Yn(0,a)));const l=Rt(t,["tools"]);if(void 0!==n&&null!=l){let e=l;Array.isArray(e)&&(e=e.map((e=>vo(0,e)))),Dt(n,["tools"],e)}const c=Rt(t,["toolConfig"]);if(void 0!==n&&null!=c&&Dt(n,["toolConfig"],bo(0,c)),void 0!==Rt(t,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("cachedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>wo(this.apiClient,e)))}}async get(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>To(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>wo(this.apiClient,e)))}}async delete(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((()=>{const e=new kn;return Object.assign(e,{}),e}))}{const t=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((()=>{const e=new kn;return Object.assign(e,{}),e}))}}async update(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["ttl"]);void 0!==n&&null!=o&&Dt(n,["ttl"],o);const i=Rt(t,["expireTime"]);return void 0!==n&&null!=i&&Dt(n,["expireTime"],i),{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>To(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],so(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["ttl"]);void 0!==n&&null!=o&&Dt(n,["ttl"],o);const i=Rt(t,["expireTime"]);return void 0!==n&&null!=i&&Dt(n,["expireTime"],i),{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>wo(this.apiClient,e)))}}async listInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);return void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i),{}}(0,o,n)),n}(this.apiClient,e);return s=Pt("cachedContents",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>To(0,e)))),Dt(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new Pn;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);return void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i),{}}(0,o,n)),n}(this.apiClient,e);return s=Pt("cachedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["cachedContents"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>wo(0,e)))),Dt(n,["cachedContents"],e)}return n}(this.apiClient,e),n=new Pn;return Object.assign(n,t),n}))}}}function Ao(e){return this instanceof Ao?(this.v=e,this):new Ao(e)}function Io(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(e,t||[]),r=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),o[Symbol.asyncIterator]=function(){return this},o;function s(e,t){i[e]&&(o[e]=function(t){return new Promise((function(n,o){r.push([e,t,n,o])>1||a(e,t)}))},t&&(o[e]=t(o[e])))}function a(e,t){try{(n=i[e](t)).value instanceof Ao?Promise.resolve(n.value.v).then(l,c):u(r[0][2],n)}catch(e){u(r[0][3],e)}var n}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function No(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,i){!function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)}(o,i,(t=e[n](t)).done,t.value)}))}}}function ko(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&Po(n)}function Po(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts){if(void 0===t||0===Object.keys(t).length)return!1;if(!t.thought&&void 0!==t.text&&""===t.text)return!1}return!0}function Do(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let o=0;for(;o<n;)if("user"===e[o].role)t.push(e[o]),o++;else{const i=[];let r=!0;for(;o<n&&"model"===e[o].role;)i.push(e[o]),r&&!Po(e[o])&&(r=!1),o++;r?t.push(...i):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class Ro{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Mo(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mo{constructor(e,t,n,o={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}(i)}async sendMessage(e){var t;await this.sendPromise;const n=Yn(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,i;const r=await o,s=null===(t=null===(e=r.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=r.automaticFunctionCallingHistory,l=this.getHistory(!0).length;let c=[];null!=a&&(c=null!==(i=a.slice(l))&&void 0!==i?i:[]);const u=s?[s]:[];this.recordHistory(n,u,c)})(),await this.sendPromise.catch((()=>{this.sendPromise=Promise.resolve()})),o}async sendMessageStream(e){var t;await this.sendPromise;const n=Yn(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=o.then((()=>{})).catch((()=>{}));const i=await o;return this.processStreamResponse(i,n)}getHistory(e=!1){const t=e?Do(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,o;return Io(this,arguments,(function*(){var i,r,s,a;const l=[];try{for(var c,u=!0,d=No(e);!(i=(c=yield Ao(d.next())).done);u=!0){a=c.value,u=!1;const e=a;if(ko(e)){const t=null===(o=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===o?void 0:o.content;void 0!==t&&l.push(t)}yield yield Ao(e)}}catch(e){r={error:e}}finally{try{u||i||!(s=d.return)||(yield Ao(s.call(d)))}finally{if(r)throw r.error}}this.recordHistory(t,l)}))}recordHistory(e,t,n){let o=[];t.length>0&&t.every((e=>void 0!==e.role))?o=t:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Do(n)):this.history.push(e),this.history.push(...o)}}function jo(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["mimeType"]);null!=r&&Dt(n,["mimeType"],r);const s=Rt(t,["sizeBytes"]);null!=s&&Dt(n,["sizeBytes"],s);const a=Rt(t,["createTime"]);null!=a&&Dt(n,["createTime"],a);const l=Rt(t,["expirationTime"]);null!=l&&Dt(n,["expirationTime"],l);const c=Rt(t,["updateTime"]);null!=c&&Dt(n,["updateTime"],c);const u=Rt(t,["sha256Hash"]);null!=u&&Dt(n,["sha256Hash"],u);const d=Rt(t,["uri"]);null!=d&&Dt(n,["uri"],d);const p=Rt(t,["downloadUri"]);null!=p&&Dt(n,["downloadUri"],p);const m=Rt(t,["state"]);null!=m&&Dt(n,["state"],m);const f=Rt(t,["source"]);null!=f&&Dt(n,["source"],f);const h=Rt(t,["videoMetadata"]);null!=h&&Dt(n,["videoMetadata"],h);const g=Rt(t,["error"]);return null!=g&&Dt(n,["error"],function(e,t){const n={},o=Rt(t,["details"]);null!=o&&Dt(n,["details"],o);const i=Rt(t,["message"]);null!=i&&Dt(n,["message"],i);const r=Rt(t,["code"]);return null!=r&&Dt(n,["code"],r),n}(0,g)),n}class Uo extends kt{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new So(Oo.PAGED_ITEM_FILES,(e=>this.listInternal(e)),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then((e=>jo(this.apiClient,e)))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);return void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i),{}}(0,o,n)),n}(this.apiClient,e);return i=Pt("files",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["files"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>jo(0,e)))),Dt(n,["files"],e)}return n}(this.apiClient,e),n=new Dn;return Object.assign(n,t),n}))}}async createInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},o=Rt(t,["file"]);null!=o&&Dt(n,["file"],function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["mimeType"]);null!=r&&Dt(n,["mimeType"],r);const s=Rt(t,["sizeBytes"]);null!=s&&Dt(n,["sizeBytes"],s);const a=Rt(t,["createTime"]);null!=a&&Dt(n,["createTime"],a);const l=Rt(t,["expirationTime"]);null!=l&&Dt(n,["expirationTime"],l);const c=Rt(t,["updateTime"]);null!=c&&Dt(n,["updateTime"],c);const u=Rt(t,["sha256Hash"]);null!=u&&Dt(n,["sha256Hash"],u);const d=Rt(t,["uri"]);null!=d&&Dt(n,["uri"],d);const p=Rt(t,["downloadUri"]);null!=p&&Dt(n,["downloadUri"],p);const m=Rt(t,["state"]);null!=m&&Dt(n,["state"],m);const f=Rt(t,["source"]);null!=f&&Dt(n,["source"],f);const h=Rt(t,["videoMetadata"]);null!=h&&Dt(n,["videoMetadata"],h);const g=Rt(t,["error"]);return null!=g&&Dt(n,["error"],function(e,t){const n={},o=Rt(t,["details"]);null!=o&&Dt(n,["details"],o);const i=Rt(t,["message"]);null!=i&&Dt(n,["message"],i);const r=Rt(t,["code"]);return null!=r&&Dt(n,["code"],r),n}(0,g)),n}(0,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return i=Pt("upload/v1beta/files",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((()=>{const e=new Mn;return Object.assign(e,{}),e}))}}async get(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","file"],co(0,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return i=Pt("files/{file}",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>jo(this.apiClient,e)))}}async delete(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","file"],co(0,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return i=Pt("files/{file}",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((()=>{const e=new jn;return Object.assign(e,{}),e}))}}}function Lo(e,t){const n={},o=Rt(t,["prebuiltVoiceConfig"]);return null!=o&&Dt(n,["prebuiltVoiceConfig"],function(e,t){const n={},o=Rt(t,["voiceName"]);return null!=o&&Dt(n,["voiceName"],o),n}(0,o)),n}function Fo(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["behavior"]);null!=o&&Dt(n,["behavior"],o);const i=Rt(t,["description"]);null!=i&&Dt(n,["description"],i);const r=Rt(t,["name"]);null!=r&&Dt(n,["name"],r);const s=Rt(t,["parameters"]);null!=s&&Dt(n,["parameters"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],a),n}(0,e)))),Dt(n,["functionDeclarations"],e)}if(void 0!==Rt(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=Rt(t,["googleSearch"]);null!=i&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,i));const r=Rt(t,["googleSearchRetrieval"]);if(null!=r&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,r)),void 0!==Rt(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Rt(t,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const s=Rt(t,["codeExecution"]);return null!=s&&Dt(n,["codeExecution"],s),n}function Go(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={};if(void 0!==Rt(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const o=Rt(t,["description"]);null!=o&&Dt(n,["description"],o);const i=Rt(t,["name"]);null!=i&&Dt(n,["name"],i);const r=Rt(t,["parameters"]);null!=r&&Dt(n,["parameters"],r);const s=Rt(t,["response"]);return null!=s&&Dt(n,["response"],s),n}(0,e)))),Dt(n,["functionDeclarations"],e)}const i=Rt(t,["retrieval"]);null!=i&&Dt(n,["retrieval"],i);const r=Rt(t,["googleSearch"]);null!=r&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,r));const s=Rt(t,["googleSearchRetrieval"]);null!=s&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,s)),null!=Rt(t,["enterpriseWebSearch"])&&Dt(n,["enterpriseWebSearch"],{});const a=Rt(t,["googleMaps"]);null!=a&&Dt(n,["googleMaps"],function(e,t){const n={},o=Rt(t,["authConfig"]);return null!=o&&Dt(n,["authConfig"],function(e,t){const n={},o=Rt(t,["apiKeyConfig"]);null!=o&&Dt(n,["apiKeyConfig"],function(e,t){const n={},o=Rt(t,["apiKeyString"]);return null!=o&&Dt(n,["apiKeyString"],o),n}(0,o));const i=Rt(t,["authType"]);null!=i&&Dt(n,["authType"],i);const r=Rt(t,["googleServiceAccountConfig"]);null!=r&&Dt(n,["googleServiceAccountConfig"],r);const s=Rt(t,["httpBasicAuthConfig"]);null!=s&&Dt(n,["httpBasicAuthConfig"],s);const a=Rt(t,["oauthConfig"]);null!=a&&Dt(n,["oauthConfig"],a);const l=Rt(t,["oidcConfig"]);return null!=l&&Dt(n,["oidcConfig"],l),n}(0,o)),n}(0,a)),null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const l=Rt(t,["codeExecution"]);return null!=l&&Dt(n,["codeExecution"],l),n}function Vo(e,t,n){const o=Rt(t,["generationConfig"]);void 0!==n&&null!=o&&Dt(n,["setup","generationConfig"],o);const i=Rt(t,["responseModalities"]);void 0!==n&&null!=i&&Dt(n,["setup","generationConfig","responseModalities"],i);const r=Rt(t,["temperature"]);void 0!==n&&null!=r&&Dt(n,["setup","generationConfig","temperature"],r);const s=Rt(t,["topP"]);void 0!==n&&null!=s&&Dt(n,["setup","generationConfig","topP"],s);const a=Rt(t,["topK"]);void 0!==n&&null!=a&&Dt(n,["setup","generationConfig","topK"],a);const l=Rt(t,["maxOutputTokens"]);void 0!==n&&null!=l&&Dt(n,["setup","generationConfig","maxOutputTokens"],l);const c=Rt(t,["mediaResolution"]);void 0!==n&&null!=c&&Dt(n,["setup","generationConfig","mediaResolution"],c);const u=Rt(t,["seed"]);void 0!==n&&null!=u&&Dt(n,["setup","generationConfig","seed"],u);const d=Rt(t,["speechConfig"]);void 0!==n&&null!=d&&Dt(n,["setup","generationConfig","speechConfig"],function(e,t){const n={},o=Rt(t,["voiceConfig"]);null!=o&&Dt(n,["voiceConfig"],Lo(0,o));const i=Rt(t,["multiSpeakerVoiceConfig"]);null!=i&&Dt(n,["multiSpeakerVoiceConfig"],function(e,t){const n={},o=Rt(t,["speakerVoiceConfigs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["speaker"]);null!=o&&Dt(n,["speaker"],o);const i=Rt(t,["voiceConfig"]);return null!=i&&Dt(n,["voiceConfig"],Lo(0,i)),n}(0,e)))),Dt(n,["speakerVoiceConfigs"],e)}return n}(0,i));const r=Rt(t,["languageCode"]);return null!=r&&Dt(n,["languageCode"],r),n}(0,oo(0,d)));const p=Rt(t,["enableAffectiveDialog"]);void 0!==n&&null!=p&&Dt(n,["setup","generationConfig","enableAffectiveDialog"],p);const m=Rt(t,["systemInstruction"]);void 0!==n&&null!=m&&Dt(n,["setup","systemInstruction"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,Yn(0,m)));const f=Rt(t,["tools"]);if(void 0!==n&&null!=f){let e=ro(0,f);Array.isArray(e)&&(e=e.map((e=>Fo(0,io(0,e))))),Dt(n,["setup","tools"],e)}const h=Rt(t,["sessionResumption"]);void 0!==n&&null!=h&&Dt(n,["setup","sessionResumption"],function(e,t){const n={},o=Rt(t,["handle"]);if(null!=o&&Dt(n,["handle"],o),void 0!==Rt(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(0,h));const g=Rt(t,["inputAudioTranscription"]);void 0!==n&&null!=g&&Dt(n,["setup","inputAudioTranscription"],{});const y=Rt(t,["outputAudioTranscription"]);void 0!==n&&null!=y&&Dt(n,["setup","outputAudioTranscription"],{});const v=Rt(t,["realtimeInputConfig"]);void 0!==n&&null!=v&&Dt(n,["setup","realtimeInputConfig"],function(e,t){const n={},o=Rt(t,["automaticActivityDetection"]);null!=o&&Dt(n,["automaticActivityDetection"],function(e,t){const n={},o=Rt(t,["disabled"]);null!=o&&Dt(n,["disabled"],o);const i=Rt(t,["startOfSpeechSensitivity"]);null!=i&&Dt(n,["startOfSpeechSensitivity"],i);const r=Rt(t,["endOfSpeechSensitivity"]);null!=r&&Dt(n,["endOfSpeechSensitivity"],r);const s=Rt(t,["prefixPaddingMs"]);null!=s&&Dt(n,["prefixPaddingMs"],s);const a=Rt(t,["silenceDurationMs"]);return null!=a&&Dt(n,["silenceDurationMs"],a),n}(0,o));const i=Rt(t,["activityHandling"]);null!=i&&Dt(n,["activityHandling"],i);const r=Rt(t,["turnCoverage"]);return null!=r&&Dt(n,["turnCoverage"],r),n}(0,v));const b=Rt(t,["contextWindowCompression"]);void 0!==n&&null!=b&&Dt(n,["setup","contextWindowCompression"],function(e,t){const n={},o=Rt(t,["triggerTokens"]);null!=o&&Dt(n,["triggerTokens"],o);const i=Rt(t,["slidingWindow"]);return null!=i&&Dt(n,["slidingWindow"],function(e,t){const n={},o=Rt(t,["targetTokens"]);return null!=o&&Dt(n,["targetTokens"],o),n}(0,i)),n}(0,b));const _=Rt(t,["proactivity"]);return void 0!==n&&null!=_&&Dt(n,["setup","proactivity"],function(e,t){const n={},o=Rt(t,["proactiveAudio"]);return null!=o&&Dt(n,["proactiveAudio"],o),n}(0,_)),{}}function qo(e,t,n){const o=Rt(t,["generationConfig"]);void 0!==n&&null!=o&&Dt(n,["setup","generationConfig"],o);const i=Rt(t,["responseModalities"]);void 0!==n&&null!=i&&Dt(n,["setup","generationConfig","responseModalities"],i);const r=Rt(t,["temperature"]);void 0!==n&&null!=r&&Dt(n,["setup","generationConfig","temperature"],r);const s=Rt(t,["topP"]);void 0!==n&&null!=s&&Dt(n,["setup","generationConfig","topP"],s);const a=Rt(t,["topK"]);void 0!==n&&null!=a&&Dt(n,["setup","generationConfig","topK"],a);const l=Rt(t,["maxOutputTokens"]);void 0!==n&&null!=l&&Dt(n,["setup","generationConfig","maxOutputTokens"],l);const c=Rt(t,["mediaResolution"]);void 0!==n&&null!=c&&Dt(n,["setup","generationConfig","mediaResolution"],c);const u=Rt(t,["seed"]);void 0!==n&&null!=u&&Dt(n,["setup","generationConfig","seed"],u);const d=Rt(t,["speechConfig"]);void 0!==n&&null!=d&&Dt(n,["setup","generationConfig","speechConfig"],function(e,t){const n={},o=Rt(t,["voiceConfig"]);if(null!=o&&Dt(n,["voiceConfig"],function(e,t){const n={},o=Rt(t,["prebuiltVoiceConfig"]);return null!=o&&Dt(n,["prebuiltVoiceConfig"],function(e,t){const n={},o=Rt(t,["voiceName"]);return null!=o&&Dt(n,["voiceName"],o),n}(0,o)),n}(0,o)),void 0!==Rt(t,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,oo(0,d)));const p=Rt(t,["enableAffectiveDialog"]);void 0!==n&&null!=p&&Dt(n,["setup","generationConfig","enableAffectiveDialog"],p);const m=Rt(t,["systemInstruction"]);void 0!==n&&null!=m&&Dt(n,["setup","systemInstruction"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["data"]);null!=i&&Dt(n,["data"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["fileUri"]);null!=i&&Dt(n,["fileUri"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,Yn(0,m)));const f=Rt(t,["tools"]);if(void 0!==n&&null!=f){let e=ro(0,f);Array.isArray(e)&&(e=e.map((e=>Go(0,io(0,e))))),Dt(n,["setup","tools"],e)}const h=Rt(t,["sessionResumption"]);void 0!==n&&null!=h&&Dt(n,["setup","sessionResumption"],function(e,t){const n={},o=Rt(t,["handle"]);null!=o&&Dt(n,["handle"],o);const i=Rt(t,["transparent"]);return null!=i&&Dt(n,["transparent"],i),n}(0,h));const g=Rt(t,["inputAudioTranscription"]);void 0!==n&&null!=g&&Dt(n,["setup","inputAudioTranscription"],{});const y=Rt(t,["outputAudioTranscription"]);void 0!==n&&null!=y&&Dt(n,["setup","outputAudioTranscription"],{});const v=Rt(t,["realtimeInputConfig"]);void 0!==n&&null!=v&&Dt(n,["setup","realtimeInputConfig"],function(e,t){const n={},o=Rt(t,["automaticActivityDetection"]);null!=o&&Dt(n,["automaticActivityDetection"],function(e,t){const n={},o=Rt(t,["disabled"]);null!=o&&Dt(n,["disabled"],o);const i=Rt(t,["startOfSpeechSensitivity"]);null!=i&&Dt(n,["startOfSpeechSensitivity"],i);const r=Rt(t,["endOfSpeechSensitivity"]);null!=r&&Dt(n,["endOfSpeechSensitivity"],r);const s=Rt(t,["prefixPaddingMs"]);null!=s&&Dt(n,["prefixPaddingMs"],s);const a=Rt(t,["silenceDurationMs"]);return null!=a&&Dt(n,["silenceDurationMs"],a),n}(0,o));const i=Rt(t,["activityHandling"]);null!=i&&Dt(n,["activityHandling"],i);const r=Rt(t,["turnCoverage"]);return null!=r&&Dt(n,["turnCoverage"],r),n}(0,v));const b=Rt(t,["contextWindowCompression"]);void 0!==n&&null!=b&&Dt(n,["setup","contextWindowCompression"],function(e,t){const n={},o=Rt(t,["triggerTokens"]);null!=o&&Dt(n,["triggerTokens"],o);const i=Rt(t,["slidingWindow"]);return null!=i&&Dt(n,["slidingWindow"],function(e,t){const n={},o=Rt(t,["targetTokens"]);return null!=o&&Dt(n,["targetTokens"],o),n}(0,i)),n}(0,b));const _=Rt(t,["proactivity"]);return void 0!==n&&null!=_&&Dt(n,["setup","proactivity"],function(e,t){const n={},o=Rt(t,["proactiveAudio"]);return null!=o&&Dt(n,["proactiveAudio"],o),n}(0,_)),{}}function Jo(e,t){const n={},o=Rt(t,["media"]);null!=o&&Dt(n,["mediaChunks"],Vn(0,o));const i=Rt(t,["audio"]);null!=i&&Dt(n,["audio"],function(e,t){const n=qn(0,t);if(n.mimeType&&n.mimeType.startsWith("audio/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,i));const r=Rt(t,["audioStreamEnd"]);null!=r&&Dt(n,["audioStreamEnd"],r);const s=Rt(t,["video"]);null!=s&&Dt(n,["video"],function(e,t){const n=qn(0,t);if(n.mimeType&&n.mimeType.startsWith("image/"))return n;throw new Error(`Unsupported mime type: ${n.mimeType}`)}(0,s));const a=Rt(t,["text"]);return null!=a&&Dt(n,["text"],a),null!=Rt(t,["activityStart"])&&Dt(n,["activityStart"],{}),null!=Rt(t,["activityEnd"])&&Dt(n,["activityEnd"],{}),n}function Bo(e,t){const n={},o=Rt(t,["media"]);if(null!=o&&Dt(n,["mediaChunks"],Vn(0,o)),void 0!==Rt(t,["audio"]))throw new Error("audio parameter is not supported in Vertex AI.");const i=Rt(t,["audioStreamEnd"]);if(null!=i&&Dt(n,["audioStreamEnd"],i),void 0!==Rt(t,["video"]))throw new Error("video parameter is not supported in Vertex AI.");if(void 0!==Rt(t,["text"]))throw new Error("text parameter is not supported in Vertex AI.");return null!=Rt(t,["activityStart"])&&Dt(n,["activityStart"],{}),null!=Rt(t,["activityEnd"])&&Dt(n,["activityEnd"],{}),n}function Ho(e,t){const n={},o=Rt(t,["text"]);null!=o&&Dt(n,["text"],o);const i=Rt(t,["weight"]);return null!=i&&Dt(n,["weight"],i),n}function Zo(e,t){const n={},o=Rt(t,["temperature"]);null!=o&&Dt(n,["temperature"],o);const i=Rt(t,["topK"]);null!=i&&Dt(n,["topK"],i);const r=Rt(t,["seed"]);null!=r&&Dt(n,["seed"],r);const s=Rt(t,["guidance"]);null!=s&&Dt(n,["guidance"],s);const a=Rt(t,["bpm"]);null!=a&&Dt(n,["bpm"],a);const l=Rt(t,["density"]);null!=l&&Dt(n,["density"],l);const c=Rt(t,["brightness"]);null!=c&&Dt(n,["brightness"],c);const u=Rt(t,["scale"]);null!=u&&Dt(n,["scale"],u);const d=Rt(t,["muteBass"]);null!=d&&Dt(n,["muteBass"],d);const p=Rt(t,["muteDrums"]);null!=p&&Dt(n,["muteDrums"],p);const m=Rt(t,["onlyBassAndDrums"]);return null!=m&&Dt(n,["onlyBassAndDrums"],m),n}function Ko(e,t){const n={},o=Rt(t,["model"]);return null!=o&&Dt(n,["model"],o),n}function Yo(e,t){const n={},o=Rt(t,["weightedPrompts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ho(0,e)))),Dt(n,["weightedPrompts"],e)}return n}function $o(e,t){const n={},o=Rt(t,["setup"]);null!=o&&Dt(n,["setup"],Ko(0,o));const i=Rt(t,["clientContent"]);null!=i&&Dt(n,["clientContent"],Yo(0,i));const r=Rt(t,["musicGenerationConfig"]);null!=r&&Dt(n,["musicGenerationConfig"],Zo(0,r));const s=Rt(t,["playbackControl"]);return null!=s&&Dt(n,["playbackControl"],s),n}function Wo(e,t){const n={},o=Rt(t,["text"]);null!=o&&Dt(n,["text"],o);const i=Rt(t,["finished"]);return null!=i&&Dt(n,["finished"],i),n}function zo(e,t){const n={},o=Rt(t,["text"]);null!=o&&Dt(n,["text"],o);const i=Rt(t,["finished"]);return null!=i&&Dt(n,["finished"],i),n}function Xo(e,t){const n={},o=Rt(t,["modelTurn"]);null!=o&&Dt(n,["modelTurn"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,o));const i=Rt(t,["turnComplete"]);null!=i&&Dt(n,["turnComplete"],i);const r=Rt(t,["interrupted"]);null!=r&&Dt(n,["interrupted"],r);const s=Rt(t,["groundingMetadata"]);null!=s&&Dt(n,["groundingMetadata"],s);const a=Rt(t,["generationComplete"]);null!=a&&Dt(n,["generationComplete"],a);const l=Rt(t,["inputTranscription"]);null!=l&&Dt(n,["inputTranscription"],Wo(0,l));const c=Rt(t,["outputTranscription"]);null!=c&&Dt(n,["outputTranscription"],Wo(0,c));const u=Rt(t,["urlContextMetadata"]);return null!=u&&Dt(n,["urlContextMetadata"],function(e,t){const n={},o=Rt(t,["urlMetadata"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["retrievedUrl"]);null!=o&&Dt(n,["retrievedUrl"],o);const i=Rt(t,["urlRetrievalStatus"]);return null!=i&&Dt(n,["urlRetrievalStatus"],i),n}(0,e)))),Dt(n,["urlMetadata"],e)}return n}(0,u)),n}function Qo(e,t){const n={},o=Rt(t,["modelTurn"]);null!=o&&Dt(n,["modelTurn"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["data"]);null!=i&&Dt(n,["data"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["fileUri"]);null!=i&&Dt(n,["fileUri"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,o));const i=Rt(t,["turnComplete"]);null!=i&&Dt(n,["turnComplete"],i);const r=Rt(t,["interrupted"]);null!=r&&Dt(n,["interrupted"],r);const s=Rt(t,["groundingMetadata"]);null!=s&&Dt(n,["groundingMetadata"],s);const a=Rt(t,["generationComplete"]);null!=a&&Dt(n,["generationComplete"],a);const l=Rt(t,["inputTranscription"]);null!=l&&Dt(n,["inputTranscription"],zo(0,l));const c=Rt(t,["outputTranscription"]);return null!=c&&Dt(n,["outputTranscription"],zo(0,c)),n}function ei(e,t){const n={},o=Rt(t,["modality"]);null!=o&&Dt(n,["modality"],o);const i=Rt(t,["tokenCount"]);return null!=i&&Dt(n,["tokenCount"],i),n}function ti(e,t){const n={},o=Rt(t,["modality"]);null!=o&&Dt(n,["modality"],o);const i=Rt(t,["tokenCount"]);return null!=i&&Dt(n,["tokenCount"],i),n}function ni(e,t){const n={};null!=Rt(t,["setupComplete"])&&Dt(n,["setupComplete"],{});const o=Rt(t,["serverContent"]);null!=o&&Dt(n,["serverContent"],Xo(0,o));const i=Rt(t,["toolCall"]);null!=i&&Dt(n,["toolCall"],function(e,t){const n={},o=Rt(t,["functionCalls"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["id"]);null!=o&&Dt(n,["id"],o);const i=Rt(t,["args"]);null!=i&&Dt(n,["args"],i);const r=Rt(t,["name"]);return null!=r&&Dt(n,["name"],r),n}(0,e)))),Dt(n,["functionCalls"],e)}return n}(0,i));const r=Rt(t,["toolCallCancellation"]);null!=r&&Dt(n,["toolCallCancellation"],function(e,t){const n={},o=Rt(t,["ids"]);return null!=o&&Dt(n,["ids"],o),n}(0,r));const s=Rt(t,["usageMetadata"]);null!=s&&Dt(n,["usageMetadata"],function(e,t){const n={},o=Rt(t,["promptTokenCount"]);null!=o&&Dt(n,["promptTokenCount"],o);const i=Rt(t,["cachedContentTokenCount"]);null!=i&&Dt(n,["cachedContentTokenCount"],i);const r=Rt(t,["responseTokenCount"]);null!=r&&Dt(n,["responseTokenCount"],r);const s=Rt(t,["toolUsePromptTokenCount"]);null!=s&&Dt(n,["toolUsePromptTokenCount"],s);const a=Rt(t,["thoughtsTokenCount"]);null!=a&&Dt(n,["thoughtsTokenCount"],a);const l=Rt(t,["totalTokenCount"]);null!=l&&Dt(n,["totalTokenCount"],l);const c=Rt(t,["promptTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>ei(0,e)))),Dt(n,["promptTokensDetails"],e)}const u=Rt(t,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map((e=>ei(0,e)))),Dt(n,["cacheTokensDetails"],e)}const d=Rt(t,["responseTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map((e=>ei(0,e)))),Dt(n,["responseTokensDetails"],e)}const p=Rt(t,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map((e=>ei(0,e)))),Dt(n,["toolUsePromptTokensDetails"],e)}return n}(0,s));const a=Rt(t,["goAway"]);null!=a&&Dt(n,["goAway"],function(e,t){const n={},o=Rt(t,["timeLeft"]);return null!=o&&Dt(n,["timeLeft"],o),n}(0,a));const l=Rt(t,["sessionResumptionUpdate"]);return null!=l&&Dt(n,["sessionResumptionUpdate"],function(e,t){const n={},o=Rt(t,["newHandle"]);null!=o&&Dt(n,["newHandle"],o);const i=Rt(t,["resumable"]);null!=i&&Dt(n,["resumable"],i);const r=Rt(t,["lastConsumedClientMessageIndex"]);return null!=r&&Dt(n,["lastConsumedClientMessageIndex"],r),n}(0,l)),n}function oi(e,t){const n={};null!=Rt(t,["setupComplete"])&&Dt(n,["setupComplete"],{});const o=Rt(t,["serverContent"]);null!=o&&Dt(n,["serverContent"],Qo(0,o));const i=Rt(t,["toolCall"]);null!=i&&Dt(n,["toolCall"],function(e,t){const n={},o=Rt(t,["functionCalls"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["args"]);null!=o&&Dt(n,["args"],o);const i=Rt(t,["name"]);return null!=i&&Dt(n,["name"],i),n}(0,e)))),Dt(n,["functionCalls"],e)}return n}(0,i));const r=Rt(t,["toolCallCancellation"]);null!=r&&Dt(n,["toolCallCancellation"],function(e,t){const n={},o=Rt(t,["ids"]);return null!=o&&Dt(n,["ids"],o),n}(0,r));const s=Rt(t,["usageMetadata"]);null!=s&&Dt(n,["usageMetadata"],function(e,t){const n={},o=Rt(t,["promptTokenCount"]);null!=o&&Dt(n,["promptTokenCount"],o);const i=Rt(t,["cachedContentTokenCount"]);null!=i&&Dt(n,["cachedContentTokenCount"],i);const r=Rt(t,["candidatesTokenCount"]);null!=r&&Dt(n,["responseTokenCount"],r);const s=Rt(t,["toolUsePromptTokenCount"]);null!=s&&Dt(n,["toolUsePromptTokenCount"],s);const a=Rt(t,["thoughtsTokenCount"]);null!=a&&Dt(n,["thoughtsTokenCount"],a);const l=Rt(t,["totalTokenCount"]);null!=l&&Dt(n,["totalTokenCount"],l);const c=Rt(t,["promptTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map((e=>ti(0,e)))),Dt(n,["promptTokensDetails"],e)}const u=Rt(t,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map((e=>ti(0,e)))),Dt(n,["cacheTokensDetails"],e)}const d=Rt(t,["candidatesTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map((e=>ti(0,e)))),Dt(n,["responseTokensDetails"],e)}const p=Rt(t,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map((e=>ti(0,e)))),Dt(n,["toolUsePromptTokensDetails"],e)}const m=Rt(t,["trafficType"]);return null!=m&&Dt(n,["trafficType"],m),n}(0,s));const a=Rt(t,["goAway"]);null!=a&&Dt(n,["goAway"],function(e,t){const n={},o=Rt(t,["timeLeft"]);return null!=o&&Dt(n,["timeLeft"],o),n}(0,a));const l=Rt(t,["sessionResumptionUpdate"]);return null!=l&&Dt(n,["sessionResumptionUpdate"],function(e,t){const n={},o=Rt(t,["newHandle"]);null!=o&&Dt(n,["newHandle"],o);const i=Rt(t,["resumable"]);null!=i&&Dt(n,["resumable"],i);const r=Rt(t,["lastConsumedClientMessageIndex"]);return null!=r&&Dt(n,["lastConsumedClientMessageIndex"],r),n}(0,l)),n}function ii(e,t){const n={},o=Rt(t,["clientContent"]);null!=o&&Dt(n,["clientContent"],function(e,t){const n={},o=Rt(t,["weightedPrompts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["text"]);null!=o&&Dt(n,["text"],o);const i=Rt(t,["weight"]);return null!=i&&Dt(n,["weight"],i),n}(0,e)))),Dt(n,["weightedPrompts"],e)}return n}(0,o));const i=Rt(t,["musicGenerationConfig"]);return null!=i&&Dt(n,["musicGenerationConfig"],function(e,t){const n={},o=Rt(t,["temperature"]);null!=o&&Dt(n,["temperature"],o);const i=Rt(t,["topK"]);null!=i&&Dt(n,["topK"],i);const r=Rt(t,["seed"]);null!=r&&Dt(n,["seed"],r);const s=Rt(t,["guidance"]);null!=s&&Dt(n,["guidance"],s);const a=Rt(t,["bpm"]);null!=a&&Dt(n,["bpm"],a);const l=Rt(t,["density"]);null!=l&&Dt(n,["density"],l);const c=Rt(t,["brightness"]);null!=c&&Dt(n,["brightness"],c);const u=Rt(t,["scale"]);null!=u&&Dt(n,["scale"],u);const d=Rt(t,["muteBass"]);null!=d&&Dt(n,["muteBass"],d);const p=Rt(t,["muteDrums"]);null!=p&&Dt(n,["muteDrums"],p);const m=Rt(t,["onlyBassAndDrums"]);return null!=m&&Dt(n,["onlyBassAndDrums"],m),n}(0,i)),n}function ri(e,t){const n={};null!=Rt(t,["setupComplete"])&&Dt(n,["setupComplete"],{});const o=Rt(t,["serverContent"]);null!=o&&Dt(n,["serverContent"],function(e,t){const n={},o=Rt(t,["audioChunks"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);null!=i&&Dt(n,["mimeType"],i);const r=Rt(t,["sourceMetadata"]);return null!=r&&Dt(n,["sourceMetadata"],ii(0,r)),n}(0,e)))),Dt(n,["audioChunks"],e)}return n}(0,o));const i=Rt(t,["filteredPrompt"]);return null!=i&&Dt(n,["filteredPrompt"],function(e,t){const n={},o=Rt(t,["text"]);null!=o&&Dt(n,["text"],o);const i=Rt(t,["filteredReason"]);return null!=i&&Dt(n,["filteredReason"],i),n}(0,i)),n}function si(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}function ai(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["behavior"]);null!=o&&Dt(n,["behavior"],o);const i=Rt(t,["description"]);null!=i&&Dt(n,["description"],i);const r=Rt(t,["name"]);null!=r&&Dt(n,["name"],r);const s=Rt(t,["parameters"]);null!=s&&Dt(n,["parameters"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],a),n}(0,e)))),Dt(n,["functionDeclarations"],e)}if(void 0!==Rt(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=Rt(t,["googleSearch"]);null!=i&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,i));const r=Rt(t,["googleSearchRetrieval"]);if(null!=r&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,r)),void 0!==Rt(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Rt(t,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const s=Rt(t,["codeExecution"]);return null!=s&&Dt(n,["codeExecution"],s),n}function li(e,t){const n={},o=Rt(t,["functionCallingConfig"]);null!=o&&Dt(n,["functionCallingConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["allowedFunctionNames"]);return null!=i&&Dt(n,["allowedFunctionNames"],i),n}(0,o));const i=Rt(t,["retrievalConfig"]);return null!=i&&Dt(n,["retrievalConfig"],function(e,t){const n={},o=Rt(t,["latLng"]);null!=o&&Dt(n,["latLng"],function(e,t){const n={},o=Rt(t,["latitude"]);null!=o&&Dt(n,["latitude"],o);const i=Rt(t,["longitude"]);return null!=i&&Dt(n,["longitude"],i),n}(0,o));const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,i)),n}function ci(e,t){const n={},o=Rt(t,["prebuiltVoiceConfig"]);return null!=o&&Dt(n,["prebuiltVoiceConfig"],function(e,t){const n={},o=Rt(t,["voiceName"]);return null!=o&&Dt(n,["voiceName"],o),n}(0,o)),n}function ui(e,t,n){const o={},i=Rt(t,["systemInstruction"]);void 0!==n&&null!=i&&Dt(n,["systemInstruction"],si(0,Yn(0,i)));const r=Rt(t,["temperature"]);null!=r&&Dt(o,["temperature"],r);const s=Rt(t,["topP"]);null!=s&&Dt(o,["topP"],s);const a=Rt(t,["topK"]);null!=a&&Dt(o,["topK"],a);const l=Rt(t,["candidateCount"]);null!=l&&Dt(o,["candidateCount"],l);const c=Rt(t,["maxOutputTokens"]);null!=c&&Dt(o,["maxOutputTokens"],c);const u=Rt(t,["stopSequences"]);null!=u&&Dt(o,["stopSequences"],u);const d=Rt(t,["responseLogprobs"]);null!=d&&Dt(o,["responseLogprobs"],d);const p=Rt(t,["logprobs"]);null!=p&&Dt(o,["logprobs"],p);const m=Rt(t,["presencePenalty"]);null!=m&&Dt(o,["presencePenalty"],m);const f=Rt(t,["frequencyPenalty"]);null!=f&&Dt(o,["frequencyPenalty"],f);const h=Rt(t,["seed"]);null!=h&&Dt(o,["seed"],h);const g=Rt(t,["responseMimeType"]);null!=g&&Dt(o,["responseMimeType"],g);const y=Rt(t,["responseSchema"]);if(null!=y&&Dt(o,["responseSchema"],function(e,t){const n={},o=Rt(t,["anyOf"]);null!=o&&Dt(n,["anyOf"],o);const i=Rt(t,["default"]);null!=i&&Dt(n,["default"],i);const r=Rt(t,["description"]);null!=r&&Dt(n,["description"],r);const s=Rt(t,["enum"]);null!=s&&Dt(n,["enum"],s);const a=Rt(t,["example"]);null!=a&&Dt(n,["example"],a);const l=Rt(t,["format"]);null!=l&&Dt(n,["format"],l);const c=Rt(t,["items"]);null!=c&&Dt(n,["items"],c);const u=Rt(t,["maxItems"]);null!=u&&Dt(n,["maxItems"],u);const d=Rt(t,["maxLength"]);null!=d&&Dt(n,["maxLength"],d);const p=Rt(t,["maxProperties"]);null!=p&&Dt(n,["maxProperties"],p);const m=Rt(t,["maximum"]);null!=m&&Dt(n,["maximum"],m);const f=Rt(t,["minItems"]);null!=f&&Dt(n,["minItems"],f);const h=Rt(t,["minLength"]);null!=h&&Dt(n,["minLength"],h);const g=Rt(t,["minProperties"]);null!=g&&Dt(n,["minProperties"],g);const y=Rt(t,["minimum"]);null!=y&&Dt(n,["minimum"],y);const v=Rt(t,["nullable"]);null!=v&&Dt(n,["nullable"],v);const b=Rt(t,["pattern"]);null!=b&&Dt(n,["pattern"],b);const _=Rt(t,["properties"]);null!=_&&Dt(n,["properties"],_);const C=Rt(t,["propertyOrdering"]);null!=C&&Dt(n,["propertyOrdering"],C);const E=Rt(t,["required"]);null!=E&&Dt(n,["required"],E);const w=Rt(t,["title"]);null!=w&&Dt(n,["title"],w);const T=Rt(t,["type"]);return null!=T&&Dt(n,["type"],T),n}(0,to(0,y))),void 0!==Rt(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==Rt(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=Rt(t,["safetySettings"]);if(void 0!==n&&null!=v){let e=v;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={};if(void 0!==Rt(t,["method"]))throw new Error("method parameter is not supported in Gemini API.");const o=Rt(t,["category"]);null!=o&&Dt(n,["category"],o);const i=Rt(t,["threshold"]);return null!=i&&Dt(n,["threshold"],i),n}(0,e)))),Dt(n,["safetySettings"],e)}const b=Rt(t,["tools"]);if(void 0!==n&&null!=b){let e=ro(0,b);Array.isArray(e)&&(e=e.map((e=>ai(0,io(0,e))))),Dt(n,["tools"],e)}const _=Rt(t,["toolConfig"]);if(void 0!==n&&null!=_&&Dt(n,["toolConfig"],li(0,_)),void 0!==Rt(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const C=Rt(t,["cachedContent"]);void 0!==n&&null!=C&&Dt(n,["cachedContent"],so(e,C));const E=Rt(t,["responseModalities"]);null!=E&&Dt(o,["responseModalities"],E);const w=Rt(t,["mediaResolution"]);null!=w&&Dt(o,["mediaResolution"],w);const T=Rt(t,["speechConfig"]);if(null!=T&&Dt(o,["speechConfig"],function(e,t){const n={},o=Rt(t,["voiceConfig"]);null!=o&&Dt(n,["voiceConfig"],ci(0,o));const i=Rt(t,["multiSpeakerVoiceConfig"]);null!=i&&Dt(n,["multiSpeakerVoiceConfig"],function(e,t){const n={},o=Rt(t,["speakerVoiceConfigs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["speaker"]);null!=o&&Dt(n,["speaker"],o);const i=Rt(t,["voiceConfig"]);return null!=i&&Dt(n,["voiceConfig"],ci(0,i)),n}(0,e)))),Dt(n,["speakerVoiceConfigs"],e)}return n}(0,i));const r=Rt(t,["languageCode"]);return null!=r&&Dt(n,["languageCode"],r),n}(0,no(0,T))),void 0!==Rt(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=Rt(t,["thinkingConfig"]);return null!=O&&Dt(o,["thinkingConfig"],function(e,t){const n={},o=Rt(t,["includeThoughts"]);null!=o&&Dt(n,["includeThoughts"],o);const i=Rt(t,["thinkingBudget"]);return null!=i&&Dt(n,["thinkingBudget"],i),n}(0,O)),o}function di(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);if(null!=i){let e=Wn(0,i);Array.isArray(e)&&(e=e.map((e=>si(0,e)))),Dt(n,["contents"],e)}const r=Rt(t,["config"]);return null!=r&&Dt(n,["generationConfig"],ui(e,r,n)),n}function pi(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["data"]);null!=i&&Dt(n,["data"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["fileUri"]);null!=i&&Dt(n,["fileUri"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}function mi(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={};if(void 0!==Rt(t,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const o=Rt(t,["description"]);null!=o&&Dt(n,["description"],o);const i=Rt(t,["name"]);null!=i&&Dt(n,["name"],i);const r=Rt(t,["parameters"]);null!=r&&Dt(n,["parameters"],r);const s=Rt(t,["response"]);return null!=s&&Dt(n,["response"],s),n}(0,e)))),Dt(n,["functionDeclarations"],e)}const i=Rt(t,["retrieval"]);null!=i&&Dt(n,["retrieval"],i);const r=Rt(t,["googleSearch"]);null!=r&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,r));const s=Rt(t,["googleSearchRetrieval"]);null!=s&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,s)),null!=Rt(t,["enterpriseWebSearch"])&&Dt(n,["enterpriseWebSearch"],{});const a=Rt(t,["googleMaps"]);null!=a&&Dt(n,["googleMaps"],function(e,t){const n={},o=Rt(t,["authConfig"]);return null!=o&&Dt(n,["authConfig"],function(e,t){const n={},o=Rt(t,["apiKeyConfig"]);null!=o&&Dt(n,["apiKeyConfig"],function(e,t){const n={},o=Rt(t,["apiKeyString"]);return null!=o&&Dt(n,["apiKeyString"],o),n}(0,o));const i=Rt(t,["authType"]);null!=i&&Dt(n,["authType"],i);const r=Rt(t,["googleServiceAccountConfig"]);null!=r&&Dt(n,["googleServiceAccountConfig"],r);const s=Rt(t,["httpBasicAuthConfig"]);null!=s&&Dt(n,["httpBasicAuthConfig"],s);const a=Rt(t,["oauthConfig"]);null!=a&&Dt(n,["oauthConfig"],a);const l=Rt(t,["oidcConfig"]);return null!=l&&Dt(n,["oidcConfig"],l),n}(0,o)),n}(0,a)),null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const l=Rt(t,["codeExecution"]);return null!=l&&Dt(n,["codeExecution"],l),n}function fi(e,t){const n={},o=Rt(t,["functionCallingConfig"]);null!=o&&Dt(n,["functionCallingConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["allowedFunctionNames"]);return null!=i&&Dt(n,["allowedFunctionNames"],i),n}(0,o));const i=Rt(t,["retrievalConfig"]);return null!=i&&Dt(n,["retrievalConfig"],function(e,t){const n={},o=Rt(t,["latLng"]);null!=o&&Dt(n,["latLng"],function(e,t){const n={},o=Rt(t,["latitude"]);null!=o&&Dt(n,["latitude"],o);const i=Rt(t,["longitude"]);return null!=i&&Dt(n,["longitude"],i),n}(0,o));const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,i)),n}function hi(e,t,n){const o={},i=Rt(t,["systemInstruction"]);void 0!==n&&null!=i&&Dt(n,["systemInstruction"],pi(0,Yn(0,i)));const r=Rt(t,["temperature"]);null!=r&&Dt(o,["temperature"],r);const s=Rt(t,["topP"]);null!=s&&Dt(o,["topP"],s);const a=Rt(t,["topK"]);null!=a&&Dt(o,["topK"],a);const l=Rt(t,["candidateCount"]);null!=l&&Dt(o,["candidateCount"],l);const c=Rt(t,["maxOutputTokens"]);null!=c&&Dt(o,["maxOutputTokens"],c);const u=Rt(t,["stopSequences"]);null!=u&&Dt(o,["stopSequences"],u);const d=Rt(t,["responseLogprobs"]);null!=d&&Dt(o,["responseLogprobs"],d);const p=Rt(t,["logprobs"]);null!=p&&Dt(o,["logprobs"],p);const m=Rt(t,["presencePenalty"]);null!=m&&Dt(o,["presencePenalty"],m);const f=Rt(t,["frequencyPenalty"]);null!=f&&Dt(o,["frequencyPenalty"],f);const h=Rt(t,["seed"]);null!=h&&Dt(o,["seed"],h);const g=Rt(t,["responseMimeType"]);null!=g&&Dt(o,["responseMimeType"],g);const y=Rt(t,["responseSchema"]);null!=y&&Dt(o,["responseSchema"],function(e,t){const n={},o=Rt(t,["anyOf"]);null!=o&&Dt(n,["anyOf"],o);const i=Rt(t,["default"]);null!=i&&Dt(n,["default"],i);const r=Rt(t,["description"]);null!=r&&Dt(n,["description"],r);const s=Rt(t,["enum"]);null!=s&&Dt(n,["enum"],s);const a=Rt(t,["example"]);null!=a&&Dt(n,["example"],a);const l=Rt(t,["format"]);null!=l&&Dt(n,["format"],l);const c=Rt(t,["items"]);null!=c&&Dt(n,["items"],c);const u=Rt(t,["maxItems"]);null!=u&&Dt(n,["maxItems"],u);const d=Rt(t,["maxLength"]);null!=d&&Dt(n,["maxLength"],d);const p=Rt(t,["maxProperties"]);null!=p&&Dt(n,["maxProperties"],p);const m=Rt(t,["maximum"]);null!=m&&Dt(n,["maximum"],m);const f=Rt(t,["minItems"]);null!=f&&Dt(n,["minItems"],f);const h=Rt(t,["minLength"]);null!=h&&Dt(n,["minLength"],h);const g=Rt(t,["minProperties"]);null!=g&&Dt(n,["minProperties"],g);const y=Rt(t,["minimum"]);null!=y&&Dt(n,["minimum"],y);const v=Rt(t,["nullable"]);null!=v&&Dt(n,["nullable"],v);const b=Rt(t,["pattern"]);null!=b&&Dt(n,["pattern"],b);const _=Rt(t,["properties"]);null!=_&&Dt(n,["properties"],_);const C=Rt(t,["propertyOrdering"]);null!=C&&Dt(n,["propertyOrdering"],C);const E=Rt(t,["required"]);null!=E&&Dt(n,["required"],E);const w=Rt(t,["title"]);null!=w&&Dt(n,["title"],w);const T=Rt(t,["type"]);return null!=T&&Dt(n,["type"],T),n}(0,to(0,y)));const v=Rt(t,["routingConfig"]);null!=v&&Dt(o,["routingConfig"],v);const b=Rt(t,["modelSelectionConfig"]);null!=b&&Dt(o,["modelConfig"],function(e,t){const n={},o=Rt(t,["featureSelectionPreference"]);return null!=o&&Dt(n,["featureSelectionPreference"],o),n}(0,b));const _=Rt(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["method"]);null!=o&&Dt(n,["method"],o);const i=Rt(t,["category"]);null!=i&&Dt(n,["category"],i);const r=Rt(t,["threshold"]);return null!=r&&Dt(n,["threshold"],r),n}(0,e)))),Dt(n,["safetySettings"],e)}const C=Rt(t,["tools"]);if(void 0!==n&&null!=C){let e=ro(0,C);Array.isArray(e)&&(e=e.map((e=>mi(0,io(0,e))))),Dt(n,["tools"],e)}const E=Rt(t,["toolConfig"]);void 0!==n&&null!=E&&Dt(n,["toolConfig"],fi(0,E));const w=Rt(t,["labels"]);void 0!==n&&null!=w&&Dt(n,["labels"],w);const T=Rt(t,["cachedContent"]);void 0!==n&&null!=T&&Dt(n,["cachedContent"],so(e,T));const O=Rt(t,["responseModalities"]);null!=O&&Dt(o,["responseModalities"],O);const S=Rt(t,["mediaResolution"]);null!=S&&Dt(o,["mediaResolution"],S);const x=Rt(t,["speechConfig"]);null!=x&&Dt(o,["speechConfig"],function(e,t){const n={},o=Rt(t,["voiceConfig"]);if(null!=o&&Dt(n,["voiceConfig"],function(e,t){const n={},o=Rt(t,["prebuiltVoiceConfig"]);return null!=o&&Dt(n,["prebuiltVoiceConfig"],function(e,t){const n={},o=Rt(t,["voiceName"]);return null!=o&&Dt(n,["voiceName"],o),n}(0,o)),n}(0,o)),void 0!==Rt(t,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=Rt(t,["languageCode"]);return null!=i&&Dt(n,["languageCode"],i),n}(0,no(0,x)));const A=Rt(t,["audioTimestamp"]);null!=A&&Dt(o,["audioTimestamp"],A);const I=Rt(t,["thinkingConfig"]);return null!=I&&Dt(o,["thinkingConfig"],function(e,t){const n={},o=Rt(t,["includeThoughts"]);null!=o&&Dt(n,["includeThoughts"],o);const i=Rt(t,["thinkingBudget"]);return null!=i&&Dt(n,["thinkingBudget"],i),n}(0,I)),o}function gi(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);if(null!=i){let e=Wn(0,i);Array.isArray(e)&&(e=e.map((e=>pi(0,e)))),Dt(n,["contents"],e)}const r=Rt(t,["config"]);return null!=r&&Dt(n,["generationConfig"],hi(e,r,n)),n}function yi(e,t){const n={},o=Rt(t,["gcsUri"]);null!=o&&Dt(n,["gcsUri"],o);const i=Rt(t,["imageBytes"]);null!=i&&Dt(n,["bytesBase64Encoded"],lo(0,i));const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}function vi(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["prompt"]);null!=i&&Dt(n,["instances[0]","prompt"],i);const r=Rt(t,["referenceImages"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["referenceImage"]);null!=o&&Dt(n,["referenceImage"],yi(0,o));const i=Rt(t,["referenceId"]);null!=i&&Dt(n,["referenceId"],i);const r=Rt(t,["referenceType"]);null!=r&&Dt(n,["referenceType"],r);const s=Rt(t,["maskImageConfig"]);null!=s&&Dt(n,["maskImageConfig"],function(e,t){const n={},o=Rt(t,["maskMode"]);null!=o&&Dt(n,["maskMode"],o);const i=Rt(t,["segmentationClasses"]);null!=i&&Dt(n,["maskClasses"],i);const r=Rt(t,["maskDilation"]);return null!=r&&Dt(n,["dilation"],r),n}(0,s));const a=Rt(t,["controlImageConfig"]);null!=a&&Dt(n,["controlImageConfig"],function(e,t){const n={},o=Rt(t,["controlType"]);null!=o&&Dt(n,["controlType"],o);const i=Rt(t,["enableControlImageComputation"]);return null!=i&&Dt(n,["computeControl"],i),n}(0,a));const l=Rt(t,["styleImageConfig"]);null!=l&&Dt(n,["styleImageConfig"],function(e,t){const n={},o=Rt(t,["styleDescription"]);return null!=o&&Dt(n,["styleDescription"],o),n}(0,l));const c=Rt(t,["subjectImageConfig"]);return null!=c&&Dt(n,["subjectImageConfig"],function(e,t){const n={},o=Rt(t,["subjectType"]);null!=o&&Dt(n,["subjectType"],o);const i=Rt(t,["subjectDescription"]);return null!=i&&Dt(n,["subjectDescription"],i),n}(0,c)),n}(0,e)))),Dt(n,["instances[0]","referenceImages"],e)}const s=Rt(t,["config"]);return null!=s&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["outputGcsUri"]);void 0!==n&&null!=o&&Dt(n,["parameters","storageUri"],o);const i=Rt(t,["negativePrompt"]);void 0!==n&&null!=i&&Dt(n,["parameters","negativePrompt"],i);const r=Rt(t,["numberOfImages"]);void 0!==n&&null!=r&&Dt(n,["parameters","sampleCount"],r);const s=Rt(t,["aspectRatio"]);void 0!==n&&null!=s&&Dt(n,["parameters","aspectRatio"],s);const a=Rt(t,["guidanceScale"]);void 0!==n&&null!=a&&Dt(n,["parameters","guidanceScale"],a);const l=Rt(t,["seed"]);void 0!==n&&null!=l&&Dt(n,["parameters","seed"],l);const c=Rt(t,["safetyFilterLevel"]);void 0!==n&&null!=c&&Dt(n,["parameters","safetySetting"],c);const u=Rt(t,["personGeneration"]);void 0!==n&&null!=u&&Dt(n,["parameters","personGeneration"],u);const d=Rt(t,["includeSafetyAttributes"]);void 0!==n&&null!=d&&Dt(n,["parameters","includeSafetyAttributes"],d);const p=Rt(t,["includeRaiReason"]);void 0!==n&&null!=p&&Dt(n,["parameters","includeRaiReason"],p);const m=Rt(t,["language"]);void 0!==n&&null!=m&&Dt(n,["parameters","language"],m);const f=Rt(t,["outputMimeType"]);void 0!==n&&null!=f&&Dt(n,["parameters","outputOptions","mimeType"],f);const h=Rt(t,["outputCompressionQuality"]);void 0!==n&&null!=h&&Dt(n,["parameters","outputOptions","compressionQuality"],h);const g=Rt(t,["editMode"]);void 0!==n&&null!=g&&Dt(n,["parameters","editMode"],g);const y=Rt(t,["baseSteps"]);return void 0!==n&&null!=y&&Dt(n,["parameters","editConfig","baseSteps"],y),{}}(0,s,n)),n}function bi(e,t){const n={},o=Rt(t,["content"]);null!=o&&Dt(n,["content"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,o));const i=Rt(t,["citationMetadata"]);null!=i&&Dt(n,["citationMetadata"],function(e,t){const n={},o=Rt(t,["citationSources"]);return null!=o&&Dt(n,["citations"],o),n}(0,i));const r=Rt(t,["tokenCount"]);null!=r&&Dt(n,["tokenCount"],r);const s=Rt(t,["finishReason"]);null!=s&&Dt(n,["finishReason"],s);const a=Rt(t,["urlContextMetadata"]);null!=a&&Dt(n,["urlContextMetadata"],function(e,t){const n={},o=Rt(t,["urlMetadata"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["retrievedUrl"]);null!=o&&Dt(n,["retrievedUrl"],o);const i=Rt(t,["urlRetrievalStatus"]);return null!=i&&Dt(n,["urlRetrievalStatus"],i),n}(0,e)))),Dt(n,["urlMetadata"],e)}return n}(0,a));const l=Rt(t,["avgLogprobs"]);null!=l&&Dt(n,["avgLogprobs"],l);const c=Rt(t,["groundingMetadata"]);null!=c&&Dt(n,["groundingMetadata"],c);const u=Rt(t,["index"]);null!=u&&Dt(n,["index"],u);const d=Rt(t,["logprobsResult"]);null!=d&&Dt(n,["logprobsResult"],d);const p=Rt(t,["safetyRatings"]);return null!=p&&Dt(n,["safetyRatings"],p),n}function _i(e,t){const n={},o=Rt(t,["candidates"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>bi(0,e)))),Dt(n,["candidates"],e)}const i=Rt(t,["modelVersion"]);null!=i&&Dt(n,["modelVersion"],i);const r=Rt(t,["promptFeedback"]);null!=r&&Dt(n,["promptFeedback"],r);const s=Rt(t,["usageMetadata"]);return null!=s&&Dt(n,["usageMetadata"],s),n}function Ci(e,t){const n={},o=Rt(t,["safetyAttributes","categories"]);null!=o&&Dt(n,["categories"],o);const i=Rt(t,["safetyAttributes","scores"]);null!=i&&Dt(n,["scores"],i);const r=Rt(t,["contentType"]);return null!=r&&Dt(n,["contentType"],r),n}function Ei(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["description"]);null!=r&&Dt(n,["description"],r);const s=Rt(t,["version"]);null!=s&&Dt(n,["version"],s);const a=Rt(t,["_self"]);null!=a&&Dt(n,["tunedModelInfo"],function(e,t){const n={},o=Rt(t,["baseModel"]);null!=o&&Dt(n,["baseModel"],o);const i=Rt(t,["createTime"]);null!=i&&Dt(n,["createTime"],i);const r=Rt(t,["updateTime"]);return null!=r&&Dt(n,["updateTime"],r),n}(0,a));const l=Rt(t,["inputTokenLimit"]);null!=l&&Dt(n,["inputTokenLimit"],l);const c=Rt(t,["outputTokenLimit"]);null!=c&&Dt(n,["outputTokenLimit"],c);const u=Rt(t,["supportedGenerationMethods"]);return null!=u&&Dt(n,["supportedActions"],u),n}function wi(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["metadata"]);null!=i&&Dt(n,["metadata"],i);const r=Rt(t,["done"]);null!=r&&Dt(n,["done"],r);const s=Rt(t,["error"]);null!=s&&Dt(n,["error"],s);const a=Rt(t,["response","generateVideoResponse"]);return null!=a&&Dt(n,["response"],function(e,t){const n={},o=Rt(t,["generatedSamples"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["_self"]);return null!=o&&Dt(n,["video"],function(e,t){const n={},o=Rt(t,["video","uri"]);null!=o&&Dt(n,["uri"],o);const i=Rt(t,["video","encodedVideo"]);null!=i&&Dt(n,["videoBytes"],lo(0,i));const r=Rt(t,["encoding"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,o)),n}(0,e)))),Dt(n,["generatedVideos"],e)}const i=Rt(t,["raiMediaFilteredCount"]);null!=i&&Dt(n,["raiMediaFilteredCount"],i);const r=Rt(t,["raiMediaFilteredReasons"]);return null!=r&&Dt(n,["raiMediaFilteredReasons"],r),n}(0,a)),n}function Ti(e,t){const n={},o=Rt(t,["content"]);null!=o&&Dt(n,["content"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["data"]);null!=i&&Dt(n,["data"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={},o=Rt(t,["displayName"]);null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["fileUri"]);null!=i&&Dt(n,["fileUri"],i);const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,o));const i=Rt(t,["citationMetadata"]);null!=i&&Dt(n,["citationMetadata"],function(e,t){const n={},o=Rt(t,["citations"]);return null!=o&&Dt(n,["citations"],o),n}(0,i));const r=Rt(t,["finishMessage"]);null!=r&&Dt(n,["finishMessage"],r);const s=Rt(t,["finishReason"]);null!=s&&Dt(n,["finishReason"],s);const a=Rt(t,["urlContextMetadata"]);null!=a&&Dt(n,["urlContextMetadata"],function(e,t){const n={},o=Rt(t,["urlMetadata"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["retrievedUrl"]);null!=o&&Dt(n,["retrievedUrl"],o);const i=Rt(t,["urlRetrievalStatus"]);return null!=i&&Dt(n,["urlRetrievalStatus"],i),n}(0,e)))),Dt(n,["urlMetadata"],e)}return n}(0,a));const l=Rt(t,["avgLogprobs"]);null!=l&&Dt(n,["avgLogprobs"],l);const c=Rt(t,["groundingMetadata"]);null!=c&&Dt(n,["groundingMetadata"],c);const u=Rt(t,["index"]);null!=u&&Dt(n,["index"],u);const d=Rt(t,["logprobsResult"]);null!=d&&Dt(n,["logprobsResult"],d);const p=Rt(t,["safetyRatings"]);return null!=p&&Dt(n,["safetyRatings"],p),n}function Oi(e,t){const n={},o=Rt(t,["candidates"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ti(0,e)))),Dt(n,["candidates"],e)}const i=Rt(t,["createTime"]);null!=i&&Dt(n,["createTime"],i);const r=Rt(t,["responseId"]);null!=r&&Dt(n,["responseId"],r);const s=Rt(t,["modelVersion"]);null!=s&&Dt(n,["modelVersion"],s);const a=Rt(t,["promptFeedback"]);null!=a&&Dt(n,["promptFeedback"],a);const l=Rt(t,["usageMetadata"]);return null!=l&&Dt(n,["usageMetadata"],l),n}function Si(e,t){const n={},o=Rt(t,["predictions[]","embeddings"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["values"]);null!=o&&Dt(n,["values"],o);const i=Rt(t,["statistics"]);return null!=i&&Dt(n,["statistics"],function(e,t){const n={},o=Rt(t,["truncated"]);null!=o&&Dt(n,["truncated"],o);const i=Rt(t,["token_count"]);return null!=i&&Dt(n,["tokenCount"],i),n}(0,i)),n}(0,e)))),Dt(n,["embeddings"],e)}const i=Rt(t,["metadata"]);return null!=i&&Dt(n,["metadata"],function(e,t){const n={},o=Rt(t,["billableCharacterCount"]);return null!=o&&Dt(n,["billableCharacterCount"],o),n}(0,i)),n}function xi(e,t){const n={},o=Rt(t,["safetyAttributes","categories"]);null!=o&&Dt(n,["categories"],o);const i=Rt(t,["safetyAttributes","scores"]);null!=i&&Dt(n,["scores"],i);const r=Rt(t,["contentType"]);return null!=r&&Dt(n,["contentType"],r),n}function Ai(e,t){const n={},o=Rt(t,["_self"]);null!=o&&Dt(n,["image"],function(e,t){const n={},o=Rt(t,["gcsUri"]);null!=o&&Dt(n,["gcsUri"],o);const i=Rt(t,["bytesBase64Encoded"]);null!=i&&Dt(n,["imageBytes"],lo(0,i));const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,o));const i=Rt(t,["raiFilteredReason"]);null!=i&&Dt(n,["raiFilteredReason"],i);const r=Rt(t,["_self"]);null!=r&&Dt(n,["safetyAttributes"],xi(0,r));const s=Rt(t,["prompt"]);return null!=s&&Dt(n,["enhancedPrompt"],s),n}function Ii(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["displayName"]);null!=i&&Dt(n,["displayName"],i);const r=Rt(t,["description"]);null!=r&&Dt(n,["description"],r);const s=Rt(t,["versionId"]);null!=s&&Dt(n,["version"],s);const a=Rt(t,["deployedModels"]);if(null!=a){let e=a;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["endpoint"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["deployedModelId"]);return null!=i&&Dt(n,["deployedModelId"],i),n}(0,e)))),Dt(n,["endpoints"],e)}const l=Rt(t,["labels"]);null!=l&&Dt(n,["labels"],l);const c=Rt(t,["_self"]);null!=c&&Dt(n,["tunedModelInfo"],function(e,t){const n={},o=Rt(t,["labels","google-vertex-llm-tuning-base-model-id"]);null!=o&&Dt(n,["baseModel"],o);const i=Rt(t,["createTime"]);null!=i&&Dt(n,["createTime"],i);const r=Rt(t,["updateTime"]);return null!=r&&Dt(n,["updateTime"],r),n}(0,c));const u=Rt(t,["defaultCheckpointId"]);null!=u&&Dt(n,["defaultCheckpointId"],u);const d=Rt(t,["checkpoints"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["checkpointId"]);null!=o&&Dt(n,["checkpointId"],o);const i=Rt(t,["epoch"]);null!=i&&Dt(n,["epoch"],i);const r=Rt(t,["step"]);return null!=r&&Dt(n,["step"],r),n}(0,e)))),Dt(n,["checkpoints"],e)}return n}function Ni(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["metadata"]);null!=i&&Dt(n,["metadata"],i);const r=Rt(t,["done"]);null!=r&&Dt(n,["done"],r);const s=Rt(t,["error"]);null!=s&&Dt(n,["error"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],function(e,t){const n={},o=Rt(t,["videos"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["_self"]);return null!=o&&Dt(n,["video"],function(e,t){const n={},o=Rt(t,["gcsUri"]);null!=o&&Dt(n,["uri"],o);const i=Rt(t,["bytesBase64Encoded"]);null!=i&&Dt(n,["videoBytes"],lo(0,i));const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,o)),n}(0,e)))),Dt(n,["generatedVideos"],e)}const i=Rt(t,["raiMediaFilteredCount"]);null!=i&&Dt(n,["raiMediaFilteredCount"],i);const r=Rt(t,["raiMediaFilteredReasons"]);return null!=r&&Dt(n,["raiMediaFilteredReasons"],r),n}(0,a)),n}const ki="x-goog-api-client",Pi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Di extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ClientError"}}class Ri extends Error{constructor(e,t){super(e,t?{cause:t}:{cause:(new Error).stack}),this.message=e,this.name="ServerError"}}class Mi{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const o=[this.getRequestUrlInternal(t)];return n&&o.push(this.getBaseResourcePath()),""!==e&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[t,n]of Object.entries(e.queryParams))o.searchParams.append(t,String(n));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[e,o]of Object.entries(t))"object"==typeof o?n[e]=Object.assign(Object.assign({},n[e]),o):void 0!==o&&(n[e]=o);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,n);o.searchParams.has("alt")&&"sse"===o.searchParams.get("alt")||o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const o=new AbortController,i=o.signal;t.timeout&&(null==t?void 0:t.timeout)>0&&setTimeout((()=>o.abort()),t.timeout),n&&n.addEventListener("abort",(()=>{o.abort()})),e.signal=i}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await ji(e),new Rn(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then((async e=>(await ji(e),this.processStreamResponse(e)))).catch((e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))}))}processStreamResponse(e){var t;return Io(this,arguments,(function*(){const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:r}=yield Ao(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const s=o.decode(r);try{const e=JSON.parse(s);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,o=t.code,i=`got status: ${n}. ${JSON.stringify(e)}`;if(o>=400&&o<500)throw new Di(i);if(o>=500&&o<600)throw new Ri(i)}}catch(e){const t=e;if("ClientError"===t.name||"ServerError"===t.name)throw e}t+=s;let a=t.match(Pi);for(;a;){const n=a[1];try{const o=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield Ao(new Rn(o)),t=t.slice(a[0].length),a=t.match(Pi)}catch(e){throw new Error(`exception parsing stream chunk ${n}. ${e}`)}}}}finally{n.releaseLock()}}))}async apiCall(e,t){return fetch(e,t).catch((e=>{throw new Error(`exception ${e} sending request`)}))}getDefaultHeaders(){const e={},t="google-genai-sdk/1.5.1 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[ki]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,o]of Object.entries(e.headers))t.append(n,o);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const o={};null!=t&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,r=await i.stat(e);o.sizeBytes=String(r.size);const s=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:r.type;if(void 0===s||""===s)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=s;const a=await this.fetchUploadUrl(o,t);return i.upload(e,a,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t){var n;let o={};o=(null==t?void 0:t.httpOptions)?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},r=await this.request({path:Pt("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:o});if(!r||!(null==r?void 0:r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const s=null===(n=null==r?void 0:r.headers)||void 0===n?void 0:n["x-goog-upload-url"];if(void 0===s)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return s}}async function ji(e){var t;if(void 0===e)throw new Ri("response is undefined");if(!e.ok){const n=e.status,o=e.statusText;let i;i=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const r=`got status: ${n} ${o}. ${JSON.stringify(i)}`;if(n>=400&&n<500)throw new Di(r);if(n>=500&&n<600)throw new Ri(r);throw new Error(r)}}function Ui(e){for(const t of e){if(Fi(t))return!0;if("object"==typeof t&&"inputSchema"in t)return!0}return!1}function Li(e){var t;const n=null!==(t=e[ki])&&void 0!==t?t:"";e[ki]=(n+" mcp_used/unknown").trimStart()}function Fi(e){return null!==e&&"object"==typeof e&&e instanceof Vi}function Gi(e,t=100){return Io(this,arguments,(function*(){let n,o=0;for(;o<t;){const t=yield Ao(e.listTools({cursor:n}));for(const e of t.tools)yield yield Ao(e),o++;if(!t.nextCursor)break;n=t.nextCursor}}))}class Vi{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Vi(e,t)}async initialize(){var e,t,n,o;if(this.mcpTools.length>0)return;const i={},r=[];for(const c of this.mcpClients)try{for(var s,a=!0,l=(t=void 0,No(Gi(c)));!(e=(s=await l.next()).done);a=!0){o=s.value,a=!1;const e=o;r.push(e);const t=e.name;if(i[t])throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);i[t]=c}}catch(e){t={error:e}}finally{try{a||e||!(n=l.return)||await n.call(l)}finally{if(t)throw t.error}}this.mcpTools=r,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e,t={}){const n=[],o=new Set;for(const i of e){const e=i.name;if(o.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);o.add(e);const r=mo(i,t);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const i=await e.callTool({name:n.name,arguments:n.args},void 0,o);t.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return t}}class qi{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),r=function(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}(this.apiClient.getDefaultHeaders()),s=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let a=()=>{};const l=new Promise((e=>{a=e})),c=e.callbacks,u=(this.apiClient,{onopen:function(){a({})},onmessage:e=>{!async function(e,t,n){const o=new Ln;let i;i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data);const r=ri(0,i);Object.assign(o,r),t(o)}(0,c.onmessage,e)},onerror:null!==(t=null==c?void 0:c.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==c?void 0:c.onclose)&&void 0!==n?n:function(e){}}),d=this.webSocketFactory.create(s,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(r),u);d.connect(),await l;const p=Fn(this.apiClient,e.model),m=Ko(this.apiClient,{model:p}),f=$o(this.apiClient,{setup:m});return d.send(JSON.stringify(f)),new Ji(d,this.apiClient)}}class Ji{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e,t){const n={},o=Rt(t,["weightedPrompts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ho(0,e)))),Dt(n,["weightedPrompts"],e)}return n}(this.apiClient,e),n=Yo(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e,t){const n={},o=Rt(t,["musicGenerationConfig"]);return null!=o&&Dt(n,["musicGenerationConfig"],Zo(0,o)),n}(this.apiClient,e),n=$o(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=$o(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(_n.PLAY)}pause(){this.sendPlaybackControl(_n.PAUSE)}stop(){this.sendPlaybackControl(_n.STOP)}resetContext(){this.sendPlaybackControl(_n.RESET_CONTEXT)}close(){this.conn.close()}}class Bi{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new qi(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,o,i,r,s;const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let c;const u=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&Ui(e.config.tools)&&Li(u);const d=function(e){const t=new Headers;for(const[n,o]of Object.entries(e))t.append(n,o);return t}(u);if(this.apiClient.isVertexAI())c=`${a}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),t="BidiGenerateContentConstrained",n="access_token"),c=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.${t}?${n}=${e}`}let p=()=>{};const m=new Promise((e=>{p=e})),f=e.callbacks,h=this.apiClient,g={onopen:function(){var e;null===(e=null==f?void 0:f.onopen)||void 0===e||e.call(f),p({})},onmessage:e=>{!async function(e,t,n){const o=new Un;let i;if(i=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),e.isVertexAI()){const e=oi(0,i);Object.assign(o,e)}else{const e=ni(0,i);Object.assign(o,e)}t(o)}(h,f.onmessage,e)},onerror:null!==(t=null==f?void 0:f.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==f?void 0:f.onclose)&&void 0!==n?n:function(e){}},y=this.webSocketFactory.create(c,function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(d),g);y.connect(),await m;let v=Fn(this.apiClient,e.model);this.apiClient.isVertexAI()&&v.startsWith("publishers/")&&(v=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+v);let b={};this.apiClient.isVertexAI()&&void 0===(null===(o=e.config)||void 0===o?void 0:o.responseModalities)&&(void 0===e.config?e.config={responseModalities:[Yt.AUDIO]}:e.config.responseModalities=[Yt.AUDIO]),(null===(i=e.config)||void 0===i?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=null!==(s=null===(r=e.config)||void 0===r?void 0:r.tools)&&void 0!==s?s:[],C=[];for(const e of _)if(this.isCallableTool(e)){const t=e;C.push(await t.tool())}else C.push(e);C.length>0&&(e.config.tools=C);const E={model:v,config:e.config,callbacks:e.callbacks};return b=this.apiClient.isVertexAI()?function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["setup","model"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],qo(0,i,n)),n}(this.apiClient,E):function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["setup","model"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],Vo(0,i,n)),n}(this.apiClient,E),delete b.config,y.send(JSON.stringify(b)),new Zi(y,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const Hi={turnComplete:!0};class Zi{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=Wn(0,t.turns),n=e.isVertexAI()?n.map((e=>pi(0,e))):n.map((e=>si(0,e)))}catch(e){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const t of n){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw new Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Hi),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:Bo(this.apiClient,e)}:{realtimeInput:Jo(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Ki(e){var t,n,o;if(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let i=!1;for(const t of null!==(n=null==e?void 0:e.tools)&&void 0!==n?n:[])if(Yi(t)){i=!0;break}if(!i)return!0;const r=null===(o=null==e?void 0:e.automaticFunctionCalling)||void 0===o?void 0:o.maximumRemoteCalls;return!!(r&&(r<0||!Number.isInteger(r))||0==r)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0)}function Yi(e){return"callTool"in e&&"function"==typeof e.callTool}function $i(e){var t;return!(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}class Wi extends kt{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,o,i,r;const s=await this.processParamsForMcpUsage(e);if(!function(e){var t,n,o;return null!==(o=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some((e=>Fi(e))))&&void 0!==o&&o}(e)||Ki(e.config))return await this.generateContentInternal(s);if(function(e){var t,n,o;return null!==(o=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some((e=>!Fi(e))))&&void 0!==o&&o}(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let a,l;const c=Wn(this.apiClient,s.contents),u=null!==(o=null===(n=null===(t=s.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==o?o:10;let d=0;for(;d<u&&(a=await this.generateContentInternal(s),a.functionCalls&&0!==a.functionCalls.length);){const t=a.candidates[0].content,n=[];for(const t of null!==(r=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==r?r:[])if(Yi(t)){const e=t,o=await e.callTool(a.functionCalls);n.push(...o)}d++,l={role:"user",parts:n},s.contents=Wn(this.apiClient,s.contents),s.contents.push(t),s.contents.push(l),$i(s.config)&&(c.push(t),c.push(l))}return $i(s.config)&&(a.automaticFunctionCallingHistory=c),a},this.generateContentStream=async e=>{if(Ki(e.config)){const t=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(t)}return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then((e=>{var t;let n;const o=[];if(null==e?void 0:e.generatedImages)for(const i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&"Positive Prompt"===(null===(t=null==i?void 0:i.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==i?void 0:i.safetyAttributes:o.push(i);let i;return i=n?{generatedImages:o,positivePromptSafetyAttributes:n}:{generatedImages:o},i})),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new So(Oo.PAGED_ITEM_MODELS,(e=>this.listInternal(e)),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map((e=>e.toReferenceImageAPI()))),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)}}async processParamsForMcpUsage(e){var t,n,o;const i=null===(t=e.config)||void 0===t?void 0:t.tools;if(!i)return e;const r=await Promise.all(i.map((async e=>{if(Yi(e)){const t=e;return await t.tool()}return e}))),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(s.config.tools=r,e.config&&e.config.tools&&Ui(e.config.tools)){const t=null!==(o=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==o?o:{};let i=Object.assign({},t);0===Object.keys(i).length&&(i=this.apiClient.getDefaultHeaders()),Li(i),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:i})}return s}async initAfcToolsMap(e){var t,n,o;const i=new Map;for(const r of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Yi(r)){const e=r,t=await e.tool();for(const n of null!==(o=t.functionDeclarations)&&void 0!==o?o:[]){if(!n.name)throw new Error("Function declaration name is required.");if(i.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);i.set(n.name,e)}}return i}async processAfcStream(e){var t,n,o;const i=null!==(o=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==o?o:10;let r=!1,s=0;return function(e,t,n){var o,a;return Io(this,arguments,(function*(){for(var l,c,u,d;s<i;){r&&(s++,r=!1);const h=yield Ao(e.processParamsForMcpUsage(n)),g=yield Ao(e.generateContentStreamInternal(h)),y=[],v=[];try{for(var p,m=!0,f=(c=void 0,No(g));!(l=(p=yield Ao(f.next())).done);m=!0){d=p.value,m=!1;const e=d;if(yield yield Ao(e),e.candidates&&(null===(o=e.candidates[0])||void 0===o?void 0:o.content)){v.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(s<i&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${n.functionCall.name}`);{const e=yield Ao(t.get(n.functionCall.name).callTool([n.functionCall]));y.push(...e)}}}}}catch(e){c={error:e}}finally{try{m||l||!(u=f.return)||(yield Ao(u.call(f)))}finally{if(c)throw c.error}}if(!(y.length>0))break;{r=!0;const t=new Cn;t.candidates=[{content:{role:"user",parts:y}}],yield yield Ao(t);const o=[];o.push(...v),o.push({role:"user",parts:y});const i=Wn(e.apiClient,n.contents).concat(o);n.contents=i}}}))}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=gi(this.apiClient,e);return s=Pt("{model}:generateContent",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=Oi(this.apiClient,e),n=new Cn;return Object.assign(n,t),n}))}{const t=di(this.apiClient,e);return s=Pt("{model}:generateContent",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=_i(this.apiClient,e),n=new Cn;return Object.assign(n,t),n}))}}async generateContentStreamInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=gi(this.apiClient,e);s=Pt("{model}:streamGenerateContent?alt=sse",o._url),a=o._query,delete o.config,delete o._url,delete o._query;return r=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),r.then((function(e){return Io(this,arguments,(function*(){var t,n,o,i;try{for(var r,s=!0,a=No(e);!(t=(r=yield Ao(a.next())).done);s=!0){i=r.value,s=!1;const e=i,t=Oi(0,yield Ao(e.json())),n=new Cn;Object.assign(n,t),yield yield Ao(n)}}catch(e){n={error:e}}finally{try{s||t||!(o=a.return)||(yield Ao(o.call(a)))}finally{if(n)throw n.error}}}))}))}{const t=di(this.apiClient,e);s=Pt("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t.config,delete t._url,delete t._query;return r=this.apiClient.requestStream({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}),r.then((function(e){return Io(this,arguments,(function*(){var t,n,o,i;try{for(var r,s=!0,a=No(e);!(t=(r=yield Ao(a.next())).done);s=!0){i=r.value,s=!1;const e=i,t=_i(0,yield Ao(e.json())),n=new Cn;Object.assign(n,t),yield yield Ao(n)}}catch(e){n={error:e}}finally{try{s||t||!(o=a.return)||(yield Ao(o.call(a)))}finally{if(n)throw n.error}}}))}))}}async embedContent(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);null!=i&&Dt(n,["instances[]","content"],$n(e,i));const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["taskType"]);void 0!==n&&null!=o&&Dt(n,["instances[]","task_type"],o);const i=Rt(t,["title"]);void 0!==n&&null!=i&&Dt(n,["instances[]","title"],i);const r=Rt(t,["outputDimensionality"]);void 0!==n&&null!=r&&Dt(n,["parameters","outputDimensionality"],r);const s=Rt(t,["mimeType"]);void 0!==n&&null!=s&&Dt(n,["instances[]","mimeType"],s);const a=Rt(t,["autoTruncate"]);return void 0!==n&&null!=a&&Dt(n,["parameters","autoTruncate"],a),{}}(0,r,n)),n}(this.apiClient,e);return s=Pt("{model}:predict",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=Si(this.apiClient,e),n=new En;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);null!=i&&Dt(n,["requests[]","content"],$n(e,i));const r=Rt(t,["config"]);null!=r&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["taskType"]);void 0!==n&&null!=o&&Dt(n,["requests[]","taskType"],o);const i=Rt(t,["title"]);void 0!==n&&null!=i&&Dt(n,["requests[]","title"],i);const r=Rt(t,["outputDimensionality"]);if(void 0!==n&&null!=r&&Dt(n,["requests[]","outputDimensionality"],r),void 0!==Rt(t,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==Rt(t,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return{}}(0,r,n));const s=Rt(t,["model"]);return void 0!==s&&Dt(n,["requests[]","model"],Fn(e,s)),n}(this.apiClient,e);return s=Pt("{model}:batchEmbedContents",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["embeddings"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["values"]);return null!=o&&Dt(n,["values"],o),n}(0,e)))),Dt(n,["embeddings"],e)}return null!=Rt(t,["metadata"])&&Dt(n,["metadata"],{}),n}(this.apiClient,e),n=new En;return Object.assign(n,t),n}))}}async generateImagesInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["prompt"]);null!=i&&Dt(n,["instances[0]","prompt"],i);const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["outputGcsUri"]);void 0!==n&&null!=o&&Dt(n,["parameters","storageUri"],o);const i=Rt(t,["negativePrompt"]);void 0!==n&&null!=i&&Dt(n,["parameters","negativePrompt"],i);const r=Rt(t,["numberOfImages"]);void 0!==n&&null!=r&&Dt(n,["parameters","sampleCount"],r);const s=Rt(t,["aspectRatio"]);void 0!==n&&null!=s&&Dt(n,["parameters","aspectRatio"],s);const a=Rt(t,["guidanceScale"]);void 0!==n&&null!=a&&Dt(n,["parameters","guidanceScale"],a);const l=Rt(t,["seed"]);void 0!==n&&null!=l&&Dt(n,["parameters","seed"],l);const c=Rt(t,["safetyFilterLevel"]);void 0!==n&&null!=c&&Dt(n,["parameters","safetySetting"],c);const u=Rt(t,["personGeneration"]);void 0!==n&&null!=u&&Dt(n,["parameters","personGeneration"],u);const d=Rt(t,["includeSafetyAttributes"]);void 0!==n&&null!=d&&Dt(n,["parameters","includeSafetyAttributes"],d);const p=Rt(t,["includeRaiReason"]);void 0!==n&&null!=p&&Dt(n,["parameters","includeRaiReason"],p);const m=Rt(t,["language"]);void 0!==n&&null!=m&&Dt(n,["parameters","language"],m);const f=Rt(t,["outputMimeType"]);void 0!==n&&null!=f&&Dt(n,["parameters","outputOptions","mimeType"],f);const h=Rt(t,["outputCompressionQuality"]);void 0!==n&&null!=h&&Dt(n,["parameters","outputOptions","compressionQuality"],h);const g=Rt(t,["addWatermark"]);void 0!==n&&null!=g&&Dt(n,["parameters","addWatermark"],g);const y=Rt(t,["enhancePrompt"]);return void 0!==n&&null!=y&&Dt(n,["parameters","enhancePrompt"],y),{}}(0,r,n)),n}(this.apiClient,e);return s=Pt("{model}:predict",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ai(0,e)))),Dt(n,["generatedImages"],e)}const i=Rt(t,["positivePromptSafetyAttributes"]);return null!=i&&Dt(n,["positivePromptSafetyAttributes"],xi(0,i)),n}(this.apiClient,e),n=new wn;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["prompt"]);null!=i&&Dt(n,["instances[0]","prompt"],i);const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){if(void 0!==Rt(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Rt(t,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=Rt(t,["numberOfImages"]);void 0!==n&&null!=o&&Dt(n,["parameters","sampleCount"],o);const i=Rt(t,["aspectRatio"]);void 0!==n&&null!=i&&Dt(n,["parameters","aspectRatio"],i);const r=Rt(t,["guidanceScale"]);if(void 0!==n&&null!=r&&Dt(n,["parameters","guidanceScale"],r),void 0!==Rt(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const s=Rt(t,["safetyFilterLevel"]);void 0!==n&&null!=s&&Dt(n,["parameters","safetySetting"],s);const a=Rt(t,["personGeneration"]);void 0!==n&&null!=a&&Dt(n,["parameters","personGeneration"],a);const l=Rt(t,["includeSafetyAttributes"]);void 0!==n&&null!=l&&Dt(n,["parameters","includeSafetyAttributes"],l);const c=Rt(t,["includeRaiReason"]);void 0!==n&&null!=c&&Dt(n,["parameters","includeRaiReason"],c);const u=Rt(t,["language"]);void 0!==n&&null!=u&&Dt(n,["parameters","language"],u);const d=Rt(t,["outputMimeType"]);void 0!==n&&null!=d&&Dt(n,["parameters","outputOptions","mimeType"],d);const p=Rt(t,["outputCompressionQuality"]);if(void 0!==n&&null!=p&&Dt(n,["parameters","outputOptions","compressionQuality"],p),void 0!==Rt(t,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==Rt(t,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(0,r,n)),n}(this.apiClient,e);return s=Pt("{model}:predict",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["_self"]);null!=o&&Dt(n,["image"],function(e,t){const n={},o=Rt(t,["bytesBase64Encoded"]);null!=o&&Dt(n,["imageBytes"],lo(0,o));const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,o));const i=Rt(t,["raiFilteredReason"]);null!=i&&Dt(n,["raiFilteredReason"],i);const r=Rt(t,["_self"]);return null!=r&&Dt(n,["safetyAttributes"],Ci(0,r)),n}(0,e)))),Dt(n,["generatedImages"],e)}const i=Rt(t,["positivePromptSafetyAttributes"]);return null!=i&&Dt(n,["positivePromptSafetyAttributes"],Ci(0,i)),n}(this.apiClient,e),n=new wn;return Object.assign(n,t),n}))}}async editImageInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI()){const s=vi(this.apiClient,e);return i=Pt("{model}:predict",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=function(e,t){const n={},o=Rt(t,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ai(0,e)))),Dt(n,["generatedImages"],e)}return n}(this.apiClient,e),n=new Tn;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["image"]);null!=i&&Dt(n,["instances[0]","image"],yi(0,i));const r=Rt(t,["upscaleFactor"]);null!=r&&Dt(n,["parameters","upscaleConfig","upscaleFactor"],r);const s=Rt(t,["config"]);return null!=s&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["includeRaiReason"]);void 0!==n&&null!=o&&Dt(n,["parameters","includeRaiReason"],o);const i=Rt(t,["outputMimeType"]);void 0!==n&&null!=i&&Dt(n,["parameters","outputOptions","mimeType"],i);const r=Rt(t,["outputCompressionQuality"]);void 0!==n&&null!=r&&Dt(n,["parameters","outputOptions","compressionQuality"],r);const s=Rt(t,["numberOfImages"]);void 0!==n&&null!=s&&Dt(n,["parameters","sampleCount"],s);const a=Rt(t,["mode"]);return void 0!==n&&null!=a&&Dt(n,["parameters","mode"],a),{}}(0,s,n)),n}(this.apiClient,e);return i=Pt("{model}:predict",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=function(e,t){const n={},o=Rt(t,["predictions"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>Ai(0,e)))),Dt(n,["generatedImages"],e)}return n}(this.apiClient,e),n=new On;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","name"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>Ii(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","name"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>Ei(this.apiClient,e)))}}async listInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i);const r=Rt(t,["filter"]);void 0!==n&&null!=r&&Dt(n,["_query","filter"],r);const s=Rt(t,["queryBase"]);return void 0!==n&&null!=s&&Dt(n,["_url","models_url"],uo(e,s)),{}}(e,o,n)),n}(this.apiClient,e);return s=Pt("{models_url}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["_self"]);if(null!=i){let e=po(0,i);Array.isArray(e)&&(e=e.map((e=>Ii(0,e)))),Dt(n,["models"],e)}return n}(this.apiClient,e),n=new Sn;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i);const r=Rt(t,["filter"]);void 0!==n&&null!=r&&Dt(n,["_query","filter"],r);const s=Rt(t,["queryBase"]);return void 0!==n&&null!=s&&Dt(n,["_url","models_url"],uo(e,s)),{}}(e,o,n)),n}(this.apiClient,e);return s=Pt("{models_url}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["_self"]);if(null!=i){let e=po(0,i);Array.isArray(e)&&(e=e.map((e=>Ei(0,e)))),Dt(n,["models"],e)}return n}(this.apiClient,e),n=new Sn;return Object.assign(n,t),n}))}}async update(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["displayName"]);void 0!==n&&null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["description"]);void 0!==n&&null!=i&&Dt(n,["description"],i);const r=Rt(t,["defaultCheckpointId"]);return void 0!==n&&null!=r&&Dt(n,["defaultCheckpointId"],r),{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("{model}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>Ii(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","name"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["displayName"]);void 0!==n&&null!=o&&Dt(n,["displayName"],o);const i=Rt(t,["description"]);void 0!==n&&null!=i&&Dt(n,["description"],i);const r=Rt(t,["defaultCheckpointId"]);return void 0!==n&&null!=r&&Dt(n,["defaultCheckpointId"],r),{}}(0,i,n)),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>Ei(this.apiClient,e)))}}async delete(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","name"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((()=>{const e=new xn;return Object.assign(e,{}),e}))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","name"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((()=>{const e=new xn;return Object.assign(e,{}),e}))}}async countTokens(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);if(null!=i){let e=Wn(0,i);Array.isArray(e)&&(e=e.map((e=>pi(0,e)))),Dt(n,["contents"],e)}const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["systemInstruction"]);void 0!==n&&null!=o&&Dt(n,["systemInstruction"],pi(0,Yn(0,o)));const i=Rt(t,["tools"]);if(void 0!==n&&null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>mi(0,e)))),Dt(n,["tools"],e)}const r=Rt(t,["generationConfig"]);return void 0!==n&&null!=r&&Dt(n,["generationConfig"],r),{}}(0,r,n)),n}(this.apiClient,e);return s=Pt("{model}:countTokens",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["totalTokens"]);return null!=o&&Dt(n,["totalTokens"],o),n}(this.apiClient,e),n=new An;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);if(null!=i){let e=Wn(0,i);Array.isArray(e)&&(e=e.map((e=>si(0,e)))),Dt(n,["contents"],e)}const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t){if(void 0!==Rt(t,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==Rt(t,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==Rt(t,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.");return{}}(0,r)),n}(this.apiClient,e);return s=Pt("{model}:countTokens",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["totalTokens"]);null!=o&&Dt(n,["totalTokens"],o);const i=Rt(t,["cachedContentTokenCount"]);return null!=i&&Dt(n,["cachedContentTokenCount"],i),n}(this.apiClient,e),n=new An;return Object.assign(n,t),n}))}}async computeTokens(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["contents"]);if(null!=i){let e=Wn(0,i);Array.isArray(e)&&(e=e.map((e=>pi(0,e)))),Dt(n,["contents"],e)}const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],r),n}(this.apiClient,e);return i=Pt("{model}:computeTokens",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>{const t=function(e,t){const n={},o=Rt(t,["tokensInfo"]);return null!=o&&Dt(n,["tokensInfo"],o),n}(this.apiClient,e),n=new In;return Object.assign(n,t),n}))}throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["prompt"]);null!=i&&Dt(n,["instances[0]","prompt"],i);const r=Rt(t,["image"]);null!=r&&Dt(n,["instances[0]","image"],yi(0,r));const s=Rt(t,["video"]);null!=s&&Dt(n,["instances[0]","video"],function(e,t){const n={},o=Rt(t,["uri"]);null!=o&&Dt(n,["gcsUri"],o);const i=Rt(t,["videoBytes"]);null!=i&&Dt(n,["bytesBase64Encoded"],lo(0,i));const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,s));const a=Rt(t,["config"]);return null!=a&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["numberOfVideos"]);void 0!==n&&null!=o&&Dt(n,["parameters","sampleCount"],o);const i=Rt(t,["outputGcsUri"]);void 0!==n&&null!=i&&Dt(n,["parameters","storageUri"],i);const r=Rt(t,["fps"]);void 0!==n&&null!=r&&Dt(n,["parameters","fps"],r);const s=Rt(t,["durationSeconds"]);void 0!==n&&null!=s&&Dt(n,["parameters","durationSeconds"],s);const a=Rt(t,["seed"]);void 0!==n&&null!=a&&Dt(n,["parameters","seed"],a);const l=Rt(t,["aspectRatio"]);void 0!==n&&null!=l&&Dt(n,["parameters","aspectRatio"],l);const c=Rt(t,["resolution"]);void 0!==n&&null!=c&&Dt(n,["parameters","resolution"],c);const u=Rt(t,["personGeneration"]);void 0!==n&&null!=u&&Dt(n,["parameters","personGeneration"],u);const d=Rt(t,["pubsubTopic"]);void 0!==n&&null!=d&&Dt(n,["parameters","pubsubTopic"],d);const p=Rt(t,["negativePrompt"]);void 0!==n&&null!=p&&Dt(n,["parameters","negativePrompt"],p);const m=Rt(t,["enhancePrompt"]);void 0!==n&&null!=m&&Dt(n,["parameters","enhancePrompt"],m);const f=Rt(t,["generateAudio"]);void 0!==n&&null!=f&&Dt(n,["parameters","generateAudio"],f);const h=Rt(t,["lastFrame"]);return void 0!==n&&null!=h&&Dt(n,["instances[0]","lastFrame"],yi(0,h)),{}}(0,a,n)),n}(this.apiClient,e);return s=Pt("{model}:predictLongRunning",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>Ni(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["_url","model"],Fn(e,o));const i=Rt(t,["prompt"]);null!=i&&Dt(n,["instances[0]","prompt"],i);const r=Rt(t,["image"]);if(null!=r&&Dt(n,["instances[0]","image"],function(e,t){const n={};if(void 0!==Rt(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const o=Rt(t,["imageBytes"]);null!=o&&Dt(n,["bytesBase64Encoded"],lo(0,o));const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r)),void 0!==Rt(t,["video"]))throw new Error("video parameter is not supported in Gemini API.");const s=Rt(t,["config"]);return null!=s&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["numberOfVideos"]);if(void 0!==n&&null!=o&&Dt(n,["parameters","sampleCount"],o),void 0!==Rt(t,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==Rt(t,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const i=Rt(t,["durationSeconds"]);if(void 0!==n&&null!=i&&Dt(n,["parameters","durationSeconds"],i),void 0!==Rt(t,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const r=Rt(t,["aspectRatio"]);if(void 0!==n&&null!=r&&Dt(n,["parameters","aspectRatio"],r),void 0!==Rt(t,["resolution"]))throw new Error("resolution parameter is not supported in Gemini API.");const s=Rt(t,["personGeneration"]);if(void 0!==n&&null!=s&&Dt(n,["parameters","personGeneration"],s),void 0!==Rt(t,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=Rt(t,["negativePrompt"]);void 0!==n&&null!=a&&Dt(n,["parameters","negativePrompt"],a);const l=Rt(t,["enhancePrompt"]);if(void 0!==n&&null!=l&&Dt(n,["parameters","enhancePrompt"],l),void 0!==Rt(t,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");if(void 0!==Rt(t,["lastFrame"]))throw new Error("lastFrame parameter is not supported in Gemini API.");return{}}(0,s,n)),n}(this.apiClient,e);return s=Pt("{model}:predictLongRunning",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>wi(this.apiClient,e)))}}}function zi(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["metadata"]);null!=i&&Dt(n,["metadata"],i);const r=Rt(t,["done"]);null!=r&&Dt(n,["done"],r);const s=Rt(t,["error"]);null!=s&&Dt(n,["error"],s);const a=Rt(t,["response","generateVideoResponse"]);return null!=a&&Dt(n,["response"],function(e,t){const n={},o=Rt(t,["generatedSamples"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["_self"]);return null!=o&&Dt(n,["video"],function(e,t){const n={},o=Rt(t,["video","uri"]);null!=o&&Dt(n,["uri"],o);const i=Rt(t,["video","encodedVideo"]);null!=i&&Dt(n,["videoBytes"],lo(0,i));const r=Rt(t,["encoding"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,o)),n}(0,e)))),Dt(n,["generatedVideos"],e)}const i=Rt(t,["raiMediaFilteredCount"]);null!=i&&Dt(n,["raiMediaFilteredCount"],i);const r=Rt(t,["raiMediaFilteredReasons"]);return null!=r&&Dt(n,["raiMediaFilteredReasons"],r),n}(0,a)),n}function Xi(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["metadata"]);null!=i&&Dt(n,["metadata"],i);const r=Rt(t,["done"]);null!=r&&Dt(n,["done"],r);const s=Rt(t,["error"]);null!=s&&Dt(n,["error"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],function(e,t){const n={},o=Rt(t,["videos"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["_self"]);return null!=o&&Dt(n,["video"],function(e,t){const n={},o=Rt(t,["gcsUri"]);null!=o&&Dt(n,["uri"],o);const i=Rt(t,["bytesBase64Encoded"]);null!=i&&Dt(n,["videoBytes"],lo(0,i));const r=Rt(t,["mimeType"]);return null!=r&&Dt(n,["mimeType"],r),n}(0,o)),n}(0,e)))),Dt(n,["generatedVideos"],e)}const i=Rt(t,["raiMediaFilteredCount"]);null!=i&&Dt(n,["raiMediaFilteredCount"],i);const r=Rt(t,["raiMediaFilteredReasons"]);return null!=r&&Dt(n,["raiMediaFilteredReasons"],r),n}(0,a)),n}class Qi extends kt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let o;return n&&"httpOptions"in n&&(o=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:o}})}return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["operationName"]);null!=o&&Dt(n,["_url","operationName"],o);const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{operationName}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>Xi(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["operationName"]);null!=o&&Dt(n,["_url","operationName"],o);const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{operationName}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>zi(this.apiClient,e)))}}async fetchPredictVideosOperationInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI()){const s=function(e,t){const n={},o=Rt(t,["operationName"]);null!=o&&Dt(n,["operationName"],o);const i=Rt(t,["resourceName"]);null!=i&&Dt(n,["_url","resourceName"],i);const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],r),n}(this.apiClient,e);return i=Pt("{resourceName}:fetchPredictOperation",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>Xi(this.apiClient,e)))}throw new Error("This method is only supported by the Vertex AI.")}}function er(e,t){const n={},o=Rt(t,["prebuiltVoiceConfig"]);return null!=o&&Dt(n,["prebuiltVoiceConfig"],function(e,t){const n={},o=Rt(t,["voiceName"]);return null!=o&&Dt(n,["voiceName"],o),n}(0,o)),n}function tr(e,t){const n={},o=Rt(t,["functionDeclarations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["behavior"]);null!=o&&Dt(n,["behavior"],o);const i=Rt(t,["description"]);null!=i&&Dt(n,["description"],i);const r=Rt(t,["name"]);null!=r&&Dt(n,["name"],r);const s=Rt(t,["parameters"]);null!=s&&Dt(n,["parameters"],s);const a=Rt(t,["response"]);return null!=a&&Dt(n,["response"],a),n}(0,e)))),Dt(n,["functionDeclarations"],e)}if(void 0!==Rt(t,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const i=Rt(t,["googleSearch"]);null!=i&&Dt(n,["googleSearch"],function(e,t){const n={},o=Rt(t,["timeRangeFilter"]);return null!=o&&Dt(n,["timeRangeFilter"],function(e,t){const n={},o=Rt(t,["startTime"]);null!=o&&Dt(n,["startTime"],o);const i=Rt(t,["endTime"]);return null!=i&&Dt(n,["endTime"],i),n}(0,o)),n}(0,i));const r=Rt(t,["googleSearchRetrieval"]);if(null!=r&&Dt(n,["googleSearchRetrieval"],function(e,t){const n={},o=Rt(t,["dynamicRetrievalConfig"]);return null!=o&&Dt(n,["dynamicRetrievalConfig"],function(e,t){const n={},o=Rt(t,["mode"]);null!=o&&Dt(n,["mode"],o);const i=Rt(t,["dynamicThreshold"]);return null!=i&&Dt(n,["dynamicThreshold"],i),n}(0,o)),n}(0,r)),void 0!==Rt(t,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==Rt(t,["googleMaps"]))throw new Error("googleMaps parameter is not supported in Gemini API.");null!=Rt(t,["urlContext"])&&Dt(n,["urlContext"],{});const s=Rt(t,["codeExecution"]);return null!=s&&Dt(n,["codeExecution"],s),n}function nr(e,t,n){const o=Rt(t,["generationConfig"]);void 0!==n&&null!=o&&Dt(n,["setup","generationConfig"],o);const i=Rt(t,["responseModalities"]);void 0!==n&&null!=i&&Dt(n,["setup","generationConfig","responseModalities"],i);const r=Rt(t,["temperature"]);void 0!==n&&null!=r&&Dt(n,["setup","generationConfig","temperature"],r);const s=Rt(t,["topP"]);void 0!==n&&null!=s&&Dt(n,["setup","generationConfig","topP"],s);const a=Rt(t,["topK"]);void 0!==n&&null!=a&&Dt(n,["setup","generationConfig","topK"],a);const l=Rt(t,["maxOutputTokens"]);void 0!==n&&null!=l&&Dt(n,["setup","generationConfig","maxOutputTokens"],l);const c=Rt(t,["mediaResolution"]);void 0!==n&&null!=c&&Dt(n,["setup","generationConfig","mediaResolution"],c);const u=Rt(t,["seed"]);void 0!==n&&null!=u&&Dt(n,["setup","generationConfig","seed"],u);const d=Rt(t,["speechConfig"]);void 0!==n&&null!=d&&Dt(n,["setup","generationConfig","speechConfig"],function(e,t){const n={},o=Rt(t,["voiceConfig"]);null!=o&&Dt(n,["voiceConfig"],er(0,o));const i=Rt(t,["multiSpeakerVoiceConfig"]);null!=i&&Dt(n,["multiSpeakerVoiceConfig"],function(e,t){const n={},o=Rt(t,["speakerVoiceConfigs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["speaker"]);null!=o&&Dt(n,["speaker"],o);const i=Rt(t,["voiceConfig"]);return null!=i&&Dt(n,["voiceConfig"],er(0,i)),n}(0,e)))),Dt(n,["speakerVoiceConfigs"],e)}return n}(0,i));const r=Rt(t,["languageCode"]);return null!=r&&Dt(n,["languageCode"],r),n}(0,oo(0,d)));const p=Rt(t,["enableAffectiveDialog"]);void 0!==n&&null!=p&&Dt(n,["setup","generationConfig","enableAffectiveDialog"],p);const m=Rt(t,["systemInstruction"]);void 0!==n&&null!=m&&Dt(n,["setup","systemInstruction"],function(e,t){const n={},o=Rt(t,["parts"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["videoMetadata"]);null!=o&&Dt(n,["videoMetadata"],function(e,t){const n={},o=Rt(t,["fps"]);null!=o&&Dt(n,["fps"],o);const i=Rt(t,["endOffset"]);null!=i&&Dt(n,["endOffset"],i);const r=Rt(t,["startOffset"]);return null!=r&&Dt(n,["startOffset"],r),n}(0,o));const i=Rt(t,["thought"]);null!=i&&Dt(n,["thought"],i);const r=Rt(t,["inlineData"]);null!=r&&Dt(n,["inlineData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["data"]);null!=o&&Dt(n,["data"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,r));const s=Rt(t,["fileData"]);null!=s&&Dt(n,["fileData"],function(e,t){const n={};if(void 0!==Rt(t,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const o=Rt(t,["fileUri"]);null!=o&&Dt(n,["fileUri"],o);const i=Rt(t,["mimeType"]);return null!=i&&Dt(n,["mimeType"],i),n}(0,s));const a=Rt(t,["thoughtSignature"]);null!=a&&Dt(n,["thoughtSignature"],a);const l=Rt(t,["codeExecutionResult"]);null!=l&&Dt(n,["codeExecutionResult"],l);const c=Rt(t,["executableCode"]);null!=c&&Dt(n,["executableCode"],c);const u=Rt(t,["functionCall"]);null!=u&&Dt(n,["functionCall"],u);const d=Rt(t,["functionResponse"]);null!=d&&Dt(n,["functionResponse"],d);const p=Rt(t,["text"]);return null!=p&&Dt(n,["text"],p),n}(0,e)))),Dt(n,["parts"],e)}const i=Rt(t,["role"]);return null!=i&&Dt(n,["role"],i),n}(0,Yn(0,m)));const f=Rt(t,["tools"]);if(void 0!==n&&null!=f){let e=ro(0,f);Array.isArray(e)&&(e=e.map((e=>tr(0,io(0,e))))),Dt(n,["setup","tools"],e)}const h=Rt(t,["sessionResumption"]);void 0!==n&&null!=h&&Dt(n,["setup","sessionResumption"],function(e,t){const n={},o=Rt(t,["handle"]);if(null!=o&&Dt(n,["handle"],o),void 0!==Rt(t,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return n}(0,h));const g=Rt(t,["inputAudioTranscription"]);void 0!==n&&null!=g&&Dt(n,["setup","inputAudioTranscription"],{});const y=Rt(t,["outputAudioTranscription"]);void 0!==n&&null!=y&&Dt(n,["setup","outputAudioTranscription"],{});const v=Rt(t,["realtimeInputConfig"]);void 0!==n&&null!=v&&Dt(n,["setup","realtimeInputConfig"],function(e,t){const n={},o=Rt(t,["automaticActivityDetection"]);null!=o&&Dt(n,["automaticActivityDetection"],function(e,t){const n={},o=Rt(t,["disabled"]);null!=o&&Dt(n,["disabled"],o);const i=Rt(t,["startOfSpeechSensitivity"]);null!=i&&Dt(n,["startOfSpeechSensitivity"],i);const r=Rt(t,["endOfSpeechSensitivity"]);null!=r&&Dt(n,["endOfSpeechSensitivity"],r);const s=Rt(t,["prefixPaddingMs"]);null!=s&&Dt(n,["prefixPaddingMs"],s);const a=Rt(t,["silenceDurationMs"]);return null!=a&&Dt(n,["silenceDurationMs"],a),n}(0,o));const i=Rt(t,["activityHandling"]);null!=i&&Dt(n,["activityHandling"],i);const r=Rt(t,["turnCoverage"]);return null!=r&&Dt(n,["turnCoverage"],r),n}(0,v));const b=Rt(t,["contextWindowCompression"]);void 0!==n&&null!=b&&Dt(n,["setup","contextWindowCompression"],function(e,t){const n={},o=Rt(t,["triggerTokens"]);null!=o&&Dt(n,["triggerTokens"],o);const i=Rt(t,["slidingWindow"]);return null!=i&&Dt(n,["slidingWindow"],function(e,t){const n={},o=Rt(t,["targetTokens"]);return null!=o&&Dt(n,["targetTokens"],o),n}(0,i)),n}(0,b));const _=Rt(t,["proactivity"]);return void 0!==n&&null!=_&&Dt(n,["setup","proactivity"],function(e,t){const n={},o=Rt(t,["proactiveAudio"]);return null!=o&&Dt(n,["proactiveAudio"],o),n}(0,_)),{}}class or extends kt{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["expireTime"]);void 0!==n&&null!=o&&Dt(n,["expireTime"],o);const i=Rt(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&Dt(n,["newSessionExpireTime"],i);const r=Rt(t,["uses"]);void 0!==n&&null!=r&&Dt(n,["uses"],r);const s=Rt(t,["liveConnectConstraints"]);void 0!==n&&null!=s&&Dt(n,["bidiGenerateContentSetup"],function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["setup","model"],Fn(e,o));const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],nr(0,i,n)),n}(e,s));const a=Rt(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&Dt(n,["fieldMask"],a),{}}(e,o,n)),n}(this.apiClient,e);i=Pt("auth_tokens",s._url),r=s._query,delete s.config,delete s._url,delete s._query;const a=function(e,t){let n=null;const o=e.bidiGenerateContentSetup;if("object"==typeof o&&null!==o&&"setup"in o){const t=o.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==o&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const o=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n];if("object"==typeof o&&null!=o&&Object.keys(o).length>0){const e=Object.keys(o).map((e=>`${n}.${e}`));t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&0===(null==t?void 0:t.lockAdditionalFields.length))o?e.fieldMask=o:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];i.length>0&&(n=i.map((e=>t.includes(e)?`generationConfig.${e}`:e)));const r=[];o&&r.push(o),n.length>0&&r.push(...n),r.length>0?e.fieldMask=r.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}(s,e.config);return o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>function(e,t){const n={},o=Rt(t,["name"]);return null!=o&&Dt(n,["name"],o),n}(this.apiClient,e)))}}}function ir(e,t){const n={},o=Rt(t,["baseModel"]);null!=o&&Dt(n,["baseModel"],o);const i=Rt(t,["trainingDataset"]);null!=i&&Dt(n,["tuningTask","trainingData"],function(e,t){const n={};if(void 0!==Rt(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const o=Rt(t,["examples"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["textInput"]);null!=o&&Dt(n,["textInput"],o);const i=Rt(t,["output"]);return null!=i&&Dt(n,["output"],i),n}(0,e)))),Dt(n,["examples","examples"],e)}return n}(0,i));const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){const o={};if(void 0!==Rt(t,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const i=Rt(t,["tunedModelDisplayName"]);if(void 0!==n&&null!=i&&Dt(n,["displayName"],i),void 0!==Rt(t,["description"]))throw new Error("description parameter is not supported in Gemini API.");const r=Rt(t,["epochCount"]);void 0!==n&&null!=r&&Dt(n,["tuningTask","hyperparameters","epochCount"],r);const s=Rt(t,["learningRateMultiplier"]);if(null!=s&&Dt(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),void 0!==Rt(t,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==Rt(t,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const a=Rt(t,["batchSize"]);void 0!==n&&null!=a&&Dt(n,["tuningTask","hyperparameters","batchSize"],a);const l=Rt(t,["learningRate"]);return void 0!==n&&null!=l&&Dt(n,["tuningTask","hyperparameters","learningRate"],l),o}(0,r,n)),n}function rr(e,t){const n={},o=Rt(t,["baseModel"]);null!=o&&Dt(n,["baseModel"],o);const i=Rt(t,["trainingDataset"]);null!=i&&Dt(n,["supervisedTuningSpec","trainingDatasetUri"],function(e,t,n){const o=Rt(t,["gcsUri"]);if(void 0!==n&&null!=o&&Dt(n,["supervisedTuningSpec","trainingDatasetUri"],o),void 0!==Rt(t,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.");return{}}(0,i,n));const r=Rt(t,["config"]);return null!=r&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["validationDataset"]);void 0!==n&&null!=o&&Dt(n,["supervisedTuningSpec"],function(e,t){const n={},o=Rt(t,["gcsUri"]);return null!=o&&Dt(n,["validationDatasetUri"],o),n}(0,o));const i=Rt(t,["tunedModelDisplayName"]);void 0!==n&&null!=i&&Dt(n,["tunedModelDisplayName"],i);const r=Rt(t,["description"]);void 0!==n&&null!=r&&Dt(n,["description"],r);const s=Rt(t,["epochCount"]);void 0!==n&&null!=s&&Dt(n,["supervisedTuningSpec","hyperParameters","epochCount"],s);const a=Rt(t,["learningRateMultiplier"]);void 0!==n&&null!=a&&Dt(n,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=Rt(t,["exportLastCheckpointOnly"]);void 0!==n&&null!=l&&Dt(n,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=Rt(t,["adapterSize"]);if(void 0!==n&&null!=c&&Dt(n,["supervisedTuningSpec","hyperParameters","adapterSize"],c),void 0!==Rt(t,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==Rt(t,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");return{}}(0,r,n)),n}function sr(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["state"]);null!=i&&Dt(n,["state"],ao(0,i));const r=Rt(t,["createTime"]);null!=r&&Dt(n,["createTime"],r);const s=Rt(t,["tuningTask","startTime"]);null!=s&&Dt(n,["startTime"],s);const a=Rt(t,["tuningTask","completeTime"]);null!=a&&Dt(n,["endTime"],a);const l=Rt(t,["updateTime"]);null!=l&&Dt(n,["updateTime"],l);const c=Rt(t,["description"]);null!=c&&Dt(n,["description"],c);const u=Rt(t,["baseModel"]);null!=u&&Dt(n,["baseModel"],u);const d=Rt(t,["_self"]);null!=d&&Dt(n,["tunedModel"],function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["model"],o);const i=Rt(t,["name"]);return null!=i&&Dt(n,["endpoint"],i),n}(0,d));const p=Rt(t,["distillationSpec"]);null!=p&&Dt(n,["distillationSpec"],p);const m=Rt(t,["experiment"]);null!=m&&Dt(n,["experiment"],m);const f=Rt(t,["labels"]);null!=f&&Dt(n,["labels"],f);const h=Rt(t,["pipelineJob"]);null!=h&&Dt(n,["pipelineJob"],h);const g=Rt(t,["serviceAccount"]);null!=g&&Dt(n,["serviceAccount"],g);const y=Rt(t,["tunedModelDisplayName"]);return null!=y&&Dt(n,["tunedModelDisplayName"],y),n}function ar(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["state"]);null!=i&&Dt(n,["state"],ao(0,i));const r=Rt(t,["createTime"]);null!=r&&Dt(n,["createTime"],r);const s=Rt(t,["startTime"]);null!=s&&Dt(n,["startTime"],s);const a=Rt(t,["endTime"]);null!=a&&Dt(n,["endTime"],a);const l=Rt(t,["updateTime"]);null!=l&&Dt(n,["updateTime"],l);const c=Rt(t,["error"]);null!=c&&Dt(n,["error"],c);const u=Rt(t,["description"]);null!=u&&Dt(n,["description"],u);const d=Rt(t,["baseModel"]);null!=d&&Dt(n,["baseModel"],d);const p=Rt(t,["tunedModel"]);null!=p&&Dt(n,["tunedModel"],function(e,t){const n={},o=Rt(t,["model"]);null!=o&&Dt(n,["model"],o);const i=Rt(t,["endpoint"]);null!=i&&Dt(n,["endpoint"],i);const r=Rt(t,["checkpoints"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map((e=>function(e,t){const n={},o=Rt(t,["checkpointId"]);null!=o&&Dt(n,["checkpointId"],o);const i=Rt(t,["epoch"]);null!=i&&Dt(n,["epoch"],i);const r=Rt(t,["step"]);null!=r&&Dt(n,["step"],r);const s=Rt(t,["endpoint"]);return null!=s&&Dt(n,["endpoint"],s),n}(0,e)))),Dt(n,["checkpoints"],e)}return n}(0,p));const m=Rt(t,["supervisedTuningSpec"]);null!=m&&Dt(n,["supervisedTuningSpec"],m);const f=Rt(t,["tuningDataStats"]);null!=f&&Dt(n,["tuningDataStats"],f);const h=Rt(t,["encryptionSpec"]);null!=h&&Dt(n,["encryptionSpec"],h);const g=Rt(t,["partnerModelTuningSpec"]);null!=g&&Dt(n,["partnerModelTuningSpec"],g);const y=Rt(t,["distillationSpec"]);null!=y&&Dt(n,["distillationSpec"],y);const v=Rt(t,["experiment"]);null!=v&&Dt(n,["experiment"],v);const b=Rt(t,["labels"]);null!=b&&Dt(n,["labels"],b);const _=Rt(t,["pipelineJob"]);null!=_&&Dt(n,["pipelineJob"],_);const C=Rt(t,["serviceAccount"]);null!=C&&Dt(n,["serviceAccount"],C);const E=Rt(t,["tunedModelDisplayName"]);return null!=E&&Dt(n,["tunedModelDisplayName"],E),n}class lr extends kt{constructor(e){super(),this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new So(Oo.PAGED_ITEM_TUNING_JOBS,(e=>this.listInternal(e)),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const t=await this.tuneMldevInternal(e);let n="";return void 0!==t.metadata&&void 0!==t.metadata.tunedModel?n=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(n=t.name.split("/operations/")[0]),{name:n,state:Wt.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],o);const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>ar(this.apiClient,e)))}{const t=function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["_url","name"],o);const i=Rt(t,["config"]);return null!=i&&Dt(n,["config"],i),n}(this.apiClient,e);return s=Pt("{name}",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>sr(this.apiClient,e)))}}async listInternal(e){var t,n,o,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const o=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i);const r=Rt(t,["filter"]);return void 0!==n&&null!=r&&Dt(n,["_query","filter"],r),{}}(0,o,n)),n}(this.apiClient,e);return s=Pt("tuningJobs",o._url),a=o._query,delete o.config,delete o._url,delete o._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["tuningJobs"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>ar(0,e)))),Dt(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new Nn;return Object.assign(n,t),n}))}{const t=function(e,t){const n={},o=Rt(t,["config"]);return null!=o&&Dt(n,["config"],function(e,t,n){const o=Rt(t,["pageSize"]);void 0!==n&&null!=o&&Dt(n,["_query","pageSize"],o);const i=Rt(t,["pageToken"]);void 0!==n&&null!=i&&Dt(n,["_query","pageToken"],i);const r=Rt(t,["filter"]);return void 0!==n&&null!=r&&Dt(n,["_query","filter"],r),{}}(0,o,n)),n}(this.apiClient,e);return s=Pt("tunedModels",t._url),a=t._query,delete t.config,delete t._url,delete t._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(o=e.config)||void 0===o?void 0:o.httpOptions,abortSignal:null===(i=e.config)||void 0===i?void 0:i.abortSignal}).then((e=>e.json())),r.then((e=>{const t=function(e,t){const n={},o=Rt(t,["nextPageToken"]);null!=o&&Dt(n,["nextPageToken"],o);const i=Rt(t,["tunedModels"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map((e=>sr(0,e)))),Dt(n,["tuningJobs"],e)}return n}(this.apiClient,e),n=new Nn;return Object.assign(n,t),n}))}}async tuneInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI()){const s=rr(this.apiClient,e);return i=Pt("tuningJobs",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>ar(this.apiClient,e)))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let o,i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ir(this.apiClient,e);return i=Pt("tunedModels",s._url),r=s._query,delete s.config,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then((e=>e.json())),o.then((e=>function(e,t){const n={},o=Rt(t,["name"]);null!=o&&Dt(n,["name"],o);const i=Rt(t,["metadata"]);null!=i&&Dt(n,["metadata"],i);const r=Rt(t,["done"]);null!=r&&Dt(n,["done"],r);const s=Rt(t,["error"]);return null!=s&&Dt(n,["error"],s),n}(this.apiClient,e)))}}}class cr{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ur="x-goog-upload-status";function dr(e){return new Promise((t=>setTimeout(t,e)))}class pr{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var o,i,r;let s=0,a=0,l=new Rn(new Response),c="upload";for(s=e.size;a<s;){const r=Math.min(8388608,s-a),u=e.slice(a,a+r);a+r>=s&&(c+=", finalize");let d=0,p=1e3;for(;d<3&&(l=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(r)}}}),!(null===(o=null==l?void 0:l.headers)||void 0===o?void 0:o[ur]));)d++,await dr(p),p*=2;if(a+=r,"active"!==(null===(i=null==l?void 0:l.headers)||void 0===i?void 0:i[ur]))break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(null==l?void 0:l.json());if("final"!==(null===(r=null==l?void 0:l.headers)||void 0===r?void 0:r[ur]))throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}class mr{create(e,t,n){return new fr(e,t,n)}}class fr{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}const hr="x-goog-api-key";class gr{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(null===e.get(hr)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hr,this.apiKey)}}}function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}var vr;function br(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var l=o&&o.prototype instanceof a?o:a,c=Object.create(l.prototype);return _r(c,"_invoke",function(n,o,i){var r,a,l,c=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return r=t,a=0,l=e,p.n=n,s}};function m(n,o){for(a=n,l=o,t=0;!d&&c&&!i&&t<u.length;t++){var i,r=u[t],m=p.p,f=r[2];n>3?(i=f===o)&&(l=r[(a=r[4])?5:(a=3,3)],r[4]=r[5]=e):r[0]<=m&&((i=n<2&&m<r[1])?(a=0,p.v=o,p.n=r[1]):m<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,p.n=f,a=0))}if(i||n>1)return s;throw d=!0,o}return function(i,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,f),a=u,l=f;(t=a<2?e:l)||!d;){r||(a?a<3?(a>1&&(p.n=-1),m(a,l)):p.n=l:p.v=l);try{if(c=2,r){if(a||(i="next"),t=r[i]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=r.return)&&t.call(r),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);r=e}else if((t=(d=p.n<0)?l:n.call(o,p))!==s)break}catch(t){r=e,a=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,i,r),!0),c}var s={};function a(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(_r(t={},o,(function(){return this})),t),d=c.prototype=a.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,_r(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,_r(d,"constructor",c),_r(c,"constructor",l),l.displayName="GeneratorFunction",_r(c,i,"GeneratorFunction"),_r(d),_r(d,i,"Generator"),_r(d,o,(function(){return this})),_r(d,"toString",(function(){return"[object Generator]"})),(br=function(){return{w:r,m:p}})()}function _r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_r=function(e,t,n,o){if(t)i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var r=function(t,n){_r(e,t,(function(e){return this._invoke(t,n,e)}))};r("next",0),r("throw",1),r("return",2)}},_r(e,t,n,o)}function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wr(e,t,n){return(t=function(e){var t=function(e){if("object"!=yr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t,n,o,i,r,s){try{var a=e[r](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(o,i)}var Or=null===(vr=window.gcbData)||void 0===vr?void 0:vr.api_key;Or||console.error("API_KEY for Gemini is not set. Please ensure it is available in window.gcbData.api_key.");var Sr=new class{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=function(e,t,n){var o,i,r;if(!(null===(o=e.httpOptions)||void 0===o?void 0:o.baseUrl)){const o={geminiUrl:void 0,vertexUrl:void 0};return e.vertexai?null!==(i=o.vertexUrl)&&void 0!==i?i:t:null!==(r=o.geminiUrl)&&void 0!==r?r:n}return e.httpOptions.baseUrl}(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const o=new gr(this.apiKey);this.apiClient=new Mi({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new pr,downloader:new cr}),this.models=new Wi(this.apiClient),this.live=new Bi(this.apiClient,o,new mr),this.chats=new Ro(this.models,this.apiClient),this.caches=new xo(this.apiClient),this.files=new Uo(this.apiClient),this.operations=new Qi(this.apiClient),this.authTokens=new or(this.apiClient),this.tunings=new lr(this.apiClient)}}({apiKey:Or});function xr(e,t,n){return Ar.apply(this,arguments)}function Ar(){var e;return e=br().m((function e(t,n,o){var i,r,s,a,l,c,u,d,p,m,f,h,g,y,v,b,_,C,E,w,T,O,S,x,A,I,N,k,P,D,R,M,j,U,L;return br().w((function(e){for(;;)switch(e.n){case 0:l="",c=!1,P=t,e.n="summary"===P?1:"experience_responsibilities"===P?2:"education_details"===P?3:"skill_suggestions"===P?4:"new_experience_entry"===P?5:"new_education_entry"===P?6:"initial_cv_from_title"===P?7:"initial_cv_from_job_description"===P?8:"tailor_cv_to_job_description"===P?9:10;break;case 1:return l='Generate a concise and compelling professional summary for a CV (2-4 sentences). Base it on the following input: "'.concat(n,'".'),null!=o&&null!==(i=o.existingCV)&&void 0!==i&&null!==(i=i.experience)&&void 0!==i&&i.length&&(l+="\nConsider the following experience: ".concat(o.existingCV.experience.map((function(e){return"".concat(e.jobTitle," at ").concat(e.company)})).join(", "),".")),e.a(3,11);case 2:return l="Generate 3-5 impactful bullet points for a job responsibility section. Focus on achievements and use action verbs.\nJob Title: ".concat((null==o?void 0:o.jobTitle)||"N/A","\nCompany: ").concat((null==o?void 0:o.company)||"N/A",'\nKeywords/details: "').concat(n,'"\nRespond ONLY with a JSON string array of responsibilities. Example: ["Developed new product features.", "Managed a team of 5."].'),c=!0,e.a(3,11);case 3:return l="Generate 1-2 concise bullet points for an education entry's details. Focus on academic achievements, relevant coursework, or honors.\nDegree: ".concat((null==o?void 0:o.degree)||"N/A","\nInstitution: ").concat((null==o?void 0:o.institution)||"N/A",'\nKeywords/details: "').concat(n,'"\nRespond ONLY with a JSON string array of details. Example: ["GPA: 3.8/4.0", "Relevant coursework: Advanced Algorithms, AI."].'),c=!0,e.a(3,11);case 4:return l='For the CV skill category "'.concat((null==o?void 0:o.skillCategory)||"General Skills",'", generate 3-5 relevant skills.\nUser-provided keywords/focus: "').concat(n,'".\nRespond ONLY with a JSON string array of skills. Example: ["JavaScript", "React", "Node.js"].'),c=!0,e.a(3,11);case 5:return l='Based on the following input regarding a job: "'.concat(n,'", generate a complete job experience entry for a CV.\n      Provide details for job title, company, location, start date, end date (use "Present" if ongoing or estimate if not specified), and 3-5 responsibility bullet points.\n      Respond ONLY with a JSON object matching this structure: {"jobTitle": "string", "company": "string", "location": "string", "startDate": "string", "endDate": "string", "responsibilities": ["string", "string"]}.\n      Example for startDate/endDate: "Jan 2020", "Dec 2022" or "Present".\n      Be professional and infer reasonable details if not all are provided in the input. If location is not provided, use a common city like "Anytown, USA". If company is not provided, use a placeholder like "Global Corp Inc."'),c=!0,e.a(3,11);case 6:return l='Based on the following input regarding an academic qualification: "'.concat(n,'", generate a complete education entry for a CV.\n      Provide details for degree, institution, location, graduation date, and 1-2 detail bullet points (e.g., GPA, honors, relevant coursework).\n      Respond ONLY with a JSON object matching this structure: {"degree": "string", "institution": "string", "location": "string", "graduationDate": "string", "details": ["string", "string"]}.\n      Example for graduationDate: "May 2020".\n      Be professional and infer reasonable details if not all are provided in the input. If location is not provided, use a common city like "Anytown, USA". If institution is not provided, use a placeholder like "State University Online".'),c=!0,e.a(3,11);case 7:return l='Based on the job title: "'.concat(n,'", generate a comprehensive CV structure.\nThe CV should include:\n1.  PersonalInfo: MUST BE a JSON object with EXACTLY these fields: "name" (string, set to "Your Name (Update Me!)"), "title" (string, set to the provided job title "').concat(n,'"), "phone" (string, empty), "email" (string, empty), "linkedin" (string, empty), "github" (string, empty), "portfolio" (string, empty), "address" (string, empty), "portraitUrl" (string, empty), "showPortrait" (boolean, false), "showPhone" (boolean, true), "showEmail" (boolean, true), "showLinkedin" (boolean, true), "showGithub" (boolean, true), "showPortfolio" (boolean, true), "showAddress" (boolean, false). No other fields are allowed in PersonalInfo.\n2.  Summary: A professional summary of 2-4 sentences relevant to the job title.\n3.  Experience: One sample experience entry relevant to the job title. Include \'jobTitle\' (can be same as input or related), \'company\' (e.g., "Tech Solutions Inc."), \'location\' (e.g., "San Francisco, CA"), \'startDate\' (e.g., "Jan 2020"), \'endDate\' (e.g., "Present"), and 2-3 \'responsibilities\' (bullet points).\n4.  Education: One sample education entry. Include \'degree\' (e.g., "Bachelor of Science in Computer Science"), \'institution\' (e.g., "State University"), \'location\' (e.g., "Anytown, USA"), \'graduationDate\' (e.g., "May 2018"), and 1-2 \'details\' (e.g., "Relevant coursework: Data Structures, Algorithms").\n5.  Skills: Two skill entries. Each with a \'category\' (e.g., "Programming Languages", "Tools & Technologies") and a \'skills\' array with 3-4 relevant skills.\n\nRespond ONLY with a single JSON object matching the CVData structure. Do not include \'id\' fields in your response; I will add them.\n\nCVData structure example for your response (omit \'id\' fields, ensure PersonalInfo has ALL specified fields and NO OTHERS):\n{\n  "personalInfo": {\n    "name": "Your Name (Update Me!)",\n    "title": "').concat(n,'",\n    "phone": "",\n    "email": "",\n    "linkedin": "",\n    "github": "",\n    "portfolio": "",\n    "address": "",\n    "portraitUrl": "",\n    "showPortrait": false,\n    "showPhone": true,\n    "showEmail": true,\n    "showLinkedin": true,\n    "showGithub": true,\n    "showPortfolio": true,\n    "showAddress": false\n  },\n  "summary": "Generated summary...",\n  "experience": [{ "jobTitle": "Relevant Job Title", "company": "Example Company", "location": "City, ST", "startDate": "Month Year", "endDate": "Month Year or Present", "responsibilities": ["Responsibility 1.", "Responsibility 2."] }],\n  "education": [{ "degree": "Relevant Degree", "institution": "University Name", "location": "City, ST", "graduationDate": "Month Year", "details": ["Detail 1.", "Detail 2."] }],\n  "skills": [{ "category": "Skill Category 1", "skills": ["Skill A", "Skill B"] }, { "category": "Skill Category 2", "skills": ["Skill C", "Skill D"] }]\n}'),c=!0,e.a(3,11);case 8:return l="You are an expert CV generator. Based on the following Job Description:\n---\n".concat(n,'\n---\nGenerate a comprehensive foundational CV structure. Your primary goal is to extract the core job title from the Job Description and build the CV around it.\n\nThe CV MUST include:\n1.  PersonalInfo: A JSON object with EXACTLY these fields: "name" (string, set to "Your Name (Update Me!)"), "title" (string, set to the core job title you extracted from the Job Description), "phone" (string, empty), "email" (string, empty), "linkedin" (string, empty), "github" (string, empty), "portfolio" (string, empty), "address" (string, empty), "portraitUrl" (string, empty), "showPortrait" (boolean, false), "showPhone" (boolean, true), "showEmail" (boolean, true), "showLinkedin" (boolean, true), "showGithub" (boolean, true), "showPortfolio" (boolean, true), "showAddress" (boolean, false). No other fields are allowed in PersonalInfo.\n2.  Summary: A professional summary (2-4 sentences) highly relevant to the Job Description and the extracted core job title.\n3.  Experience:\n    *   If the Job Description clearly implies a senior-level role (e.g., uses terms like \'Senior\', \'Lead\', \'Manager\', \'Director\', \'Principal\', or explicitly states a requirement for many years of experience like 7+, 10+, 15+ years), generate 2 or 3 distinct sample experience entries. These entries should reflect progressively responsible roles or significant projects relevant to the Job Description.\n    *   Otherwise (for entry-level to mid-level roles), generate 1 or 2 distinct sample experience entries.\n    *   Each experience entry MUST include: \'jobTitle\' (relevant to the JD), \'company\' (e.g., "Relevant Company Inc."), \'location\' (e.g., "Major City, ST"), \'startDate\' (e.g., "Jan 2019"), \'endDate\' (e.g., "Dec 2021" or "Present" for the most recent), and 2-3 \'responsibilities\' (bullet points highlighting skills and achievements aligned with the JD).\n4.  Education: One sample education entry. Include \'degree\' (e.g., "Bachelor of Science in Related Field"), \'institution\' (e.g., "University Name"), \'location\' (e.g., "City, ST"), \'graduationDate\' (e.g., "May 2017"), and 1-2 \'details\' (e.g., "Relevant coursework: Key Skill, Another Skill").\n5.  Skills: One to two skill entries. Each with a \'category\' (e.g., "Key Technologies from JD", "Core Competencies from JD") and a \'skills\' array with 3-5 skills directly extracted or inferred from the Job Description.\n\nRespond ONLY with a single JSON object matching the CVData structure. Do not include \'id\' fields in your response; I will add them.\nThe generated content should be plausible and professional.\n\nCVData structure example for your response (omit \'id\' fields, ensure PersonalInfo has ALL specified fields and NO OTHERS, adapt experience count based on JD seniority):\n{\n  "personalInfo": { "name": "Your Name (Update Me!)", "title": "Extracted Title from JD", "phone": "", "email": "", "linkedin": "", "github": "", "portfolio": "", "address": "", "portraitUrl": "", "showPortrait": false, "showPhone": true, "showEmail": true, "showLinkedin": true, "showGithub": true, "showPortfolio": true, "showAddress": false },\n  "summary": "Generated summary highly relevant to the JD...",\n  "experience": [\n    { "jobTitle": "Extracted or Related Sr. Job Title", "company": "Example Senior Company", "location": "City, ST", "startDate": "Month Year", "endDate": "Present", "responsibilities": ["Responsibility 1.", "Responsibility 2."] }\n    // Potentially more experience entries if JD is senior\n  ],\n  "education": [{ "degree": "Relevant Degree", "institution": "University Name", "location": "City, ST", "graduationDate": "Month Year", "details": ["Detail 1.", "Detail 2."] }],\n  "skills": [{ "category": "Skill Category from JD", "skills": ["Skill A", "Skill B"] }]\n}'),c=!0,e.a(3,11);case 9:return u={summary:null==o||null===(r=o.existingCV)||void 0===r?void 0:r.summary,skills:null==o||null===(s=o.existingCV)||void 0===s?void 0:s.skills.map((function(e){return{id:e.id,category:e.category,skills:e.skills}})),experience:null==o||null===(a=o.existingCV)||void 0===a?void 0:a.experience.map((function(e){return{id:e.id,jobTitle:e.jobTitle,company:e.company,responsibilities:e.responsibilities}}))},d=void 0===(null==o?void 0:o.applyDetailedExperienceUpdates)||o.applyDetailedExperienceUpdates,l="You are an expert CV tailoring assistant.\nJob Description to target:\n---\n".concat(n," \n---\n\nCurrent CV Content (JSON format):\n---\n").concat(JSON.stringify(u),"\n---\n\nUser's preference for experience updates: ").concat(d?"User ALLOWS updates to existing job titles and suggestion of new experiences.":"User wants to KEEP existing job titles and does NOT want new experience entries suggested. Only update responsibilities for existing entries.",'\n\nYour task is to revise the "Current CV Content" to be exceptionally well-aligned with the "Job Description to target". Treat this as a fresh, comprehensive analysis for the new Job Description, re-evaluating all relevant parts of the CV.\n\nRespond ONLY with a single JSON object with the following structure:\n{\n  "updatedSummary": "A revised summary (2-4 sentences) that directly addresses the key requirements and company values mentioned in the Job Description...",\n  "updatedSkills": [\n    { "id": "original_or_new_id_abc", "category": "Key Technologies from JD", "skills": ["Skill X from JD", "Skill Y from JD", "Tool Z from JD"] }\n  ],\n  "updatedExperience": [\n    { "id": "original_id_of_experience_1", "updatedJobTitle": "Job Title (see instructions below)", "responsibilities": ["Tailored responsibility 1.1 reflecting JD keywords like \'cloud migration\' and \'cost optimization\'.", "Tailored responsibility 1.2 emphasizing relevant achievement with metrics if possible."] }\n  ],\n  "suggestedNewExperienceEntries": [ \n    // Example (see instructions below): \n    // { "jobTitle": "Senior Project Lead", "company": "Growth Phase Inc.", "location": "Remote", "startDate": "Jan 2018", "endDate": "Dec 2020", "responsibilities": ["Led cross-functional teams for JD-relevant projects."] }\n  ]\n}\n\nDetailed instructions for each field:\n- "updatedSummary": String. Must be concise and compelling, reflecting the most critical aspects of the JD.\n- "updatedSkills": Array of SkillEntry objects. Each MUST have "id" (preserve original ID if a similar category exists and is being updated, otherwise generate a new unique string ID like \'new_skill_cat_xyz\'), "category" (string, derived from JD or adapted from existing), and "skills" (array of strings, prioritize skills from JD). This list should replace the entire old skills section.\n- "updatedExperience": Array of objects. For EACH experience entry in the "Current CV Content", include its original "id" (string).\n    - "updatedJobTitle" (string, REQUIRED): \n        - If user preference ALLOWS updates (User preference is true): Critically evaluate the original job title against the target Job Description. Provide an `updatedJobTitle` that *maximizes* its alignment and relevance. If the original title is already perfectly optimal and cannot be improved for this JD, return the original title. Otherwise, return a revised title that enhances keyword matching, clarity, or better reflects the JD\'s focus for this experience entry.\n        - If user preference wants to KEEP existing titles (User preference is false): This field MUST be the *original* job title from the "Current CV Content" for this experience ID. Do not change it.\n    - "responsibilities" (array of strings, 2-4 bullet points): ALWAYS tailor these to highlight achievements and skills directly relevant to the Job Description, using strong action verbs and keywords from the JD. Quantify achievements where possible.\n- "suggestedNewExperienceEntries" (array of objects, optional):\n    - If user preference ALLOWS updates (User preference is true) AND if the Job Description implies a significantly more senior role than the "Current CV Content" suggests (e.g., JD is for a Director with 10+ years experience, but CV shows 3 years as an engineer), suggest 1 or 2 NEW, distinct experience entries that would bridge this gap. These new entries should be plausible and align with a career progression towards the target role. Each object here should have: "jobTitle", "company", "location", "startDate", "endDate", and "responsibilities". Do NOT include \'id\' for these new suggestions.\n    - If user preference does NOT want new entries suggested (User preference is false): This array MUST be empty or omitted entirely from the JSON response.\n\nEnsure all IDs for "updatedSkills" are unique strings.\nFocus on making the CV highly competitive for the specific Job Description.\n'),c=!0,e.a(3,11);case 10:throw new Error("Unsupported section type for generation: ".concat(t));case 11:return e.p=11,e.n=12,Sr.models.generateContent({model:"gemini-2.5-flash-preview-04-17",contents:l,config:c?{responseMimeType:"application/json"}:{thinkingConfig:{thinkingBudget:0}}});case 12:if(p=e.v,m=p.text.trim(),f=/^```(\w*)?\s*\n?([^]*?)\n?\s*```$/,(h=m.match(f))&&h[2]&&(m=h[2].trim()),"experience_responsibilities"!==t&&"education_details"!==t&&"skill_suggestions"!==t){e.n=16;break}return e.p=13,g=JSON.parse(m),e.a(2,g);case 14:if(e.p=14,D=e.v,console.error("Failed to parse JSON for ".concat(t,":"),D,"\nRaw output:",m),!m.includes(",")){e.n=15;break}return e.a(2,m.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})));case 15:return e.a(2,m?[m]:[]);case 16:if("new_experience_entry"!==t){e.n=19;break}return e.p=17,y=JSON.parse(m),e.a(2,Er(Er({},y),{},{id:crypto.randomUUID()}));case 18:throw e.p=18,R=e.v,console.error("Failed to parse JSON for ".concat(t,":"),R,"\nRaw output:",m),new Error("Gemini returned an invalid format for new experience entry. Raw: ".concat(m));case 19:if("new_education_entry"!==t){e.n=22;break}return e.p=20,v=JSON.parse(m),e.a(2,Er(Er({},v),{},{id:crypto.randomUUID()}));case 21:throw e.p=21,M=e.v,console.error("Failed to parse JSON for ".concat(t,":"),M,"\nRaw output:",m),new Error("Gemini returned an invalid format for new education entry. Raw: ".concat(m));case 22:if("initial_cv_from_title"!==t&&"initial_cv_from_job_description"!==t){e.n=25;break}return e.p=23,A=JSON.parse(m),I="initial_cv_from_job_description"===t?(null===(b=A.personalInfo)||void 0===b?void 0:b.title)||"Job Title (from JD)":n,N={name:"Your Name (Update Me!)",title:I,phone:"",email:"",linkedin:"",github:"",portfolio:"",address:"",portraitUrl:(null===(_=A.personalInfo)||void 0===_?void 0:_.portraitUrl)||"",showPortrait:void 0!==(null===(C=A.personalInfo)||void 0===C?void 0:C.showPortrait)&&A.personalInfo.showPortrait,showPhone:void 0===(null===(E=A.personalInfo)||void 0===E?void 0:E.showPhone)||A.personalInfo.showPhone,showEmail:void 0===(null===(w=A.personalInfo)||void 0===w?void 0:w.showEmail)||A.personalInfo.showEmail,showLinkedin:void 0===(null===(T=A.personalInfo)||void 0===T?void 0:T.showLinkedin)||A.personalInfo.showLinkedin,showGithub:void 0===(null===(O=A.personalInfo)||void 0===O?void 0:O.showGithub)||A.personalInfo.showGithub,showPortfolio:void 0===(null===(S=A.personalInfo)||void 0===S?void 0:S.showPortfolio)||A.personalInfo.showPortfolio,showAddress:void 0!==(null===(x=A.personalInfo)||void 0===x?void 0:x.showAddress)&&A.personalInfo.showAddress},A.personalInfo=Er(Er(Er({},N),A.personalInfo),{},{title:A.personalInfo.title||I}),A.experience=(A.experience||[]).map((function(e){return Er(Er({},e),{},{id:crypto.randomUUID()})})),A.education=(A.education||[]).map((function(e){return Er(Er({},e),{},{id:crypto.randomUUID()})})),A.skills=(A.skills||[]).map((function(e){return Er(Er({},e),{},{id:crypto.randomUUID()})})),e.a(2,A);case 24:throw e.p=24,j=e.v,console.error("Failed to parse JSON for ".concat(t,":"),j,"\nRaw output:",m),new Error("Gemini returned an invalid format for initial CV data. Raw: ".concat(m));case 25:if("tailor_cv_to_job_description"!==t){e.n=28;break}return e.p=26,(k=JSON.parse(m)).updatedSkills&&(k.updatedSkills=k.updatedSkills.map((function(e){return Er(Er({},e),{},{id:e.id||crypto.randomUUID()})}))),e.a(2,k);case 27:throw e.p=27,U=e.v,console.error("Failed to parse JSON for ".concat(t,":"),U,"\nRaw output:",m),new Error("Gemini returned an invalid format for tailored CV data. Raw: ".concat(m));case 28:return e.a(2,m);case 29:if(e.p=29,L=e.v,console.error("Gemini API call failed:",L),!(L instanceof Error)){e.n=31;break}if(!L.message.includes("Raw:")){e.n=30;break}throw L;case 30:throw new Error("Failed to generate content from Gemini: ".concat(L.message));case 31:throw new Error("An unknown error occurred while generating content from Gemini.");case 32:return e.a(2)}}),e,null,[[26,27],[23,24],[20,21],[17,18],[13,14],[11,29]])})),Ar=function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){Tr(r,o,i,s,a,"next",e)}function a(e){Tr(r,o,i,s,a,"throw",e)}s(void 0)}))},Ar.apply(this,arguments)}function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){Pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pr(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ir(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ir(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(n,o,i,r){var l=o&&o.prototype instanceof a?o:a,c=Object.create(l.prototype);return Rr(c,"_invoke",function(n,o,i){var r,a,l,c=0,u=i||[],d=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return r=t,a=0,l=e,p.n=n,s}};function m(n,o){for(a=n,l=o,t=0;!d&&c&&!i&&t<u.length;t++){var i,r=u[t],m=p.p,f=r[2];n>3?(i=f===o)&&(l=r[(a=r[4])?5:(a=3,3)],r[4]=r[5]=e):r[0]<=m&&((i=n<2&&m<r[1])?(a=0,p.v=o,p.n=r[1]):m<f&&(i=n<3||r[0]>o||o>f)&&(r[4]=n,r[5]=o,p.n=f,a=0))}if(i||n>1)return s;throw d=!0,o}return function(i,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,f),a=u,l=f;(t=a<2?e:l)||!d;){r||(a?a<3?(a>1&&(p.n=-1),m(a,l)):p.n=l:p.v=l);try{if(c=2,r){if(a||(i="next"),t=r[i]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=r.return)&&t.call(r),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);r=e}else if((t=(d=p.n<0)?l:n.call(o,p))!==s)break}catch(t){r=e,a=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,i,r),!0),c}var s={};function a(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(Rr(t={},o,(function(){return this})),t),d=c.prototype=a.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Rr(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,Rr(d,"constructor",c),Rr(c,"constructor",l),l.displayName="GeneratorFunction",Rr(c,i,"GeneratorFunction"),Rr(d),Rr(d,i,"Generator"),Rr(d,o,(function(){return this})),Rr(d,"toString",(function(){return"[object Generator]"})),(Dr=function(){return{w:r,m:p}})()}function Rr(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}Rr=function(e,t,n,o){if(t)i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var r=function(t,n){Rr(e,t,(function(e){return this._invoke(t,n,e)}))};r("next",0),r("throw",1),r("return",2)}},Rr(e,t,n,o)}function Mr(e,t,n,o,i,r,s){try{var a=e[r](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(o,i)}function jr(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){Mr(r,o,i,s,a,"next",e)}function a(e){Mr(r,o,i,s,a,"throw",e)}s(void 0)}))}}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||Lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){if(e){if("string"==typeof e)return Fr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fr(e,t):void 0}}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var Gr=function(e){e.onCvGenerated,e.onGenerationError;var o=e.isLoading,i=e.triggerGeneration,r=Ur((0,t.useState)(""),2),s=r[0],a=r[1],l=Ur((0,t.useState)(""),2),c=l[0],u=l[1],d=Ur((0,t.useState)("title"),2),p=d[0],m=d[1],f=Ur((0,t.useState)(null),2),g=f[0],y=f[1],b=function(){var e=jr(Dr().m((function e(t){var n;return Dr().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),(n="title"===p?s:c).trim()){e.n=1;break}return y("Please enter your desired ".concat("title"===p?"job title":"job description",".")),e.a(2);case 1:return y(null),e.n=2,i(n,p);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}();return n().createElement("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-8"},n().createElement("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg text-center"},n().createElement(v,{className:"w-16 h-16 text-blue-600 mx-auto mb-6"}),n().createElement("h2",{className:"text-3xl font-bold text-slate-800 mb-4"},"Let's Craft Your CV!"),n().createElement("p",{className:"text-slate-600 mb-6"},"Start by providing your desired job title or a full job description. Gemini AI will help create a foundational CV for you."),n().createElement("div",{className:"mb-6"},n().createElement("div",{className:"flex justify-center space-x-4"},["title","description"].map((function(e){return n().createElement("button",{key:e,onClick:function(){return m(e)},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors\n                                    ".concat(p===e?"bg-blue-600 text-white shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300")},"title"===e?"Use Job Title":"Use Job Description")})))),n().createElement("form",{onSubmit:b,className:"space-y-6"},"title"===p?n().createElement("div",null,n().createElement("label",{htmlFor:"jobTitle",className:"sr-only"},"Desired Job Title"),n().createElement("input",{type:"text",id:"jobTitle",value:s,onChange:function(e){return a(e.target.value)},placeholder:"e.g., Senior Software Engineer",className:"w-full p-4 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg transition-shadow","aria-describedby":"jobTitleHelp"}),n().createElement("p",{id:"jobTitleHelp",className:"text-xs text-slate-500 mt-2"},"A specific job title helps us generate relevant content.")):n().createElement("div",null,n().createElement("label",{htmlFor:"jobDescription",className:"sr-only"},"Job Description"),n().createElement("textarea",{id:"jobDescription",value:c,onChange:function(e){return u(e.target.value)},placeholder:"Paste the full job description here...",rows:8,className:"w-full p-4 border border-slate-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base transition-shadow","aria-describedby":"jobDescriptionHelp"}),n().createElement("p",{id:"jobDescriptionHelp",className:"text-xs text-slate-500 mt-2"},"A full job description allows for a more tailored CV.")),g&&n().createElement(D,{message:g,onClear:function(){return y(null)}}),n().createElement("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg text-lg flex items-center justify-center gap-3 transition-colors duration-150 disabled:opacity-70"},o?n().createElement(P,{size:"w-6 h-6"}):n().createElement(h,{className:"w-6 h-6"}),o?"Generating Your CV...":"Generate CV with AI"))))};const Vr=function(){var e=Ur((0,t.useState)(p),2),o=e[0],i=e[1],s=Ur((0,t.useState)(u),2),a=s[0],l=s[1],c=Ur((0,t.useState)("content"),2),d=c[0],m=c[1],f=Ur((0,t.useState)(r.IDLE),2),h=f[0],v=f[1],_=Ur((0,t.useState)(null),2),C=_[0],E=_[1],w=Ur((0,t.useState)(!0),2),T=w[0],O=w[1],S=Ur((0,t.useState)(!1),2),x=S[0],A=S[1],I=Ur((0,t.useState)(!1),2),R=I[0],M=I[1],j=Ur((0,t.useState)(""),2),U=j[0],L=j[1],F=Ur((0,t.useState)(null),2),G=F[0],V=F[1],q=Ur((0,t.useState)(!0),2),J=q[0],B=q[1];(0,t.useEffect)((function(){try{var e=localStorage.getItem("geminiCVData"),t=localStorage.getItem("geminiCVTheme"),n=localStorage.getItem("geminiInitialCvGenerated"),o=localStorage.getItem("geminiJobDescription"),r=localStorage.getItem("geminiApplyDetailedUpdates");e&&i(JSON.parse(e)),t&&l(JSON.parse(t)),n&&M(JSON.parse(n)),o&&L(o),r&&B(JSON.parse(r))}catch(e){console.error("Failed to load data from localStorage:",e),i((function(e){return 0===Object.keys(e).length?p:e})),l((function(e){return 0===Object.keys(e).length?u:e})),M(!1),L(""),B(!0)}O(!1)}),[]),(0,t.useEffect)((function(){T||localStorage.setItem("geminiCVData",JSON.stringify(o))}),[o,T]),(0,t.useEffect)((function(){T||localStorage.setItem("geminiCVTheme",JSON.stringify(a))}),[a,T]),(0,t.useEffect)((function(){T||localStorage.setItem("geminiInitialCvGenerated",JSON.stringify(R))}),[R,T]),(0,t.useEffect)((function(){T||localStorage.setItem("geminiJobDescription",U)}),[U,T]),(0,t.useEffect)((function(){T||localStorage.setItem("geminiApplyDetailedUpdates",JSON.stringify(J))}),[J,T]);var Z=(0,t.useCallback)((function(e){i(e)}),[]),K=(0,t.useCallback)((function(e){l(e)}),[]),Y=(0,t.useCallback)((function(e,t){l((function(n){return kr(kr({},n),{},Pr({},e,t))}))}),[]),$=(0,t.useCallback)((function(){E(null)}),[]),W=function(){var e=jr(Dr().m((function e(n,o){var s,a,l,c;return Dr().w((function(e){for(;;)switch(e.n){case 0:return V("title"===o?"initial_cv_title":"initial_cv_jd"),v(r.LOADING),E(null),e.p=1,s="title"===o?"initial_cv_from_title":"initial_cv_from_job_description",e.n=2,xr(s,n);case 2:a=e.v,(0,t.startTransition)((function(){i(a),M(!0),v(r.SUCCESS),V(null)})),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Initial CV generation error:",c),l=c instanceof Error?c.message:"Failed to generate initial CV.",E(l),v(r.ERROR),V(null);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n){return e.apply(this,arguments)}}(),z=(0,t.useCallback)(function(){var e=jr(Dr().m((function e(n,s,a){var l,c,u,d,p;return Dr().w((function(e){for(;;)switch(e.n){case 0:if(l="new_experience_entry"===(null==a?void 0:a.generationType)?"new_experience_entry_".concat(o.experience.length):n.field?"".concat(n.section,"-").concat(n.index,"-").concat(n.field):n.section,V(l),v(r.LOADING),E(null),c=(null==a?void 0:a.generationType)||null){e.n=1;break}return u="Unsupported autofill target or generation type mapping. Target: ".concat(JSON.stringify(n)),console.error(u),E(u),v(r.ERROR),V(null),e.a(2);case 1:return e.p=1,e.n=2,xr(c,s,a);case 2:d=e.v,(0,t.startTransition)((function(){i((function(e){var t=JSON.parse(JSON.stringify(e));if("new_experience_entry"===c&&"experience"===n.section&&"add_new_gemini"===n.action){var o=d;t.experience.push(kr(kr({},o),{},{id:o.id||crypto.randomUUID()}))}else if("new_education_entry"===c&&"education"===n.section&&"add_new_gemini"===n.action){var i=d;t.education.push(kr(kr({},i),{},{id:i.id||crypto.randomUUID()}))}else"summary"===n.section&&"string"==typeof d?t.summary=d:n.section.startsWith("experience.")&&"responsibilities"===n.field&&Array.isArray(d)&&void 0!==n.index?t.experience[n.index]&&(t.experience[n.index].responsibilities=d):n.section.startsWith("education.")&&"details"===n.field&&Array.isArray(d)&&void 0!==n.index?t.education[n.index]&&(t.education[n.index].details=d):n.section.startsWith("skills.")&&"skills"===n.field&&Array.isArray(d)&&void 0!==n.index&&t.skills[n.index]&&(t.skills[n.index].skills=d);return t})),v(r.SUCCESS),V(null)})),e.n=4;break;case 3:e.p=3,p=e.v,console.error("Gemini autofill error:",p),E(p instanceof Error?p.message:"An unknown error occurred during content generation."),v(r.ERROR),V(null);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n,o){return e.apply(this,arguments)}}(),[o.experience.length]),X=(0,t.useCallback)(function(){var e=jr(Dr().m((function e(n,o,s){var a,l;return Dr().w((function(e){for(;;)switch(e.n){case 0:return V("tailor_cv"),v(r.LOADING),E(null),e.p=1,e.n=2,xr("tailor_cv_to_job_description",n,{existingCV:o,applyDetailedExperienceUpdates:s});case 2:a=e.v,(0,t.startTransition)((function(){i((function(e){var t,n=JSON.parse(JSON.stringify(e));if(n.summary=a.updatedSummary,n.skills=a.updatedSkills.map((function(t){var n=e.skills.find((function(e){return e.id===t.id||e.category===t.category}));return kr(kr({},t),{},{id:t.id||(null==n?void 0:n.id)||crypto.randomUUID()})})),a.updatedExperience.forEach((function(e){var t=n.experience.findIndex((function(t){return t.id===e.id}));-1!==t&&(n.experience[t].responsibilities=e.responsibilities,s&&e.updatedJobTitle&&"string"==typeof e.updatedJobTitle&&""!==e.updatedJobTitle.trim()&&(n.experience[t].jobTitle=e.updatedJobTitle))})),s&&a.suggestedNewExperienceEntries&&a.suggestedNewExperienceEntries.length>0){var o,i=a.suggestedNewExperienceEntries.map((function(e){return kr(kr({},e),{},{id:crypto.randomUUID()})}));(o=n.experience).push.apply(o,function(e){if(Array.isArray(e))return Fr(e)}(t=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Lr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return n})),v(r.SUCCESS),V(null)})),e.n=4;break;case 3:e.p=3,l=e.v,console.error("CV Tailoring error:",l),E(l instanceof Error?l.message:"Failed to tailor CV."),v(r.ERROR),V(null);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t,n,o){return e.apply(this,arguments)}}(),[]),Q=(0,t.useCallback)((function(){var e=a.previewScale||1;(0,t.startTransition)((function(){A(!0),l((function(e){return kr(kr({},e),{},{previewScale:1})}))})),E(null),setTimeout((function(){var n=document.getElementById("cv-content-formatted");if(n){var i={margin:0,filename:"CV_".concat(o.personalInfo.name.replace(/\s+/g,"_")||"Resume",".pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,logging:!1,backgroundColor:"white"===a.backgroundColor?"#FFFFFF":ee(a.backgroundColor)||"#FFFFFF"},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};html2pdf().from(n).set(i).save().catch((function(e){console.error("PDF generation failed:",e),E("Failed to generate PDF: ".concat(e.message))})).finally((function(){(0,t.startTransition)((function(){l((function(t){return kr(kr({},t),{},{previewScale:e})})),A(!1)}))}))}else console.error("CV content element not found for PDF generation."),E("Could not find CV content to generate PDF."),(0,t.startTransition)((function(){l((function(t){return kr(kr({},t),{},{previewScale:e})})),A(!1)}))}),250)}),[a.previewScale,o.personalInfo.name,a.backgroundColor]),ee=function(e){return e.startsWith("gray-")?"#F9FAFB":"white"===e?"#FFFFFF":"black"===e?"#000000":{"slate-50":"#F8FAFC","slate-100":"#F1F5F9","blue-50":"#EFF6FF","blue-600":"#2563EB"}[e]||null};return T?n().createElement("div",{className:"flex items-center justify-center min-h-screen bg-slate-100"},n().createElement(P,{message:"Loading CV Editor..."})):R||T?n().createElement("div",{className:"flex flex-col h-screen font-sans antialiased"},n().createElement("header",{className:"bg-slate-800 text-white p-4 shadow-md flex justify-between items-center"},n().createElement("h1",{className:"text-xl font-semibold"},"Gemini CV Theme Editor"),n().createElement("button",{onClick:Q,disabled:x||h===r.LOADING,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-3 rounded-md text-sm flex items-center gap-2 disabled:opacity-50","aria-label":"Download CV as PDF"},n().createElement(b,{className:"w-4 h-4"}),x?"Generating...":"Download PDF")),n().createElement("div",{className:"flex flex-1 overflow-hidden"},n().createElement("aside",{className:"w-1/3 max-w-md bg-slate-200 p-1 flex flex-col border-r border-slate-300"},n().createElement("nav",{className:"flex mb-2 rounded-md bg-slate-300 p-0.5"},n().createElement("button",{onClick:function(){return m("content")},className:"flex-1 p-2 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-colors ".concat("content"===d?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:bg-slate-100"),"aria-pressed":"content"===d},n().createElement(y,{className:"w-4 h-4"})," Content"),n().createElement("button",{onClick:function(){return m("theme")},className:"flex-1 p-2 text-sm font-medium rounded-md flex items-center justify-center gap-2 transition-colors ".concat("theme"===d?"bg-white text-purple-600 shadow-sm":"text-slate-600 hover:bg-slate-100"),"aria-pressed":"theme"===d},n().createElement(g,{className:"w-4 h-4"})," Theme")),n().createElement("div",{className:"flex-1 overflow-y-auto pr-1"},"content"===d&&n().createElement(H,{cvData:o,onCVDataChange:Z,onAutofillRequest:z,onTailorCvRequest:X,geminiStatus:h,geminiError:C,clearGeminiError:$,jobDescriptionForTailoring:U,onJobDescriptionChange:L,activeGeminiAction:G,setActiveGeminiAction:V,applyDetailedExperienceUpdates:J,onApplyDetailedExperienceUpdatesChange:B}),"theme"===d&&n().createElement(k,{currentTheme:a,onThemeChange:K,onThemeOptionChange:Y}))),n().createElement("main",{className:"flex-1 bg-slate-50 overflow-auto p-6 flex justify-center items-start"},n().createElement("div",{className:"w-full h-full"},n().createElement(N,{cvData:o,theme:a})))),(h===r.LOADING||x)&&n().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50","aria-live":"assertive",role:"alertdialog"},n().createElement(P,{message:x?"Generating PDF...":"tailor_cv"===G?"Gemini is tailoring your CV...":"initial_cv_title"===G||"initial_cv_jd"===G?"Gemini is crafting your initial CV...":h===r.LOADING?"Gemini is thinking...":"Processing...",size:"w-12 h-12"})),C&&"content"!==d&&n().createElement("div",{className:"fixed bottom-4 right-4 z-50"},n().createElement(D,{message:C,onClear:$}))):n().createElement(Gr,{onCvGenerated:function(e){(0,t.startTransition)((function(){i(e),M(!0),v(r.IDLE)}))},onGenerationError:function(e){E(e),v(r.ERROR)},isLoading:h===r.LOADING&&("initial_cv_title"===G||"initial_cv_jd"===G),triggerGeneration:W})};window.GeminiCVBuilder={init:function(e){var t=document.getElementById(e.containerId);if(t){t.innerHTML="";var o=document.createElement("div");o.id="gcb-root",o.className="gcb-app-root",t.appendChild(o),window.gcbConfig={apiKey:e.apiKey,ajaxUrl:e.ajaxUrl,nonce:e.nonce,userId:e.userId,isLoggedIn:e.isLoggedIn,allowSave:e.allowSave,rateLimit:e.rateLimit},i().render(n().createElement(Vr,{initialTheme:e.theme,wpConfig:window.gcbConfig}),o)}else console.error("GeminiCVBuilder: Container not found")},destroy:function(e){var t=document.getElementById(e);t&&(i().unmountComponentAtNode(t),t.innerHTML="")}},window.GeminiCVBuilder={}})();